var base2={name:"base2",version:"1.0",exports:"Base,Package,Abstract,Module,Enumerable,Map,Collection,RegGrp,Undefined,Null,This,True,False,assignID,detect,global",namespace:""};new function(_no_shrink_){var Undefined=K(),Null=K(null),True=K(!0),False=K(!1),This=function(){return this},global=This(),base2=global.base2,_FORMAT=/%([1-9])/g,_LTRIM=/^\s\s*/,_RTRIM=/\s\s*$/,_RESCAPE=/([\/()[\]{}|*+-.,^$?\\])/g,_BASE=/try/.test(detect)?/\bbase\b/:/.*/,_HIDDEN=["constructor","toString","valueOf"],_MSIE_NATIVE_FUNCTION=detect("(jscript)")?new RegExp("^"+rescape(isNaN).replace(/isNaN/,"\\w+")+"$"):{test:False},_counter=1,_slice=Array.prototype.slice;function assignID(e){return e.base2ID||(e.base2ID="b2_"+_counter++),e.base2ID}_Function_forEach();var _subclass=function(e,t){base2.__prototyping=this.prototype;var n=new this;e&&extend(n,e),delete base2.__prototyping;var a,i=n.constructor;function r(){if(!base2.__prototyping){if(this.constructor!=arguments.callee&&!this.__constructing)return extend(arguments[0],n);this.__constructing=!0,i.apply(this,arguments),delete this.__constructing}return this}for(a in n.constructor=r,Base)r[a]=this[a];return r.ancestor=this,r.base=Undefined,t&&extend(r,t),r.prototype=n,r.init&&r.init(),r["#implements"]=[],r["#implemented_by"]=[],r},Base=_subclass.call(Object,{constructor:function(){0<arguments.length&&this.extend(arguments[0])},base:function(){},extend:delegate(extend)},Base={ancestorOf:function(e){return _ancestorOf(this,e)},extend:_subclass,forEach:function(e,t,n){_Function_forEach(this,e,t,n)},implement:function(e){return"function"==typeof e&&(_ancestorOf(Base,e)&&(this["#implements"].push(e),e["#implemented_by"].push(this)),e=e.prototype),extend(this.prototype,e),this}}),Package=Base.extend({constructor:function(e,t){var n,a;function i(e){e=e.split(".");for(var t=base2,n=0;t&&null!=e[n];)t=t[e[n++]];return t}this.extend(t),this.init&&this.init(),this.name&&"base2"!=this.name&&(this.parent||(this.parent=base2),this.parent.addName(this.name,this),this.namespace=format("var %1=%2;",this.name,String2.slice(this,1,-1))),e&&(t=base2.JavaScript?base2.JavaScript.namespace:"",e.imports=Array2.reduce(csv(this.imports),function(e,t){var n=i(t)||i("JavaScript."+t);return assert(n,format("Object not found: '%1'.",t),ReferenceError),e+n.namespace},"var base2=(function(){return this.base2})();"+base2.namespace+t)+lang.namespace,e.exports=Array2.reduce(csv(this.exports),function(e,t){var n=this.name+"."+t;return this.namespace+="var "+t+"="+n+";",e+"if(!"+n+")"+n+"="+t+";"},"",this)+"this._label_"+this.name+"();",a=String2.slice(n=this,1,-1),e["_label_"+this.name]=function(){Package.forEach(n,function(e,t){e&&e.ancestorOf==Base.ancestorOf&&(e.toString=K(format("[%1.%2]",a,t)),e.prototype.toString==Base.prototype.toString&&(e.prototype.toString=K(format("[object %1.%2]",a,t))))})})},exports:"",imports:"",name:"",namespace:"",parent:null,addName:function(e,t){this[e]||(this[e]=t,this.exports+=","+e,this.namespace+=format("var %1=%2.%1;",e,this.name))},addPackage:function(e){this.addName(e,new Package(null,{name:e,parent:this}))},toString:function(){return format("[%1]",this.parent?String2.slice(this.parent,1,-1)+"."+this.name:this.name)}}),Abstract=Base.extend({constructor:function(){throw new TypeError("Abstract class cannot be instantiated.")}}),_moduleCount=0,Module=Abstract.extend(null,{namespace:"",extend:function(e,t){var n=this.base(),a=_moduleCount++;return n.namespace="",n.partial=this.partial,n.toString=K("[base2.Module["+a+"]]"),(Module[a]=n).implement(this),e&&n.implement(e),t&&(extend(n,t),n.init&&n.init()),n},forEach:function(n,a){_Function_forEach(Module,this.prototype,function(e,t){"function"==typeOf(e)&&n.call(a,this[t],t,this)},this)},implement:function(e){var t,n=this,a=n.toString().slice(1,-1);if("function"==typeof e){if(_ancestorOf(e,n)||this.base(e),_ancestorOf(Module,e)){for(var i in e)void 0===n[i]&&("function"==typeof(t=e[i])&&t.call&&e.prototype[i]&&(t=_staticModuleMethod(e,i)),n[i]=t);n.namespace+=e.namespace.replace(/base2\.Module\[\d+\]/g,a)}}else extend(n,e),_extendModule(n,e);return n},partial:function(){var n=Module.extend(),e=n.toString().slice(1,-1);return n.namespace=this.namespace.replace(/(\w+)=b[^\)]+\)/g,"$1="+e+".$1"),this.forEach(function(e,t){n[t]=partial(bind(e,n))}),n}});function _extendModule(e,t){var n,a=e.prototype,i=e.toString().slice(1,-1);for(n in t){var r=t[n],s="";"@"==n.charAt(0)?detect(n.slice(1))&&_extendModule(e,r):a[n]||(n==n.toUpperCase()?s="var "+n+"="+i+"."+n+";":"function"==typeof r&&r.call&&(s="var "+n+"=base2.lang.bind('"+n+"',"+i+");",a[n]=_moduleMethod(e,n),a[n]._module=e),-1==e.namespace.indexOf(s)&&(e.namespace+=s))}}function _staticModuleMethod(e,t){return function(){return e[t].apply(e,arguments)}}function _moduleMethod(t,n){return function(){var e=_slice.call(arguments);return e.unshift(this),t[n].apply(t,e)}}var Enumerable=Module.extend({every:function(n,a,i){var r=!0;try{forEach(n,function(e,t){if(!(r=a.call(i,e,t,n)))throw StopIteration})}catch(e){if(e!=StopIteration)throw e}return!!r},filter:function(a,i,r){var s=0;return this.reduce(a,function(e,t,n){return i.call(r,t,n,a)&&(e[s++]=t),e},[])},invoke:function(e,t){var n=_slice.call(arguments,2);return this.map(e,"function"==typeof t?function(e){return null==e?void 0:t.apply(e,n)}:function(e){return null==e?void 0:e[t].apply(e,n)})},map:function(n,a,i){var r=[],s=0;return forEach(n,function(e,t){r[s++]=a.call(i,e,t,n)}),r},pluck:function(e,t){return this.map(e,function(e){return null==e?void 0:e[t]})},reduce:function(n,a,i,r){var s=2<arguments.length;return forEach(n,function(e,t){s?i=a.call(r,i,e,t,n):(i=e,s=!0)}),i},some:function(e,t,n){return!this.every(e,not(t),n)}}),_HASH="#",Map=Base.extend({constructor:function(e){e&&this.merge(e)},clear:function(){for(var e in this)0==e.indexOf(_HASH)&&delete this[e]},copy:function(){base2.__prototyping=!0;var e,t=new this.constructor;for(e in delete base2.__prototyping,this)this[e]!==t[e]&&(t[e]=this[e]);return t},forEach:function(e,t){for(var n in this)0==n.indexOf(_HASH)&&e.call(t,this[n],n.slice(1),this)},get:function(e){return this[_HASH+e]},getKeys:function(){return this.map(II)},getValues:function(){return this.map(I)},has:function(e){return _HASH+e in this},merge:function(e){var t=flip(this.put);return forEach(arguments,function(e){forEach(e,t,this)},this),this},put:function(e,t){this[_HASH+e]=t},remove:function(e){delete this[_HASH+e]},size:function(){var e,t=0;for(e in this)0==e.indexOf(_HASH)&&t++;return t},union:function(e){return this.merge.apply(this.copy(),arguments)}});Map.implement(Enumerable),Map.prototype.filter=function(a,i){return this.reduce(function(e,t,n){return a.call(i,t,n,this)||e.remove(n),e},this.copy(),this)};var _KEYS="~",Collection=Map.extend({constructor:function(e){this[_KEYS]=new Array2,this.base(e)},add:function(e,t){assert(!this.has(e),"Duplicate key '"+e+"'."),this.put.apply(this,arguments)},clear:function(){this.base(),this[_KEYS].length=0},copy:function(){var e=this.base();return e[_KEYS]=this[_KEYS].copy(),e},forEach:function(e,t){for(var n=this[_KEYS],a=n.length,i=0;i<a;i++)e.call(t,this[_HASH+n[i]],n[i],this)},getAt:function(e){e=this[_KEYS].item(e);return void 0===e?void 0:this[_HASH+e]},getKeys:function(){return this[_KEYS].copy()},indexOf:function(e){return this[_KEYS].indexOf(String(e))},insertAt:function(e,t,n){assert(void 0!==this[_KEYS].item(e),"Index out of bounds."),assert(!this.has(t),"Duplicate key '"+t+"'."),this[_KEYS].insertAt(e,String(t)),this[_HASH+t]=null,this.put.apply(this,_slice.call(arguments,1))},item:function(e){return this["number"==typeof e?"getAt":"get"](e)},put:function(e,t){this.has(e)||this[_KEYS].push(String(e));var n=this.constructor;n.Item&&!instanceOf(t,n.Item)&&(t=n.create.apply(n,arguments)),this[_HASH+e]=t},putAt:function(e,t){arguments[0]=this[_KEYS].item(e),assert(void 0!==arguments[0],"Index out of bounds."),this.put.apply(this,arguments)},remove:function(e){this.has(e)&&(this[_KEYS].remove(String(e)),delete this[_HASH+e])},removeAt:function(e){var t=this[_KEYS].item(e);void 0!==t&&(this[_KEYS].removeAt(e),delete this[_HASH+t])},reverse:function(){return this[_KEYS].reverse(),this},size:function(){return this[_KEYS].length},slice:function(e,t){var n=this.copy();if(0<arguments.length){var a=this[_KEYS],i=a;n[_KEYS]=Array2(_slice.apply(a,arguments)),n[_KEYS].length&&(i=i.slice(0,e),1<arguments.length&&(i=i.concat(a.slice(t))));for(var r=0;r<i.length;r++)delete n[_HASH+i[r]]}return n},sort:function(n){return n?this[_KEYS].sort(bind(function(e,t){return n(this[_HASH+e],this[_HASH+t],e,t)},this)):this[_KEYS].sort(),this},toString:function(){return"("+(this[_KEYS]||"")+")"}},{Item:null,create:function(e,t){return this.Item?new this.Item(e,t):t},extend:function(e,t){e=this.base(e);return e.create=this.create,t&&extend(e,t),e.Item?"function"!=typeof e.Item&&(e.Item=(this.Item||Base).extend(e.Item)):e.Item=this.Item,e.init&&e.init(),e}}),_RG_BACK_REF=/\\(\d+)/g,_RG_ESCAPE_CHARS=/\\./g,_RG_ESCAPE_BRACKETS=/\(\?[:=!]|\[[^\]]+\]/g,_RG_BRACKETS=/\(/g,_RG_LOOKUP=/\$(\d+)/,_RG_LOOKUP_SIMPLE=/^\$\d+$/,RegGrp=Collection.extend({constructor:function(e,t){this.base(e),this.ignoreCase=!!t},ignoreCase:!1,exec:function(e,s){e+="";var o=this,l=this[_KEYS];return l.length?(s==RegGrp.IGNORE&&(s=0),e.replace(new RegExp(this,this.ignoreCase?"gi":"g"),function(e){for(var t,n=1,a=0;t=o[_HASH+l[a++]];){var i=n+t.length+1;if(arguments[n]){var r=null==s?t.replacement:s;switch(typeof r){case"function":return r.apply(o,_slice.call(arguments,n,i));case"number":return arguments[n+r];default:return r}}n=i}return e})):e},insertAt:function(e,t,n){return instanceOf(t,RegExp)&&(arguments[1]=t.source),base(this,arguments)},test:function(e){return this.exec(e)!=e},toString:function(){var n=1;return"("+this.map(function(e){var t=(e+"").replace(_RG_BACK_REF,function(e,t){return"\\"+(n+Number(t))});return n+=e.length+1,t}).join(")|(")+")"}},{IGNORE:"$0",init:function(){forEach("add,get,has,put,remove".split(","),function(e){_override(this,e,function(e){return instanceOf(e,RegExp)&&(arguments[0]=e.source),base(this,arguments)})},this.prototype)},Item:{constructor:function(e,t){null==t?t=RegGrp.IGNORE:null!=t.replacement?t=t.replacement:"function"!=typeof t&&(t=String(t)),"string"==typeof t&&_RG_LOOKUP.test(t)&&(t=_RG_LOOKUP_SIMPLE.test(t)?parseInt(t.slice(1)):(t=t.replace(/\\/g,"\\\\").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\$(\d+)/g,'"+(arguments[$1]||"")+"').replace(/(['"])\1\+(.*)\+\1\1$/,"$1"),new Function('return "'+t+'"'))),this.length=RegGrp.count(e),this.replacement=t,this.toString=K(e+"")},length:0,replacement:""},count:function(e){return match(e=(e+"").replace(_RG_ESCAPE_CHARS,"").replace(_RG_ESCAPE_BRACKETS,""),_RG_BRACKETS).length}}),lang={name:"lang",version:base2.version,exports:"assert,assertArity,assertType,base,bind,copy,extend,forEach,format,instanceOf,match,pcopy,rescape,trim,typeOf",namespace:""};function assert(e,t,n){if(!e)throw new(n||Error)(t||"Assertion failed.")}function assertArity(e,t,n){if(null==t&&(t=e.callee.length),e.length<t)throw new SyntaxError(n||"Not enough arguments.")}function assertType(e,t,n){if(t&&("function"==typeof t?!instanceOf(e,t):typeOf(e)!=t))throw new TypeError(n||"Invalid type.")}function copy(e){var t,n={};for(t in e)n[t]=e[t];return n}function pcopy(e){return _dummy.prototype=e,new _dummy}function _dummy(){}function base(e,t){return e.base.apply(e,t)}function extend(e,t){if(e&&t){2<arguments.length&&(i=t,(t={})[i]=arguments[2]);var n,a=global["function"==typeof t?"Function":"Object"].prototype;if(base2.__prototyping)for(var i,r,s=_HIDDEN.length;i=_HIDDEN[--s];)(r=t[i])!=a[i]&&(_BASE.test(r)?_override(e,i,r):e[i]=r);for(i in t)void 0===a[i]&&(r=t[i],"@"==i.charAt(0)?detect(i.slice(1))&&extend(e,r):(n=e[i])&&"function"==typeof r?r!=n&&(_BASE.test(r)?_override(e,i,r):(r.ancestor=n,e[i]=r)):e[i]=r)}return e}function _ancestorOf(e,t){for(;t;){if(!t.ancestor)return!1;if((t=t.ancestor)==e)return!0}return!1}function _override(e,n,a){var i=e[n],r=base2.__prototyping;function t(){var e=this.base;this.base=r?r[n]:i;var t=a.apply(this,arguments);return this.base=e,t}r&&i!=r[n]&&(r=null),t.method=a,t.ancestor=i,(e[n]=t).toString=K(a+"")}function forEach(e,t,n,a){if(null!=e){if(!a)if("function"==typeof e&&e.call)a=Function;else{if("function"==typeof e.forEach&&e.forEach!=arguments.callee)return void e.forEach(t,n);if("number"==typeof e.length)return void _Array_forEach(e,t,n)}_Function_forEach(a||Object,e,t,n)}}function _Array_forEach(e,t,n){var a,i=(e=null==e?global:e).length||0;if("string"==typeof e)for(a=0;a<i;a++)t.call(n,e.charAt(a),a,e);else for(a=0;a<i;a++)a in e&&t.call(n,e[a],a,e)}function _Function_forEach(e,t,n,a){function i(){this.i=1}i.prototype={i:1};var r,s=0;for(r in new i)s++;(_Function_forEach=1<s?function(e,t,n,a){var i,r={};for(i in t)r[i]||void 0!==e.prototype[i]||(r[i]=!0,n.call(a,t[i],i,t))}:function(e,t,n,a){for(var i in t)void 0===e.prototype[i]&&n.call(a,t[i],i,t)})(e,t,n,a)}function instanceOf(e,t){if("function"!=typeof t)throw new TypeError("Invalid 'instanceOf' operand.");if(null!=e){if(e.constructor==t)return 1;if(t.ancestorOf)return t.ancestorOf(e.constructor);if(e instanceof t)return 1;if(Base.ancestorOf!=t.ancestorOf){if(Base.ancestorOf==e.constructor.ancestorOf)return t==Object;switch(t){case Array:return"object"==typeof e&&e.join&&e.splice;case Function:return"function"==typeOf(e);case RegExp:return"string"==typeof e.constructor.$1;case Date:return e.getTimezoneOffset;case String:case Number:case Boolean:return typeOf(e)==typeof t.prototype.valueOf();case Object:return 1}}}}function typeOf(e){var t=typeof e;switch(t){case"object":return null==e?"null":void 0===e.constructor?_MSIE_NATIVE_FUNCTION.test(e)?"function":t:typeof e.constructor.prototype.valueOf();case"function":return"function"==typeof e.call?t:"object";default:return t}}"undefined"==typeof StopIteration&&(StopIteration=new Error("StopIteration")),forEach.csv=function(e,t,n){forEach(csv(e),t,n)},forEach.detect=function(n,a,i){forEach(n,function(e,t){"@"==t.charAt(0)?detect(t.slice(1))&&forEach(e,arguments.callee):a.call(i,e,t,n)})};var JavaScript={name:"JavaScript",version:base2.version,exports:"Array2,Date2,Function2,String2",namespace:"",bind:function(n){var e=global;return global=n,forEach.csv(this.exports,function(e){var t=e.slice(0,-1);extend(n[t],this[e]),this[e](n[t].prototype)},this),global=e,n}};function _createObject2(t,e,n,a){var i=Module.extend(),r=i.toString().slice(1,-1);forEach.csv(n,function(e){i[e]=unbind(t.prototype[e]),i.namespace+=format("var %1=%2.%1;",e,r)}),forEach(_slice.call(arguments,3),i.implement,i);function s(){return i(this.constructor==i?e.apply(null,arguments):arguments[0])}for(var o in s.prototype=i.prototype,i)"prototype"!=o&&t[o]&&(i[o]=t[o],delete i.prototype[o]),s[o]=i[o];return s.ancestor=Object,delete s.extend,s.namespace=s.namespace.replace(/(var (\w+)=)[^,;]+,([^\)]+)\)/g,"$1$3.$2"),s}1900<(new Date).getYear()&&(Date.prototype.getYear=function(){return this.getFullYear()-1900},Date.prototype.setYear=function(e){return this.setFullYear(e+1900)});var _testDate=new Date(Date.UTC(2006,1,20));_testDate.setUTCDate(15),0!=_testDate.getUTCHours()&&forEach.csv("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds",function(e){extend(Date.prototype,"setUTC"+e,function(){var e=base(this,arguments);return 57722401e3<=e&&this.setTime(e-=36e5),e})}),Function.prototype.prototype={},"$"=="".replace(/^/,K("$$"))&&extend(String.prototype,"replace",function(e,t){var n;return"function"==typeof t&&(n=t,t=function(){return String(n.apply(null,arguments)).split("$").join("$$")}),this.base(e,t)});var Array2=_createObject2(Array,Array,"concat,join,pop,push,reverse,shift,slice,sort,splice,unshift",Enumerable,{combine:function(e,a){return a=a||e,Array2.reduce(e,function(e,t,n){return e[t]=a[n],e},{})},contains:function(e,t){return-1!=Array2.indexOf(e,t)},copy:function(e){e=_slice.call(e);return e.swap||Array2(e),e},flatten:function(e){var n=0;return Array2.reduce(e,function(e,t){return Array2.like(t)?Array2.reduce(t,arguments.callee,e):e[n++]=t,e},[])},forEach:_Array_forEach,indexOf:function(e,t,n){var a=e.length;null==n?n=0:n<0&&(n=Math.max(0,a+n));for(var i=n;i<a;i++)if(e[i]===t)return i;return-1},insertAt:function(e,t,n){return Array2.splice(e,t,0,n),n},item:function(e,t){return t<0&&(t+=e.length),e[t]},lastIndexOf:function(e,t,n){var a=e.length;null==n?n=a-1:n<0&&(n=Math.max(0,a+n));for(var i=n;0<=i;i--)if(e[i]===t)return i;return-1},map:function(n,a,i){var r=[];return Array2.forEach(n,function(e,t){r[t]=a.call(i,e,t,n)}),r},remove:function(e,t){t=Array2.indexOf(e,t);-1!=t&&Array2.removeAt(e,t)},removeAt:function(e,t){Array2.splice(e,t,1)},swap:function(e,t,n){t<0&&(t+=e.length),n<0&&(n+=e.length);var a=e[t];return e[t]=e[n],e[n]=a,e}});Array2.reduce=Enumerable.reduce,Array2.like=function(e){return"object"==typeOf(e)&&"number"==typeof e.length},Enumerable["#implemented_by"].pop(),Enumerable["#implemented_by"].push(Array2);var _DATE_PATTERN=/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})(:(\d{2}))?|Z)?$/,_DATE_PARTS={FullYear:2,Month:4,Date:6,Hours:8,Minutes:10,Seconds:12,Milliseconds:14},_TIMEZONE_PARTS={Hectomicroseconds:15,UTC:16,Sign:17,Hours:18,Minutes:20},_TRIM_ZEROES=/(((00)?:0+)?:0+)?\.0+$/,_TRIM_TIMEZONE=/(T[0-9:.]+)$/,Date2=_createObject2(Date,function(e,t,n,a,i,r,s){switch(arguments.length){case 0:return new Date;case 1:return"number"==typeof e?new Date(e):Date2.parse(e);default:return new Date(e,t,2==arguments.length?1:n,a||0,i||0,r||0,s||0)}},"",{toISOString:function(n){var a,e="####-##-##T##:##:##.###";for(a in _DATE_PARTS)e=e.replace(/#+/,function(e){var t=n["getUTC"+a]();return"Month"==a&&t++,("000"+t).slice(-e.length)});return e.replace(_TRIM_ZEROES,"").replace(_TRIM_TIMEZONE,"$1Z")}});delete Date2.forEach,Date2.now=function(){return(new Date).valueOf()},Date2.parse=function(e,t){1<arguments.length&&assertType(t,"number","default date should be of type 'number'.");var n=match(e,_DATE_PATTERN);if(n.length){n[_DATE_PARTS.Month]&&n[_DATE_PARTS.Month]--,5<=n[_TIMEZONE_PARTS.Hectomicroseconds]&&n[_DATE_PARTS.Milliseconds]++;var a,i,r,s=new Date(t||0),o=n[_TIMEZONE_PARTS.UTC]||n[_TIMEZONE_PARTS.Hours]?"UTC":"";for(a in _DATE_PARTS){var l=n[_DATE_PARTS[a]];if(l&&(s["set"+o+a](l),s["get"+o+a]()!=n[_DATE_PARTS[a]]))return NaN}return n[_TIMEZONE_PARTS.Hours]&&(i=Number(n[_TIMEZONE_PARTS.Sign]+n[_TIMEZONE_PARTS.Hours]),r=Number(n[_TIMEZONE_PARTS.Sign]+(n[_TIMEZONE_PARTS.Minutes]||0)),s.setUTCMinutes(s.getUTCMinutes()+60*i+r)),s.valueOf()}return Date.parse(e)};var String2=_createObject2(String,function(e){return new String(0==arguments.length?"":e)},"charAt,charCodeAt,concat,indexOf,lastIndexOf,match,replace,search,slice,split,substr,substring,toLowerCase,toUpperCase",{csv:csv,format:format,rescape:rescape,trim:trim});function trim(e){return String(e).replace(_LTRIM,"").replace(_RTRIM,"")}function csv(e){return e?(e+"").split(/\s*,\s*/):[]}function format(e){var n=arguments,t=new RegExp("%([1-"+(arguments.length-1)+"])","g");return(e+"").replace(t,function(e,t){return n[t]})}function match(e,t){return(e+"").match(t)||[]}function rescape(e){return(e+"").replace(_RESCAPE,"\\$1")}delete String2.forEach;var Function2=_createObject2(Function,Function,"",{I:I,II:II,K:K,bind:bind,compose:compose,delegate:delegate,flip:flip,not:not,partial:partial,unbind:unbind});function I(e){return e}function II(e,t){return t}function K(e){return function(){return e}}function bind(e,t){var n="function"!=typeof e;if(2<arguments.length){var a=_slice.call(arguments,2);return function(){return(n?t[e]:e).apply(t,a.concat.apply(a,arguments))}}return function(){return(n?t[e]:e).apply(t,arguments)}}function compose(){var n=_slice.call(arguments);return function(){for(var e=n.length,t=n[--e].apply(this,arguments);e--;)t=n[e].call(this,t);return t}}function delegate(t,n){return function(){var e=_slice.call(arguments);return e.unshift(this),t.apply(n,e)}}function flip(e){return function(){return e.apply(this,Array2.swap(arguments,0,1))}}function not(e){return function(){return!e.apply(this,arguments)}}function partial(a){var i=_slice.call(arguments,1);return function(){for(var e=i.concat(),t=0,n=0;t<i.length&&n<arguments.length;)void 0===e[t]&&(e[t]=arguments[n++]),t++;for(;n<arguments.length;)e[t++]=arguments[n++];return Array2.contains(e,void 0)?(e.unshift(a),partial.apply(null,e)):a.apply(this,e)}}function unbind(t){return function(e){return t.apply(e,_slice.call(arguments,1))}}function detect(){var e,i,t,r=NaN,s=!!global.java;global.navigator&&(e=/MSIE[\d.]+/g,i=document.createElement("span"),t=navigator.userAgent.replace(/([a-z])[\s\/](\d)/gi,"$1$2"),r||(t=t.replace(e,"")),e.test(t)&&(t=t.match(e)[0]+" "+t.replace(e,"")),base2.userAgent=navigator.platform+" "+t.replace(/like \w+/gi,""),s&=navigator.javaEnabled());var o={};return(detect=function(e){if(null==o[e]){var t=!1,n=e,a="!"==n.charAt(0);if("("==(n=a?n.slice(1):n).charAt(0))try{t=new Function("element,jscript,java,global","return !!"+n)(i,r,s,global)}catch(e){}else t=new RegExp("("+n+")","i").test(base2.userAgent);o[e]=!!(a^t)}return o[e]})(arguments[0])}var base2=global.base2=new Package(this,base2),exports=this.exports,lang=new Package(this,lang);exports+=this.exports,JavaScript=new Package(this,JavaScript),eval(exports+this.exports),lang.base=base,lang.extend=extend},new function(_no_shrink_){var DOM=new base2.Package(this,{name:"DOM",version:"1.0.1",imports:"Function2",exports:"Interface,Binding,Node,Document,Element,AbstractView,HTMLDocument,HTMLElement,Selector,Traversal,CSSParser,XPathParser,NodeSelector,DocumentSelector,ElementSelector,StaticNodeList,Event,EventTarget,DocumentEvent,ViewCSS,CSSStyleDeclaration,ClassList",bind:function(e){if(e&&e.nodeType){var t=assignID(e);if(!DOM.bind[t]){switch(e.nodeType){case 1:("string"==typeof e.className?HTMLElement.bindings[e.tagName]||HTMLElement:Element).bind(e);break;case 9:(e.writeln?HTMLDocument:Document).bind(e);break;default:Node.bind(e)}DOM.bind[t]=!0}}return e},"@MSIE5.+win":{bind:function(e){return e&&e.writeln&&(e.nodeType=9),this.base(e)}}});eval(this.imports);var _MSIE=detect("MSIE"),_MSIE5=detect("MSIE5"),Interface=Module.extend(null,{forEach:function(n,a){forEach(this,function(e,t){"function"==typeOf(e)&&(this.prototype[t]||e._delegate)&&n.call(a,e,t,this)},this,Module)},implement:function(e){if("object"==typeof e)_createDelegates(this,e);else if(Interface.ancestorOf(e))for(var t in e)e[t]&&e[t]._delegate&&(this[t]=bind(t,e),this[t]._delegate=t);return this.base(e)}});function _createDelegates(e,t){var n,a=e.toString().slice(1,-1);for(n in t){var i=t[n];"@"==n.charAt(0)?_createDelegates(e,i):!e[n]&&"function"==typeof i&&i.call&&(i="abcdefghij".slice(0,i.length).split(""),e[(i=new Function(i.join(","),format("%2.base=%2.%1.ancestor;var m=%2.base?'base':'%1';return %2[m](%3)",n,i[0],i.slice(1))))._delegate=n]=i,e.namespace+="var "+n+"=base2.lang.bind('"+n+"',"+a+");")}}var Binding=Interface.extend(null,{extend:function(e,t){var n;t&&t.bind!=Function.bind&&(n=t.bind,delete t.bind);t=this.base(e,t);return t.bind=this.bind,n&&extend(t,"bind",n),t},bind:function(e){return extend(e,this.prototype)}}),Node=Binding.extend({"@!(element.compareDocumentPosition)":{compareDocumentPosition:function(e,t){if(Traversal.contains(e,t))return 20;if(Traversal.contains(t,e))return 10;e=_getSourceIndex(e),t=_getSourceIndex(t);return e<t?4:t<e?2:0}}},{"@Gecko":{bind:function(e){return extend(this.base(e),"removeEventListener",function(){var e=Array2.slice(arguments);e.unshift(this),EventTarget.removeEventListener.apply(EventTarget,e)})}}}),_getSourceIndex=document.documentElement.sourceIndex?function(e){return e.sourceIndex}:function(e){for(var t=0;e;)t=Traversal.getNodeIndex(e)+"."+t,e=e.parentNode;return t},Document=Node.extend(null,{bind:function(e){return extend(e,"createElement",function(e){return DOM.bind(this.base(e))}),AbstractView.bind(e.defaultView),e!=window.document&&new DOMContentLoadedEvent(e),this.base(e)},"@!(document.defaultView)":{bind:function(e){return e.defaultView=Traversal.getDefaultView(e),this.base(e)}}}),_ATTRIBUTES={class:"className",for:"htmlFor"},Element=Node.extend({"@MSIE.+win":{getAttribute:function(element,name){if(void 0===element.className)return this.base(element,name);var attribute=_getAttributeNode(element,name);if(attribute&&(attribute.specified||"value"==name))return"href"==name||"src"==name?(element.base=element.getAttribute.ancestor,element[element.base?"base":"getAttribute"](name,2)):"style"==name?element.style.cssText.toLowerCase():attribute.nodeValue;if("type"!=name||"INPUT"!=element.nodeName)return null;var outerHTML=element.outerHTML;with(outerHTML)outerHTML=slice(0,indexOf(">")+1);return match(outerHTML,/type="?([^\s">]*)"?/i)[1]||null},removeAttribute:function(e,t){void 0!==e.className&&(t=_ATTRIBUTES[t.toLowerCase()]||t),this.base(e,t)},setAttribute:function(e,t,n){var a;void 0===e.className?this.base(e,t,n):"style"==t?e.style.cssText=n:(n=String(n),(a=_getAttributeNode(e,t))?a.nodeValue=n:this.base(e,_ATTRIBUTES[t.toLowerCase()]||t,n))}},"@!(element.hasAttribute)":{hasAttribute:function(e,t){return void 0===e.className?this.base(e,t):null!=this.getAttribute(e,t)}}});detect("MSIE.+win")&&extend(Element.prototype,"cloneNode",function(e){e=this.base(e||!1);return e.base2ID=void 0,e});var _HTML_ATTRIBUTES="colSpan,rowSpan,vAlign,dateTime,accessKey,tabIndex,encType,maxLength,readOnly,longDesc";extend(_ATTRIBUTES,Array2.combine(_HTML_ATTRIBUTES.toLowerCase().split(","),_HTML_ATTRIBUTES.split(",")));var _getAttributeNode=document.documentElement.getAttributeNode?function(e,t){return e.getAttributeNode(t)}:function(e,t){return e.attributes[t]||e.attributes[_ATTRIBUTES[t.toLowerCase()]]},TEXT=detect("(element.textContent===undefined)")?"innerText":"textContent",Traversal=Module.extend({getDefaultView:function(e){return this.getDocument(e).defaultView},getNextElementSibling:function(e){for(;(e=e&&e.nextSibling)&&!this.isElement(e);)continue;return e},getNodeIndex:function(e){for(var t=0;e=e&&e.previousSibling;)t++;return t},getOwnerDocument:function(e){return e.ownerDocument},getPreviousElementSibling:function(e){for(;(e=e&&e.previousSibling)&&!this.isElement(e);)continue;return e},getTextContent:function(e,t){return e[t?"innerHTML":TEXT]},isEmpty:function(e){for(e=e.firstChild;e;){if(3==e.nodeType||this.isElement(e))return!1;e=e.nextSibling}return!0},setTextContent:function(e,t,n){return e[n?"innerHTML":TEXT]=t},"@!MSIE":{setTextContent:function(node,text,isHTML){with(node)for(;lastChild;)parentNode.removeChild(lastChild);return this.base(node,text,isHTML)}},"@MSIE":{getDefaultView:function(e){return(e.document||e).parentWindow},"@MSIE5":{getOwnerDocument:function(e){return e.ownerDocument||e.document}}}},{contains:function(e,t){for(e.nodeType;(t=t&&t.parentNode)&&e!=t;)continue;return!!t},getDocument:function(e){return this.isDocument(e)?e:e.ownerDocument||e.document},isDocument:function(e){return!(!e||!e.documentElement)},isElement:function(e){return!(!e||1!=e.nodeType)},"@(element.contains)":{contains:function(e,t){return e!=t&&(this.isDocument(e)?e==this.getOwnerDocument(t):e.contains(t))}},"@MSIE5":{isElement:function(e){return!(!e||1!=e.nodeType||"!"==e.nodeName)}}}),AbstractView=Binding.extend(),_CAPTURE_TYPE={},_TYPE_MAP={2:2,4:1},_CAPTURING_PHASE=1,_AT_TARGET=2,_BUBBLING_PHASE=3,_MOUSE_BUTTON=/^mouse(up|down)|click$/,_MOUSE_CLICK=/click$/,_BUBBLES="abort|error|select|change|resize|scroll|",_CANCELABLE="(dbl)?click|mouse(down|up|over|move|out|wheel)|key(down|up)|submit|reset",_W3C_EVENT_TYPE,_CAPTURE_TYPE,_BUBBLES=new RegExp("^("+_BUBBLES+_CANCELABLE+")$"),_CANCELABLE=new RegExp("^("+_CANCELABLE+")$");_MSIE&&(_W3C_EVENT_TYPE={focusin:"focus",focusout:"blur"},_CAPTURE_TYPE={focus:"focusin",blur:"focusout"});var _CAN_DELEGATE=/^(blur|submit|reset|change|select)$|^(mouse|key|focus)|click$/,Event=Binding.extend({"@!(document.createEvent)":{initEvent:function(e,t,n,a){e.type=String(t),e.bubbles=!!n,e.cancelable=!!a},preventDefault:function(e){!1!==e.cancelable&&(e.returnValue=!1)},stopPropagation:function(e){e.cancelBubble=!0},"@MSIE":{preventDefault:function(e){var t,n;this.base(e),"mousedown"==e.type&&(t="onbeforedeactivate",(n=Traversal.getDocument(e.target)).attachEvent(t,function(e){e.returnValue=!1,n.detachEvent(t,arguments.callee)}))}}}},{CAPTURING_PHASE:_CAPTURING_PHASE,AT_TARGET:_AT_TARGET,BUBBLING_PHASE:_BUBBLING_PHASE,"@!(document.createEvent)":{"@MSIE":{bind:function(e){var t=e.type;return e.timeStamp||(e.bubbles=_BUBBLES.test(t),e.cancelable=_CANCELABLE.test(t),e.timeStamp=(new Date).valueOf()),e.relatedTarget=e[(e.target==e.fromElement?"to":"from")+"Element"],this.base(e)}}},cloneEvent:function(e){var t=copy(e);return t.stopPropagation=function(){e.stopPropagation()},t.preventDefault=function(){e.preventDefault()},t},"@MSIE":{cloneEvent:copy}}),EventDispatcher=Base.extend({constructor:function(e){this.state=e,this.events=e.events},dispatch:function(e,t,n){t.eventPhase=n;var a=this.events[t.type][n];if(a)for(var i=e.length;i--&&!t.cancelBubble;){var r=e[i],s=a[r.base2ID];if(s)for(var o in s=copy(s),t.currentTarget=r,t.eventPhase=r==t.target?_AT_TARGET:n,s){o=s[o];"function"==typeof o?o.call(r,t):o.handleEvent(t)}}},handleEvent:function(e,t){Event.bind(e);var n=e.type,a=_W3C_EVENT_TYPE[n];if(a&&(n=(e=copy(e)).type=a),this.events[n]){_MOUSE_BUTTON.test(n)&&(n=_MOUSE_CLICK.test(n)?this.state._button:e.button,n=_TYPE_MAP[n]||0,e.button!=n&&((e=copy(e)).button=n));for(var i=e.target,r=[],s=0;i;)i=(r[s++]=i).parentNode;this.dispatch(r,e,_CAPTURING_PHASE),e.cancelBubble||(e.bubbles||(r.length=1),r.reverse(),this.dispatch(r,e,_BUBBLING_PHASE))}return!1!==e.returnValue},"@MSIE.+win":{handleEvent:function(e){return"scroll"==e.type?(setTimeout(bind(this.base,this,copy(e),!0),0),!0):this.base(e)},"@MSIE5":{dispatch:function(e,t,n){n!=_CAPTURING_PHASE||Array2.item(e,-1).documentElement||e.push(e[0].document),this.base(e,t,n)}}}}),_wrappedListeners={},EventTarget=Interface.extend({"@!(element.addEventListener)":{addEventListener:function(e,t,n,a){var i=DocumentState.getInstance(e),r=assignID(e),s=assignID(n),o=a?_CAPTURING_PHASE:_BUBBLING_PHASE,i=i.registerEvent(t,e),e=(e=i[o])||(i[o]={});a&&(t=_CAPTURE_TYPE[t]||t),(e[r]||(e[r]={}))[s]=n},dispatchEvent:function(e,t){return t.target=e,DocumentState.getInstance(e).handleEvent(t)},removeEventListener:function(e,t,n,a){t=DocumentState.getInstance(e).events[t];t&&(!(a=t[a?_CAPTURING_PHASE:_BUBBLING_PHASE])||(e=a[e.base2ID])&&delete e[n.base2ID])}},"@(element.addEventListener)":{"@Gecko":{addEventListener:function(t,e,n,a){var i;"mousewheel"==e&&(e="DOMMouseScroll",i=n,n=_wrappedListeners[assignID(n)]=function(e){(e=Event.cloneEvent(e)).type="mousewheel",e.wheelDelta=40*-e.detail||0,_handleEvent(t,i,e)}),this.base(t,e,n,a)}},"@webkit[1-4]|KHTML[34]":{addEventListener:function(n,e,t,a){var i;_MOUSE_BUTTON.test(e)?(i=t,t=_wrappedListeners[assignID(t)]=function(e){var t=_TYPE_MAP[e.button]||0;e.button!=t&&((e=Event.cloneEvent(e)).button=t),_handleEvent(n,i,e)}):"object"==typeof t&&(t=_wrappedListeners[assignID(t)]=bind("handleEvent",t)),this.base(n,e,t,a)}},"@Linux|Mac|opera":{addEventListener:function(i,e,t,n){var r;"keydown"==e&&(r=t,t=_wrappedListeners[assignID(t)]=function(t){var n=0,a=!1;function e(e){a&&e.preventDefault(),(e==t||1<n)&&_handleEvent(i,r,t),n++}extend(t,"preventDefault",function(){this.base(),a=!0}),e(t),i.addEventListener("keyup",function(){i.removeEventListener("keypress",e,!0),i.removeEventListener("keyup",arguments.callee,!0)},!0),i.addEventListener("keypress",e,!0)}),this.base(i,e,t,n)}},removeEventListener:function(e,t,n,a){this.base(e,t,_wrappedListeners[n.base2ID]||n,a)}}});function _handleEvent(e,t,n){"function"==typeof t?t.call(e,n):t.handleEvent(n)}detect("Gecko")&&(EventTarget.removeEventListener._delegate="removeEventListener",delete EventTarget.prototype.removeEventListener);var DocumentEvent=Interface.extend({"@!(document.createEvent)":{createEvent:function(e,t){var n=e.createEventObject?e.createEventObject():{};return n.bubbles=!1,n.cancelable=!1,n.eventPhase=0,n.target=e,n.currentTarget=null,n.relatedTarget=null,n.timeStamp=(new Date).valueOf(),Event(n)}},"@(document.createEvent)":{"@!(document.createEvent('Events'))":{createEvent:function(e,t){return this.base(e,"Events"==t?"UIEvents":t)}}}}),DOMContentLoadedEvent=Base.extend({constructor:function(t){var e=!1;this.fire=function(){e||(e=!0,setTimeout(function(){var e=DocumentEvent.createEvent(t,"Events");Event.initEvent(e,"DOMContentLoaded",!0,!1),EventTarget.dispatchEvent(t,e)},1))},EventTarget.addEventListener(t,"DOMContentLoaded",function(){e=!0},!1),this.listen(t)},listen:Undefined,"@!Gecko20([^0]|0[3-9])|Webkit52[5-9]|Webkit5[3-9]|Webkit[6-9]|Opera[19]|MSIE.+mac":{listen:function(e){EventTarget.addEventListener(Traversal.getDefaultView(e),"load",this.fire,!1)},"@MSIE.+win":{listen:function(t){try{t.body.doScroll("left"),this.__constructing||this.fire()}catch(e){setTimeout(bind(this.listen,this,t),10)}}},"@KHTML":{listen:function(e){/loaded|complete/.test(e.readyState)?this.__constructing||this.fire():setTimeout(bind(this.listen,this,e),10)}}}});Document.implement(DocumentEvent),Document.implement(EventTarget),Element.implement(EventTarget);var _PIXEL=/^\d+(px)?$/i,_METRICS=/(width|height|top|bottom|left|right|fontSize)$/,_COLOR=/^(color|backgroundColor)$/,_RGB_BLACK="rgb(0, 0, 0)",_BLACK={black:1,"#000":1,"#000000":1},ViewCSS=Interface.extend({"@!(document.defaultView.getComputedStyle)":{"@MSIE":{getComputedStyle:function(e,t,n){var a,i=t.currentStyle,r={};for(a in i)_METRICS.test(a)||_COLOR.test(a)?r[a]=this.getComputedPropertyValue(e,t,a):0!=a.indexOf("ruby")&&(r[a]=i[a]);return r}}},getComputedStyle:function(e,t,n){return _CSSStyleDeclaration_ReadOnly.bind(this.base(e,t,n))}},{getComputedPropertyValue:function(e,t,n){return CSSStyleDeclaration.getPropertyValue(this.getComputedStyle(e,t,null),n)},"@MSIE":{getComputedPropertyValue:function(e,t,n){n=this.toCamelCase(n);var a=t.currentStyle[n];if(_METRICS.test(n))return _MSIE_getPixelValue(t,a)+"px";if(_MSIE5||!_COLOR.test(n))return a;n=_MSIE_getColorValue(t,"color"==n?"ForeColor":"BackColor");return n!=_RGB_BLACK||_BLACK[a]?n:a}},toCamelCase:function(e){return e.replace(/\-([a-z])/g,flip(String2.toUpperCase))}});function _MSIE_getPixelValue(e,t){if(_PIXEL.test(t))return parseInt(t);var n=e.style.left,a=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft,e.style.left=n,e.runtimeStyle.left=a,t}function _MSIE_getColorValue(e,t){var n;e.createTextRange?n=e.createTextRange():(n=e.document.body.createTextRange()).moveToElementText(e);try{var a=n.queryCommandValue("type")}catch(e){a=0}return format("rgb(%1, %2, %3)",255&a,(65280&a)>>8,(16711680&a)>>16)}var _CSSStyleDeclaration_ReadOnly=Binding.extend({getPropertyValue:function(e,t){return this.base(e,_CSSPropertyNameMap[t]||t)},"@MSIE.+win":{getPropertyValue:function(e,t){return"float"==t?e.styleFloat:e[ViewCSS.toCamelCase(t)]}}}),CSSStyleDeclaration=_CSSStyleDeclaration_ReadOnly.extend({setProperty:function(e,t,n,a){return this.base(e,_CSSPropertyNameMap[t]||t,n,a)},"@MSIE.+win":{setProperty:function(e,t,n,a){"opacity"==t?(e.opacity=n*=100,e.zoom=1,e.filter="Alpha(opacity="+n+")"):"important"==a?e.cssText+=format(";%1:%2!important;",t,n):e.setAttribute(ViewCSS.toCamelCase(t),n)}}},{"@MSIE":{bind:function(e){return e.getPropertyValue=this.prototype.getPropertyValue,e.setProperty=this.prototype.setProperty,e}}}),_CSSPropertyNameMap=new Base({"@Gecko":{opacity:"-moz-opacity"},"@KHTML":{opacity:"-khtml-opacity"}});with(CSSStyleDeclaration.prototype)getPropertyValue.toString=setProperty.toString=K("[base2]");AbstractView.implement(ViewCSS);var NodeSelector=Interface.extend({"@(element.querySelector)":{querySelector:function(e,t){try{var n=this.base(e,trim(t));if(n)return n}catch(e){}return new Selector(t).exec(e,1)},querySelectorAll:function(e,t){try{var n=this.base(e,trim(t));if(n)return new StaticNodeList(n)}catch(e){}return new Selector(t).exec(e)}},"@!(element.querySelector)":{querySelector:function(e,t){return new Selector(t).exec(e,1)},querySelectorAll:function(e,t){return new Selector(t).exec(e)}}});extend(NodeSelector.prototype,{querySelector:function(e){return DOM.bind(this.base(e))},querySelectorAll:function(e){return extend(this.base(e),"item",function(e){return DOM.bind(this.base(e))})}});var DocumentSelector=NodeSelector.extend(),ElementSelector=NodeSelector.extend({"@!(element.matchesSelector)":{matchesSelector:function(e,t){return new Selector(t).test(e)}}}),_CSS_ESCAPE=/'(\\.|[^'\\])*'|"(\\.|[^"\\])*"/g,_CSS_IMPLIED_ASTERISK=/([\s>+~,]|[^(]\+|^)([#.:\[])/g,_CSS_IMPLIED_SPACE=/(^|,)([^\s>+~])/g,_CSS_WHITESPACE=/\s*([\s>+~,]|^|$)\s*/g,_CSS_WILD_CARD=/\s\*\s/g,_CSS_UNESCAPE=/\x01(\d+)/g,_QUOTE=/'/g,CSSParser=RegGrp.extend({constructor:function(e){this.base(e),this.cache={},this.sorter=new RegGrp,this.sorter.add(/:not\([^)]*\)/,RegGrp.IGNORE),this.sorter.add(/([ >](\*|[\w-]+))([^: >+~]*)(:\w+-child(\([^)]+\))?)([^: >+~]*)/,"$1$3$6$4")},cache:null,ignoreCase:!0,escape:function(e,t){var n=this._strings=[];return e=this.optimise(this.format(String(e).replace(_CSS_ESCAPE,function(e){return""+n.push(e.slice(1,-1).replace(_QUOTE,"\\'"))}))),e=t?e.replace(/^ \*?/,""):e},format:function(e){return e.replace(_CSS_WHITESPACE,"$1").replace(_CSS_IMPLIED_SPACE,"$1 $2").replace(_CSS_IMPLIED_ASTERISK,"$1*$2")},optimise:function(e){return this.sorter.exec(e.replace(_CSS_WILD_CARD,">* "))},parse:function(e,t){return this.cache[e]||(this.cache[e]=this.unescape(this.exec(this.escape(e,t))))},unescape:function(e){var n=this._strings;return e.replace(_CSS_UNESCAPE,function(e,t){return n[t-1]})}});function _nthChild(e,t,n,a,i,r,s,o){a=/last/i.test(e)?a+"+1-":"",isNaN(t)?"even"==t?t="2n":"odd"==t&&(t="2n+1"):t="0n+"+t;var l=(t=t.split("n"))[0]?"-"==t[0]?-1:parseInt(t[0]):1,e=parseInt(t[1])||0,t=l<0;t&&1==(l=-l)&&e++;o=format(0==l?"%3%7"+(a+e):"(%4%3-%2)%6%1%70%5%4%3>=%2",l,e,n,a,r,s,o);return o=t?i+"("+o+")":o}var XPathParser=CSSParser.extend({constructor:function(){this.base(XPathParser.build()),this.sorter.putAt(1,"$1$4$3$6")},escape:function(e,t){return this.base(e,t).replace(/,/g,"")},unescape:function(e){return this.base(e.replace(/\[self::\*\]/g,"").replace(/(^|\x02)\//g,"$1./").replace(/\x02/g," | ")).replace(/'[^'\\]*\\'(\\.|[^'\\])*'/g,function(e){return"concat("+e.split("\\'").join("',\"'\",'")+")"})},"@opera(7|8|9\\.[1-4])":{unescape:function(e){return this.base(e.replace(/last\(\)/g,"count(preceding-sibling::*)+count(following-sibling::*)+1"))}}},{build:function(){return this.values.attributes[""]="[@$1]",forEach(this.types,function(e,t){forEach(this.values[t],e,this.rules)},this),this.build=K(this.rules),this.rules},optimised:{pseudoClasses:{"first-child":"[1]","last-child":"[last()]","only-child":"[last()=1]"}},rules:extend({},{"@!KHTML|opera":{"(^|\\x02) (\\*|[\\w-]+)#([\\w-]+)":"$1id('$3')[self::$2]"},"@!KHTML":{"([ >])(\\*|[\\w-]+):([\\w-]+-child(\\(([^)]+)\\))?)":function(e,t,n,a,i,r){t=" "==t?"//*":"/*";return/^nth/i.test(a)?t+=_xpath_nthChild(a,r,"position()"):t+=XPathParser.optimised.pseudoClasses[a],t+"[self::"+n+"]"}}}),types:{identifiers:function(e,t){this[rescape(t)+"([\\w-]+)"]=e},combinators:function(e,t){this[rescape(t)+"(\\*|[\\w-]+)"]=e},attributes:function(e,t){this["\\[\\s*([\\w-]+)\\s*"+rescape(t)+"\\s*([^\\]\\s]*)\\s*\\]"]=e},pseudoClasses:function(e,t){this[":"+t.replace(/\(\)$/,"\\(([^)]+)\\)")]=e}},values:{identifiers:{"#":"[@id='$1'][1]",".":"[contains(concat(' ',@class,' '),' $1 ')]"},combinators:{" ":"/descendant::$1",">":"/child::$1","+":"/following-sibling::*[1][self::$1]","~":"/following-sibling::$1"},attributes:{"*=":"[contains(@$1,'$2')]","^=":"[starts-with(@$1,'$2')]","$=":"[substring(@$1,string-length(@$1)-string-length('$2')+1)='$2']","~=":"[contains(concat(' ',@$1,' '),' $2 ')]","|=":"[contains(concat('-',@$1,'-'),'-$2-')]","!=":"[not(@$1='$2')]","=":"[@$1='$2']"},pseudoClasses:{link:"[false]",visited:"[false]",empty:"[not(child::*) and not(text())]","first-child":"[not(preceding-sibling::*)]","last-child":"[not(following-sibling::*)]","not()":_xpath_not,"nth-child()":_xpath_nthChild,"nth-last-child()":_xpath_nthChild,"only-child":"[not(preceding-sibling::*) and not(following-sibling::*)]",root:"[not(parent::*)]"}},"@opera(7|8|9\\.[1-4])":{build:function(){return this.optimised.pseudoClasses["last-child"]=this.values.pseudoClasses["last-child"],this.optimised.pseudoClasses["only-child"]=this.values.pseudoClasses["only-child"],this.base()}}}),_notParser;function _xpath_not(e,t){return"[not("+(_notParser=_notParser||new XPathParser).exec(trim(t)).replace(/\[1\]/g,"").replace(/^(\*|[\w-]+)/,"[self::$1]").replace(/\]\[/g," and ").slice(1,-1)+")]"}function _xpath_nthChild(e,t,n){return"["+_nthChild(e,t,n||"count(preceding-sibling::*)+1","last()","not"," and "," mod ","=")+"]"}var Selector=Base.extend({constructor:function(e){this.toString=K(trim(e))},exec:function(e,t,n){return Selector.parse(this,n)(e,t)},isSimple:function(){return _parser.exec||(_parser=new CSSParser(_parser)),!_COMBINATOR.test(trim(_parser.escape(this)))},test:function(e){if(this.isSimple())return!!Selector.parse(this,!0)(e,1);e.setAttribute("b2-test",!0);var t=new Selector(this+"[b2-test]").exec(Traversal.getOwnerDocument(e),1);return e.removeAttribute("b2-test"),t==e},toXPath:function(e){return Selector.toXPath(this,e)},"@(XPathResult)":{exec:function(e,t,n){if(_NOT_XPATH.test(this))return this.base(e,t,n);var a=1==t?9:7,a=Traversal.getDocument(e).evaluate(this.toXPath(n),e,null,a,null);return 1==t?a.singleNodeValue:a}},"@MSIE":{exec:function(e,t,n){return void 0===e.selectNodes||_NOT_XPATH.test(this)?this.base(e,t,n):e[single?"selectSingleNode":"selectNodes"](this.toXPath(n))}},"@(true)":{exec:function(e,t,n){try{var a=this.base(e||document,t,n)}catch(e){throw new SyntaxError(format("'%1' is not a valid CSS selector.",this))}return 1==t?a:new StaticNodeList(a)}}},{toXPath:function(e,t){return(_xpathParser=_xpathParser||new XPathParser).parse(e,t)}}),_COMBINATOR=/[^,]\s|[+>~]/,_NOT_XPATH=":(checked|disabled|enabled|contains|hover|active|focus)|^(#[\\w-]+\\s*)?\\w+$";detect("KHTML")&&(detect("WebKit5")?_NOT_XPATH+="|nth\\-|,":_NOT_XPATH="."),_NOT_XPATH=new RegExp(_NOT_XPATH),Selector.operators={"=":"%1=='%2'","~=":/(^| )%1( |$)/,"|=":/^%1(-|$)/,"^=":/^%1/,"$=":/%1$/,"*=":/%1/},Selector.operators[""]="%1!=null",Selector.pseudoClasses={checked:"e%1.checked",contains:"e%1[TEXT].indexOf('%2')!=-1",disabled:"e%1.disabled",empty:"Traversal.isEmpty(e%1)",enabled:"e%1.disabled===false","first-child":"!Traversal.getPreviousElementSibling(e%1)","last-child":"!Traversal.getNextElementSibling(e%1)","only-child":"!Traversal.getPreviousElementSibling(e%1)&&!Traversal.getNextElementSibling(e%1)",root:"e%1==Traversal.getDocument(e%1).documentElement",target:"e%1.id&&e%1.id==location.hash.slice(1)",hover:"DocumentState.getInstance(d).isHover(e%1)",active:"DocumentState.getInstance(d).isActive(e%1)",focus:"DocumentState.getInstance(d).hasFocus(e%1)",link:"false",visited:"false"};var _INDEXED=void 0!==document.documentElement.sourceIndex,_VAR="var p%2=0,i%2,e%3,n%2=e%1.",_ID=_INDEXED?"e%1.sourceIndex":"assignID(e%1)",_TEST="var g="+_ID+";if(!p[g]){p[g]=1;",_STORE="r[k++]=e%1;if(s==1)return e%1;if(k===s){_query.state=[%2];_query.complete=%3;return r;",_FN="var _query=function(e0,s%1){_indexed++;var r=[],p={},p0=0,reg=[%4],d=Traversal.getDocument(e0),c=d.writeln?'toUpperCase':'toString',k=0;",_xpathParser,_reg,_index,_wild,_list,_group,_listAll,_duplicate,_cache={},_simple={};function sum(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}var _parser={"^(\\*|[\\w-]+)":function(e,t){return"*"==t?"":format("if(e0.nodeName=='%1'[c]()){",t)},"^ \\*:root":function(e){_wild=!1;return format("e%2=d.documentElement;if(Traversal.contains(e%1,e%2)){",_index++,_index)}," (\\*|[\\w-]+)#([\\w-]+)":function(e,t,n){_wild=!1;var a="var e%2=_byId(d,'%4');if(e%2&&";return"*"!=t&&(a+="e%2.nodeName=='%3'[c]()&&"),a+="Traversal.contains(e%1,e%2)){",_list[_group]&&(a+=format("i%1=n%1.length;",sum(_list))),format(a,_index++,_index,t,n)}," (\\*|[\\w-]+)":function(e,t){_duplicate++,_wild="*"==t;var n=format(_VAR,_index++,"%2",_index);return n+=_wild&&_MSIE5?"all":"getElementsByTagName('%3')",n+=";for(i%2=a%2||0;(e%1=n%2[i%2]);i%2++){",_list[_group]++,format(n,_index,sum(_list),t)},">(\\*|[\\w-]+)":function(e,t){var n=_MSIE&&_index;_wild="*"==t;var a=_VAR+(n?"children":"childNodes"),a=format(a,_index++,"%2",_index);return!_wild&&_MSIE&&n&&(a+=".tags('%3')"),a+=";for(i%2=a%2||0;(e%1=n%2[i%2]);i%2++){",_wild?(a+="if(e%1.nodeType==1){",_wild=_MSIE5):_MSIE&&n||(a+="if(e%1.nodeName=='%3'[c]()){"),_list[_group]++,format(a,_index,sum(_list),t)},"\\+(\\*|[\\w-]+)":function(e,t){var n="";return _wild&&_MSIE&&(n+="if(e%1.nodeName!='!'){"),_wild=!1,n+="e%1=Traversal.getNextElementSibling(e%1);if(e%1","*"!=t&&(n+="&&e%1.nodeName=='%2'[c]()"),n+="){",format(n,_index,t)},"~(\\*|[\\w-]+)":function(e,t){var n="";return _wild&&_MSIE&&(n+="if(e%1.nodeName!='!'){"),_wild=!1,_duplicate=2,n+="while(e%1=e%1.nextSibling){if(e%1.b2_adjacent==_indexed)break;if(","*"==t?(n+="e%1.nodeType==1",_MSIE5&&(n+="&&e%1.nodeName!='!'")):n+="e%1.nodeName=='%2'[c]()",n+="){e%1.b2_adjacent=_indexed;",format(n,_index,t)},"#([\\w-]+)":function(e,t){_wild=!1;var n="if(e%1.id=='%2'){";return _list[_group]&&(n+=format("i%1=n%1.length;",sum(_list))),format(n,_index,t)},"\\.([\\w-]+)":function(e,t){return _wild=!1,_reg.push(new RegExp("(^|\\s)"+rescape(t)+"(\\s|$)")),format("if(e%1.className&&reg[%2].test(e%1.className)){",_index,_reg.length-1)},":not\\((\\*|[\\w-]+)?([^)]*)\\)":function(e,t,n){t=t&&"*"!=t?format("if(e%1.nodeName=='%2'[c]()){",_index,t):"";return"if(!"+(t+=_parser.exec(n)).slice(2,-1).replace(/\)\{if\(/g,"&&")+"){"},":nth(-last)?-child\\(([^)]+)\\)":function(e,t,n){_wild=!1,t=format("e%1.parentNode.b2_length",_index);return format("if(p%1!==e%1.parentNode)p%1=_register(e%1.parentNode);var i=e%1[p%1.b2_lookup];if(p%1.b2_lookup!='b2_index')i++;if(",_index)+_nthChild(e,n,"i",t,"!","&&","% ","==")+"){"},":([\\w-]+)(\\(([^)]+)\\))?":function(e,t,n,a){return"if("+format(Selector.pseudoClasses[t]||"throw",_index,a||"")+"){"},"\\[\\s*([\\w-]+)\\s*([^=]?=)?\\s*([^\\]\\s]*)\\s*\\]":function(e,t,n,a){a=trim(a),i=_MSIE?"Element.getAttribute(e%1,'%2')":"e%1.getAttribute('%2')";var i=format(i,_index,t),n=Selector.operators[n||""];return instanceOf(n,RegExp)&&(_reg.push(new RegExp(format(n.source,rescape(_parser.unescape(a))))),n="reg[%2].test(%1)",a=_reg.length-1),"if("+format(n,i,a)+"){"}};!function(_no_shrink_){var _byId=detect("MSIE[5-7]")?function(e,t){var n=e.all[t]||null;if(!n||n.id==t)return n;for(var a=0;a<n.length;a++)if(n[a].id==t)return n[a];return null}:function(e,t){return e.getElementById(t)},_indexed=1;function _register(e){if(e.rows)e.b2_length=e.rows.length,e.b2_lookup="rowIndex";else if(e.cells)e.b2_length=e.cells.length,e.b2_lookup="cellIndex";else if(e.b2_indexed!=_indexed){for(var t=0,n=e.firstChild;n;)1==n.nodeType&&"!"!=n.nodeName&&(n.b2_index=++t),n=n.nextSibling;e.b2_length=t,e.b2_lookup="b2_index"}return e.b2_indexed=_indexed,e}Selector.parse=function(selector,simple){var cache=simple?_simple:_cache;if(!cache[selector]){_parser.exec||(_parser=new CSSParser(_parser)),_reg=[],_list=[];var fn="",selectors=_parser.escape(selector,simple).split(",");for(_group=0;_group<selectors.length;_group++){_wild=_index=_list[_group]=0,_duplicate=1<selectors.length?2:0;var block=_parser.exec(selectors[_group])||"throw;";_wild&&_MSIE&&(block+=format("if(e%1.tagName!='!'){",_index));var store=1<_duplicate?_TEST:"";block+=format(store+_STORE,_index,"%2"),block+=Array(match(block,/\{/g).length+1).join("}"),fn+=block}fn=_parser.unescape(fn),1<selectors.length&&(fn+="r.unsorted=1;");for(var args="",state=[],total=sum(_list),i=1;i<=total;i++)args+=",a"+i,state.push("i"+i+"?(i"+i+"-1):0");if(total)for(var complete=[],k=0,i=0;i<_group;i++)k+=_list[i],_list[i]&&complete.push(format("n%1&&i%1==n%1.length",k));fn+="_query.state=[%2];_query.complete=%3;return s==1?null:r}",eval(format(_FN+fn,args,state.join(","),!total||complete.join("&&"),_reg)),cache[selector]=_query}return cache[selector]}}();var StaticNodeList=Base.extend({constructor:function(t){t=t||[],this.length=t.length,this.item=function(e){return e<0&&(e+=this.length),t[e]},t.unsorted&&t.sort(_SORTER)},length:0,forEach:function(e,t){for(var n=0;n<this.length;n++)e.call(t,this.item(n),n,this)},item:Undefined,not:function(e,t){return this.filter(not(e),t)},slice:function(e,t){return new StaticNodeList(this.map(I).slice(e,t))},"@(XPathResult)":{constructor:function(t){t&&t.snapshotItem?(this.length=t.snapshotLength,this.item=function(e){return e<0&&(e+=this.length),t.snapshotItem(e)}):this.base(t)}}});StaticNodeList.implement(Enumerable);var _matchesSelector=function(e,t){return"function"!=typeof e&&(e=bind("test",new Selector(e))),this.base(e,t)};StaticNodeList.implement({every:_matchesSelector,filter:_matchesSelector,not:_matchesSelector,some:_matchesSelector}),StaticNodeList.implement({filter:function(e,t){return new StaticNodeList(this.base(e,t))}});var _SORTER=_INDEXED?function(e,t){return e.sourceIndex-t.sourceIndex}:function(e,t){return(2&Node.compareDocumentPosition(e,t))-1};Document.implement(DocumentSelector),Element.implement(ElementSelector);var HTMLDocument=Document.extend(null,{bind:function(e){return DocumentState.createState(e),this.base(e)}}),HTMLElement=Element.extend(null,{bindings:{},tags:"*",bind:function(e){return e.classList||(e.classList=new _ElementClassList(e)),e.ownerDocument||(e.ownerDocument=Traversal.getOwnerDocument(e)),this.base(e)},extend:function(){var t=base(this,arguments);return forEach.csv(t.tags,function(e){HTMLElement.bindings[e]=t}),t}});HTMLElement.extend(null,{tags:"APPLET,EMBED",bind:I});var ClassList=Module.extend({add:function(e,t){this.has(e,t)||(e.className+=(e.className?" ":"")+t)},has:function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},remove:function(e,t){t=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=trim(e.className.replace(t,"$2"))},toggle:function(e,t){this[this.has(e,t)?"remove":"add"](e,t)}});function _ElementClassList(t){this.add=function(e){ClassList.add(t,e)},this.has=function(e){return ClassList.has(t,e)},this.remove=function(e){ClassList.remove(t,e)}}_ElementClassList.prototype.toggle=function(e){this[this.has(e)?"remove":"add"](e)};var DocumentState=Base.extend({constructor:function(e){this.document=e,this.events={},this._hoverElement=e.documentElement,this.isBound=function(){return!!DOM.bind[e.base2ID]},forEach(this,function(e,t,n){/^on((DOM)?\w+|[a-z]+)$/.test(t)&&n.registerEvent(t.slice(2))})},includes:function(e,t){return t&&(e==t||Traversal.contains(e,t))},hasFocus:function(e){return e==this._focusElement},isActive:function(e){return this.includes(e,this._activeElement)},isHover:function(e){return this.includes(e,this._hoverElement)},handleEvent:function(e){return this["on"+e.type](e)},onblur:function(e){delete this._focusElement},onmouseover:function(e){this._hoverElement=e.target},onmouseout:function(e){delete this._hoverElement},onmousedown:function(e){this._activeElement=e.target},onfocus:function(e){this._focusElement=e.target},onmouseup:function(e){delete this._activeElement},registerEvent:function(e){this.document.addEventListener(e,this,!0),this.events[e]=!0},"@(document.activeElement===undefined)":{constructor:function(e){this.base(e),this.isBound()&&(e.activeElement=e.body)},onfocus:function(e){this.base(e),this.isBound()&&(this.document.activeElement=this._focusElement)},onblur:function(e){this.base(e),this.isBound()&&(this.document.activeElement=this.document.body)}},"@!(element.addEventListener)":{constructor:function(t){this.base(t);var n=new EventDispatcher(this);this._dispatch=function(e){e.target=e.target||e.srcElement||t,n.handleEvent(e)},this.handleEvent=function(e){return this["on"+e.type]&&this["on"+e.type](e),n.handleEvent(e)}},registerEvent:function(e,t){var n,a=this.events[e],i=_CAN_DELEGATE.test(e);return a&&i||(a=a||(this.events[e]={}),!i&&t||(t=this.document),n=this,t["on"+e]=function(e){(e=e||Traversal.getDefaultView(this).event)&&n.handleEvent(e)}),a},"@MSIE.+win":{constructor:function(e){this.base(e);var n={};this._registerForm=function(e){var t=assignID(e);n[t]||(n[t]=!0,e.attachEvent("onsubmit",this._dispatch),e.attachEvent("onreset",this._dispatch))}},fireEvent:function(e,t){(t=copy(t)).type=e,this.handleEvent(t)},registerEvent:function(t,e){var n,a=this.events[t],i=_CAN_DELEGATE.test(t);return a&&i||(a=a||(this.events[t]={}),!i&&e||(e=this.document),n=this,e.attachEvent("on"+t,function(e){e.target=e.srcElement||n.document,n.handleEvent(e),n["after"+t]&&n["after"+t](e)})),a},onDOMContentLoaded:function(e){forEach(e.target.forms,this._registerForm,this);try{this.setFocus(this.document.activeElement)}catch(e){}},onmousedown:function(e){this.base(e),this._button=e.button},onmouseup:function(e){this.base(e),null==this._button&&this.fireEvent("mousedown",e),delete this._button},aftermouseup:function(){this._selectEvent&&(this._dispatch(this._selectEvent),delete this._selectEvent)},onfocusin:function(e){this.setFocus(e.target),this.onfocus(e)},setFocus:function(t){var n,a,e,i=this.events.change,r=this.events.select;(i||r)&&(n=this._dispatch,i&&t.attachEvent("onchange",n),r&&(a=this,e=function(e){a._activeElement==t?a._selectEvent=copy(e):n(e)},t.attachEvent("onselect",e)),t.attachEvent("onblur",function(){t.detachEvent("onblur",arguments.callee),i&&t.detachEvent("onchange",n),r&&t.detachEvent("onselect",e)}))},onfocusout:function(e){this.onblur(e)},onclick:function(e){e=e.target;e.form&&this._registerForm(e.form)},ondblclick:function(e){this.fireEvent("click",e)}}}},{init:function(){assignID(document),(DocumentState=this).createState(document),new DOMContentLoadedEvent(document)},createState:function(e){var t=e.base2ID;return this[t]||(this[t]=new this(e)),this[t]},getInstance:function(e){return this[Traversal.getDocument(e).base2ID]}});eval(this.exports)};try{NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this.item(n),n,this)})}catch(e){}try{"undefined"==typeof StaticNodeList||StaticNodeList.prototype.forEach||(StaticNodeList.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this.item(n),n,this)})}catch(e){}try{!function(e){"window"in e&&"document"in e&&"TextRectangle"in this&&!("width"in TextRectangle.prototype)&&Object.defineProperties(TextRectangle.prototype,{width:{get:function(){return this.right-this.left}},height:{get:function(){return this.bottom-this.top}}})}(this)}catch(e){}if(void 0===base2)throw new Error("Base2 not found. wForms 3 depends on the base2 library.");base2.DOM.HTMLElement.implement({hasClass:function(e,t){return e.classList&&e.classList.contains?e.classList.contains(t):e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},removeClass:function(e,t){base2.DOM.HTMLElement.hasClass(e,t)&&(t=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(t," ").replace(/^\s+|\s+$/g,""))},addClass:function(e,t){base2.DOM.HTMLElement.hasClass(e,t)||(e.className=(e.className+" "+t).replace(/^\s+|\s+$/g,""))}}),"undefined"==typeof wFORMS&&(wFORMS={}),wFORMS.NAME="wFORMS",wFORMS.VERSION="3.11.0",wFORMS.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"},wFORMS.toString=function(){return this.__repr__()},wFORMS.behaviors={},wFORMS.helpers={},wFORMS.instances=[],wFORMS.initialized=!1,wFORMS.helpers.randomId=function(){for(var e=(e=(new Date).getTime()).toString().substr(6),t=0;t<6;t++)e+=String.fromCharCode(48+Math.floor(10*Math.random()));return"id_"+e},wFORMS.helpers.getFieldValue=function(e){switch(e.tagName){case"INPUT":return"checkbox"==e.type?e.checked?e.value:null:"radio"!=e.type||e.checked?e.value:null;case"SELECT":if(-1==e.selectedIndex)return null;if(e.getAttribute("multiple")){for(var t=[],n=0;n<e.options.length;n++)e.options[n].selected&&t.push(e.options[n].value);return t}return e.options[e.selectedIndex].value;case"TEXTAREA":return e.value;default:return null}},wFORMS.helpers.escapeQuerySelector=function(e){return e&&""!==e?e.replace(/\[(\d+)\]/g,function(e,t){return"\\["+t+"\\]"}):null},wFORMS.helpers.getLabel=function(e){if(!e||!e.form)return null;if(!e.form.querySelectorAll)return null;var t=e.getAttribute("id"),t=this.escapeQuerySelector(t);return l=e.form.querySelectorAll("label[for="+t+"]"),l&&1<=l.length?l.item(0).innerHTML:null},wFORMS.helpers.detectLocaleDecimalSeparator=function(){return 1.1.toLocaleString().substring(1,2)},wFORMS.helpers.normalizeNumberToUSLocale=function(e){return e=","==wFORMS.helpers.detectLocaleDecimalSeparator()?String(e).replace(",","."):String(e).replace(",","")},wFORMS.helpers.isNumericValue=function(e){return e=wFORMS.helpers.normalizeNumberToUSLocale(e),!(""===String(e)||!String(e).match(/^\s*(\+|-)?[0-9]*[\.]?[0-9]*\s*$/))},wFORMS.helpers.isEmptyValue=function(e){return""===(e=(e=String(e)).replace(/^\s+|\s+$/g,""))},wFORMS.helpers.getNumericValue=function(e){var t=wFORMS.helpers;t.isNumericValue(e)&&(e=t.normalizeNumberToUSLocale(e));e=parseFloat(e);return e=isNaN(e)?0:e},wFORMS.helpers.getComputedStyle=function(e,t){return document.defaultView.getComputedStyle(e,"").getPropertyValue(t)},wFORMS.helpers.getForm=function(e){return e&&e.tagName&&"form"==e.tagName.toLowerCase()?(wFORMS.standardizeElement(e),e):e.form?(wFORMS.standardizeElement(e.form),e.form):e.parentNode?"form"==e.parentNode.tagName.toLowerCase()?(wFORMS.standardizeElement(e.parentNode),e.parentNode):this.getForm(e.parentNode):null},wFORMS.helpers.getLeft=function(e){for(var t=0;e.offsetParent;){try{if("relative"==document.defaultView.getComputedStyle(e,"").getPropertyValue("position"))return t;if(0<t&&"absolute"==document.defaultView.getComputedStyle(e,"").getPropertyValue("position"))return t}catch(e){}t+=e.offsetLeft,e=e.offsetParent}return!window.opera&&document.all&&document.compatMode&&"BackCompat"!=document.compatMode&&(t+=parseInt(document.body.currentStyle.marginTop)),t},wFORMS.helpers.getTop=function(e){for(var t=0;e.offsetParent;){try{if("relative"==document.defaultView.getComputedStyle(e,"").getPropertyValue("position"))return t;if(0<t&&"absolute"==document.defaultView.getComputedStyle(e,"").getPropertyValue("position"))return t}catch(e){}t+=e.offsetTop,e=e.offsetParent}return!window.opera&&document.all&&document.compatMode&&"BackCompat"!=document.compatMode&&(t+=parseInt(document.body.currentStyle.marginLeft)+1),t},wFORMS.helpers.position=function(e){var t=e.offsetLeft,n=e.offsetTop;return e.offsetParent&&(t+=(e=this.position(e.offsetParent)).left,n+=e.top),{left:t,top:n}},wFORMS.helpers.useSpotlight=!1,wFORMS.helpers.spotlight=function(e){},wFORMS.helpers.activateStylesheet=function(e){var t;document.getElementsByTagName?t=document.getElementsByTagName("link"):document.styleSheets&&(t=document.styleSheets);for(var n=0;t[n];n++)-1!=t[n].href.indexOf(e)&&(t[n].rel="stylesheet",t[n].title="",t[n].disabled=!0,t[n].disabled=!1)},wFORMS.helpers.contains=function(e,t){for(var n=e.length,a=0;a<n;a++)if(e[a]===t)return!0;return!1},wFORMS.helpers.isHTMLElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},wFORMS.helpers.deleteResumedFiles=function(e){var t=document.getElementById("tfa_uploadDelete_"+e),e=document.getElementById("tfa_uploadedFile_"+e);return t.checked=!t.checked,e.className=t.checked?"uploadedFile uploadDelete":"uploadedFile uploadKeep",!1},wFORMS.helpers.deleteResumedFilesFinder=function(e){return e=e||document,base2.DOM.HTMLElement.querySelectorAll(e,".deleteUploadedFileCb")},wFORMS.helpers.objectDeepEqual=function(n,a){return n&&a&&"object"==typeof n&&"object"==typeof a?Object.keys(n).length===Object.keys(a).length&&Object.keys(n).reduce(function(e,t){return e&&wFORMS.helpers.objectDeepEqual(n[t],a[t])},!0):n===a},wFORMS.LOADER={},wFORMS.LOADER.enabled=!1,wFORMS.LOADER.message="Please wait...",wFORMS.LOADER.spinner="",wFORMS.LOADER.speed=2,wFORMS.LOADER.show=function(e){var t,n;wFORMS.LOADER.enabled&&((t=wFORMS.LOADER.create()).style.visibility="hidden",t.style.overflow="hidden",n="above"==arguments[1]?e:e.nextSibling,(t=e.parentNode.insertBefore(t,n)).id="wfLoader_"+e.id,wFORMS.LOADER._id=t.id,n=t.clientHeight,t.style.height=n+"px",wFORMS.LOADER._padding=t.clientHeight-n,t.style.height=n-wFORMS.LOADER._padding+"px",t.style.visibility="visible")},wFORMS.LOADER.hide=function(e){var t;wFORMS.LOADER.enabled&&wFORMS.LOADER._id&&((t=document.getElementById(wFORMS.LOADER._id))&&(arguments[1]?t.parentNode.removeChild(t):wFORMS.LOADER._interval=setInterval(function(){var e=t.clientHeight-wFORMS.LOADER.speed-wFORMS.LOADER._padding;t.style.height=(e=e<0?0:e)+"px",!t||t.clientHeight-wFORMS.LOADER._padding||(t.parentNode.removeChild(t),clearInterval(wFORMS.LOADER._interval))},10)),wFORMS.LOADER._id=null)},wFORMS.LOADER.create=function(){var e=document.createElement("DIV");e.className="wfLoader";var t=e.appendChild(document.createElement("DIV"));return t.className="inner",wFORMS.LOADER.spinner&&(t.appendChild(document.createElement("IMG")).src=wFORMS.LOADER.spinner),wFORMS.LOADER.message&&t.appendChild(document.createTextNode(wFORMS.LOADER.message)),e},wFORMS.onLoadHandler=function(){for(var e=document.getElementsByTagName("FORM"),n=[],t=0;t<e.length;t++)!function(t){"no-behavior"!=t.getAttribute("rel")&&n.push(function(){var e;e=t,wFORMS.LOADER.show(e,"above"),setTimeout(function(){wFORMS.applyBehaviors(e),wFORMS.LOADER.hide(e),a()},1)})}(e[t]);function a(){0!=n.length&&n.shift()()}function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(i.prototype=window.Event.prototype,window.CustomEvent=i),n.push(function(){wFORMS.initialized=!0;var e=new CustomEvent("wFORMSLoaded");document.dispatchEvent(e)}),a()},wFORMS.standardizeElement=function(e){"HTML"!=e.tagName&&(e.addEventListener||(e.addEventListener=function(e,t,n){base2.DOM.Element.addEventListener(this,e,t,n)}),e.hasClass||(e.hasClass=function(e){return-1!=(" "+this.className+" ").indexOf(" "+e+" ")}),e.removeClass||(e.removeClass=function(e){return base2.DOM.HTMLElement.removeClass(this,e)}),e.addClass||(e.addClass=function(e){return base2.DOM.HTMLElement.addClass(this,e)}))},wFORMS.applyBehaviors=function(e){base2.DOM.bind(e),wFORMS.behaviors.switch&&(o=wFORMS.behaviors.switch.applyTo(e),wFORMS.instances.switch?(wFORMS.removeBehavior(e,"switch"),wFORMS.instances.switch.push(o)):wFORMS.instances.switch=[o]);var t,n=[];for(t in wFORMS.behaviors)n.push(t);var a,i=n.indexOf("validation"),r=n.indexOf("calculation");-1<i&&-1<r&&i<r&&(a=Math.min(i,r),r=Math.max(i,r),r=n.splice(r,1),n.splice(a,0,r[0]));for(var s=0;s<n.length;s++){var o,l=n[s];if("switch"!=l&&wFORMS.behaviors[l].applyTo){(o=wFORMS.behaviors[l].applyTo(e))&&o.constructor!=Array&&(o=[o]);for(var c=0;o&&c<o.length;c++)wFORMS.instances[l]?(wFORMS.removeBehavior(e,l),wFORMS.instances[l].push(o[c])):wFORMS.instances[l]=[o[c]]}}wFORMS.behaviors.onApplyAll&&wFORMS.behaviors.onApplyAll(e)},wFORMS.removeBehavior=function(e,t){return null},wFORMS.getBehaviorInstance=function(e,t){if(!e||!wFORMS.instances[t])return null;for(var n=0;n<wFORMS.instances[t].length;n++)if(wFORMS.instances[t][n].target==e)return wFORMS.instances[t][n];return null};var loadIE=!1;if(loadIE||base2.DOM.Element.addEventListener(document,"DOMContentLoaded",wFORMS.onLoadHandler,!1),wFORMS.helpers.activateStylesheet("wforms-jsonly.css"),"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.hint={CSS_INACTIVE:"field-hint-inactive",CSS_ACTIVE:"field-hint",HINT_SELECTOR:'*[id$="-H"]',HINT_SUFFIX:"-H",CLOSED_HINTS:[],instance:function(e){this.behavior=wFORMS.behaviors.hint,this.target=e}},wFORMS.behaviors.hint.applyTo=function(e){var a=new wFORMS.behaviors.hint.instance(e);e.querySelectorAll||base2.DOM.bind(e);e=e.querySelectorAll(wFORMS.behaviors.hint.HINT_SELECTOR);return e.forEach||(e.forEach=NodeList.prototype.forEach),e.forEach(function(e){var t=e.querySelector('*[id$="-HH-close-button"]');null!==t&&t.addEventListener("mousedown",function(){a.closeTooltipForHint(e)});var n=a.getElementByHintId(e.id);n&&(n.addEventListener||base2.DOM.bind(n),"SELECT"==n.tagName||"TEXTAREA"==n.tagName||"INPUT"==n.tagName&&"radio"!=n.type&&"checkbox"!=n.type?(n.addEventListener("focus",function(e){a.run(e,this)},!1),n.addEventListener("blur",function(e){e.relatedTarget!==t&&a.run(e,this)},!1),n.addEventListener("keydown",function(e){27===e.keyCode&&a.run(e,this)},!1)):(n.addEventListener("mouseover",function(e){a.run(e,n)},!1),n.addEventListener("mouseout",function(e){a.run(e,n)},!1)))}),a.onApply(),a},wFORMS.behaviors.hint.instance.prototype.onApply=function(){},wFORMS.behaviors.hint.instance.prototype.run=function(e,t){var n;this.behavior.skip||(n=this.getHintElement(t))&&(n.removeClass||base2.DOM.bind(n),"focus"!=e.type&&"mouseover"!=e.type||-1!==this.behavior.CLOSED_HINTS.indexOf(n.getAttribute("id"))?(n.addClass(wFORMS.behaviors.hint.CSS_INACTIVE),n.removeClass(wFORMS.behaviors.hint.CSS_ACTIVE)):(n.removeClass(wFORMS.behaviors.hint.CSS_INACTIVE),n.addClass(wFORMS.behaviors.hint.CSS_ACTIVE),wFORMS.helpers.getForm(t).hasClass("hintsSide")||this.setup(n,t)))},wFORMS.behaviors.hint.instance.prototype.getElementByHintId=function(e){e=e.substr(0,e.length-wFORMS.behaviors.hint.HINT_SUFFIX.length);return document.getElementById(e)},wFORMS.behaviors.hint.instance.prototype.getHintElement=function(e){e=document.getElementById(e.id+this.behavior.HINT_SUFFIX);return e&&!e.hasClass&&base2.DOM.bind(e),e&&""!=e?e:null},wFORMS.behaviors.hint.instance.prototype.setup=function(e,t){var n=wFORMS.helpers.position(t),a=wFORMS.helpers.position(e),a={left:n.left-a.left,top:n.top-a.top};"select"==t.tagName.toLowerCase()?(e.style.left=e.offsetLeft+a.left+t.offsetWidth+"px",e.style.top=e.offsetTop+a.top+"px"):("span"==t.tagName.toLowerCase()&&(wFORMS.standardizeElement(t),t.hasClass("vertical")?a.left+=t.getBoundingClientRect().width:a.top+=t.getBoundingClientRect().height),e.style.left=e.offsetLeft+a.left+"px",e.style.top=e.offsetTop+a.top+t.offsetHeight+"px")},wFORMS.behaviors.hint.isHintId=function(e){return null!=e.match(new RegExp(wFORMS.behaviors.hint.HINT_SUFFIX+"$"))},wFORMS.behaviors.hint.instance.prototype.closeTooltipForHint=function(e){var t=e.getAttribute("id");-1===this.behavior.CLOSED_HINTS.indexOf(t)&&(this.behavior.CLOSED_HINTS=this.behavior.CLOSED_HINTS.concat(t),e.addClass(wFORMS.behaviors.hint.CSS_INACTIVE),e.removeClass(wFORMS.behaviors.hint.CSS_ACTIVE))},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.paging={SELECTOR:".wfPage",CSS_PAGE:"wfPage",CSS_CURRENT_PAGE:"wfCurrentPage",CSS_BUTTON_NEXT:"wfPageNextButton",CSS_BUTTON_PREVIOUS:"wfPagePreviousButton",CSS_BUTTON_PLACEHOLDER:"wfPagingButtons",CSS_PAGETAB:"wfPageTab",CSS_TABS:"wfTab",CSS_HIDDENTABS:"wfHiddenTab",CSS_TABSID:"wfTabNav",CSS_TABNAVLABEL:"wfTabNavLabel",CSS_TABSCURRENT:"wfTabCurrentPage",CSS_TABSEPARATOR_SPAN:"wfTabSep",CSS_TABSEPARATOR:" | ",ID_BUTTON_NEXT_PREFIX:"wfPageNextId",ID_BUTTON_PREVIOUS_PREFIX:"wfPagePreviousId",CSS_SUBMIT_HIDDEN:"wfHideSubmit",ID_PAGE_PREFIX:"wfPgIndex-",ID_PLACEHOLDER_SUFFIX:"-buttons",ATTR_INDEX:"wfPageIndex_activate",CAPTCHA_ERROR:"#tfa_captcha_text-E",MESSAGES:{CAPTION_NEXT:"Next Page",CAPTION_PREVIOUS:"Previous Page",CAPTION_UNLOAD:"Any data entered on ANY PAGE of this form will be LOST.",NAV_LABEL:"Page: ",TAB_LABEL:"Page "},showTabNavigation:!1,runValidationOnPageNext:!0,warnOnUnload:!0,onPageNext:function(){},onPagePrevious:function(){},onPageChange:function(){},instance:function(e){this.behavior=wFORMS.behaviors.paging,this.target=e,this.currentPageIndex=1}},wFORMS.behaviors.paging.applyTo=function(r){var s=null,o=wFORMS.behaviors.paging;o.showTabNavigation&&(o.runValidationOnPageNext=!1);var t,n,a,l=wFORMS.behaviors.validation&&wFORMS.behaviors.paging.runValidationOnPageNext;return base2.DOM.Element.querySelectorAll(r,wFORMS.behaviors.paging.SELECTOR).forEach(function(t){var n,a,e=(s=s||new wFORMS.behaviors.paging.instance(r)).getOrCreatePlaceHolder(t),i=wFORMS.behaviors.paging.getPageIndex(t);1==i?(n=base2.DOM.bind(e.appendChild(o._createNextPageButton(i))),l?n.addEventListener("click",function(e){wFORMS.getBehaviorInstance(s.target,"validation").run(e,t)&&s.run(e,n)},!1):n.addEventListener("click",function(e){s.run(e,n)},!1),wFORMS.behaviors.paging.showPage(t)):(n=base2.DOM.bind(o._createPreviousPageButton(i)),e.insertBefore(n,e.firstChild),n.addEventListener("click",function(e){s.run(e,n)},!1),wFORMS.behaviors.paging.isLastPageIndex(i,!0)||(a=base2.DOM.bind(e.appendChild(o._createNextPageButton(i))),l?a.addEventListener("click",function(e){wFORMS.getBehaviorInstance(s.target,"validation").run(e,t)&&s.run(e,a)},!1):a.addEventListener("click",function(e){s.run(e,a)},!1)))}),s&&(p=s.findNextPage(0),s.currentPageIndex=0,s.activatePage(wFORMS.behaviors.paging.getPageIndex(p),!1),window.onbeforeunload||(window.onbeforeunload=function(){if(s.behavior.warnOnUnload)return s.behavior.MESSAGES.CAPTION_UNLOAD}),s.behavior.showTabNavigation&&(t=wFORMS.behaviors.condition.onHide,wFORMS.behaviors.condition.onHide=function(e){t(),s.generateTabs()},n=wFORMS.behaviors.condition.onShow,wFORMS.behaviors.condition.onShow=function(e){n(),s.generateTabs()},s.generateTabs()),s.onApply(),base2.DOM.Element.querySelector(document,wFORMS.behaviors.paging.CAPTCHA_ERROR)&&(a=wFORMS.behaviors.condition.onSetupFinish,wFORMS.behaviors.condition.onSetupFinish=function(e){a(e);for(var t=1,n=1;n<100;n++)if(s.behavior.isLastPageIndex(n)){t=n;break}s.jumpTo(t)}),base2.DOM.Element.addEventListener(r,"submit",function(e){s.onSubmit(e,s)})),s},wFORMS.behaviors.paging.instance.prototype.onApply=function(){},wFORMS.behaviors.paging.instance.prototype.onSubmit=function(e,t){var n,a;!wFORMS.behaviors.paging.isLastPageIndex(t.currentPageIndex)&&wFORMS.behaviors.paging.runValidationOnPageNext?(n=wFORMS.behaviors.paging.getPageByIndex(t.currentPageIndex),a=t.findNextPage(t.currentPageIndex),wFORMS.getBehaviorInstance(t.target,"validation").run(e,n)&&(t.activatePage(t.currentPageIndex+1),(a=base2.DOM.Element.querySelector(a,"input, textarea, select"))&&a.focus()),e.stopPropagation(),e.preventDefault(),e.pagingStopPropagation=!0):window.onbeforeunload&&(window.onbeforeunload=null)},wFORMS.behaviors.paging.instance.prototype.onPageNext=function(e){this.behavior.onPageNext(e)},wFORMS.behaviors.paging.instance.prototype.onPagePrevious=function(e){this.behavior.onPagePrevious(e)},wFORMS.behaviors.paging.instance.prototype.onPageChange=function(e){if(this.behavior.onPageChange(e),wFORMS.instances.responsive&&wFORMS.instances.responsive[0])for(i=0;i<wFORMS.instances.responsive.length;i++)wFORMS.instances.responsive[i].handleAllMatrixLayouts(),wFORMS.instances.responsive[i].handleAllGridLayouts()},wFORMS.behaviors.paging.getPageIndex=function(e){if(e&&e.id){e=e.id.replace(new RegExp(wFORMS.behaviors.paging.ID_PAGE_PREFIX+"(\\d+)"),"$1"),e=parseInt(e);return!isNaN(e)&&e}return!1},wFORMS.behaviors.paging.isElementVisible=function(e){for(;e&&"BODY"!=e.tagName;){if(e.className){if(-1!=e.className.indexOf(this.CSS_CURRENT_PAGE))return!0;if(-1!=e.className.indexOf(this.CSS_PAGE))return!1}e=e.parentNode}return!0},wFORMS.behaviors.paging._createNextPageButton=function(e){var t=this.createNextPageButton();return t.setAttribute(this.ATTR_INDEX,e+1),t.id=this.ID_BUTTON_NEXT_PREFIX+e,t},wFORMS.behaviors.paging.createNextPageButton=function(){var e=document.createElement("input");return e.setAttribute("value",this.MESSAGES.CAPTION_NEXT),e.type="button",e.className=this.CSS_BUTTON_NEXT,e},wFORMS.behaviors.paging._createPreviousPageButton=function(e){var t=this.createPreviousPageButton();return t.setAttribute(this.ATTR_INDEX,e-1),t.id=this.ID_BUTTON_PREVIOUS_PREFIX+e,t},wFORMS.behaviors.paging.createPreviousPageButton=function(){var e=document.createElement("input");return e.setAttribute("value",this.MESSAGES.CAPTION_PREVIOUS),e.type="button",e.className=this.CSS_BUTTON_PREVIOUS,e},wFORMS.behaviors.paging.instance.prototype.getOrCreatePlaceHolder=function(e){var t=e.id+this.behavior.ID_PLACEHOLDER_SUFFIX,n=document.getElementById(t);return n||((n=e.appendChild(document.createElement("div"))).id=t,n.className=this.behavior.CSS_BUTTON_PLACEHOLDER),n},wFORMS.behaviors.paging.hidePage=function(e){e&&(e.removeClass||(e.removeClass=function(e){return base2.DOM.HTMLElement.removeClass(this,e)}),e.addClass||(e.addClass=function(e){return base2.DOM.HTMLElement.addClass(this,e)}),e.removeClass(wFORMS.behaviors.paging.CSS_CURRENT_PAGE),e.addClass(wFORMS.behaviors.paging.CSS_PAGE))},wFORMS.behaviors.paging.showPage=function(e){e&&(e.removeClass||(e.removeClass=function(e){return base2.DOM.HTMLElement.removeClass(this,e)}),e.removeClass(wFORMS.behaviors.paging.CSS_PAGE),e.addClass||(e.addClass=function(e){return base2.DOM.HTMLElement.addClass(this,e)}),e.addClass(wFORMS.behaviors.paging.CSS_CURRENT_PAGE))},wFORMS.behaviors.paging.instance.prototype.activatePage=function(e){var t;if(t=!(1<arguments.length)||arguments[1],e==this.currentPageIndex)return!1;var n,a,r,s,o=0===this.currentPageIndex;(n=(e=parseInt(e))>this.currentPageIndex?this.findNextPage(this.currentPageIndex):this.findPreviousPage(this.currentPageIndex))&&(e=(a=this).behavior.getPageIndex(n),a.setupManagedControls(e),a.behavior.hidePage(a.behavior.getPageByIndex(a.currentPageIndex)),a.behavior.showPage(n),r=a.currentPageIndex,a.currentPageIndex=e,t&&(n.scrollIntoView?n.scrollIntoView():location.hash="#"+wFORMS.behaviors.paging.ID_PAGE_PREFIX+e),!1==o&&(s=function(e){return!(e instanceof HTMLInputElement&&"hidden"===e.type)&&(!e.classList.contains("offstate")&&!1===e.hidden)},null!==(o=function(e){for(i=0,l=e.length;i<l;i++)if(s(e[i]))return e[i];return null}(n.firstElementChild.children))&&(o.tabIndex=-1,o.focus({preventScroll:!0}))),a.labelCurrentPageTab(n),a.onPageChange(n),r<e?a.onPageNext(n):a.onPagePrevious(n))},wFORMS.behaviors.paging.instance.prototype.setupManagedControls=function(e){e=e||this.currentPageIndex;var t=wFORMS.behaviors.paging;t.isFirstPageIndex(e)?(ctrl=t.getPreviousButton(e))&&(ctrl.style.visibility="hidden"):(ctrl=t.getPreviousButton(e))&&(ctrl.style.visibility="visible"),t.isLastPageIndex(e)?((ctrl=t.getNextButton(e))&&(ctrl.style.visibility="hidden"),this.showSubmitButtons(),this.showCaptchas(t.getPageByIndex(e).querySelector("."+wFORMS.behaviors.paging.CSS_BUTTON_PLACEHOLDER))):((ctrl=t.getNextButton(e))&&(ctrl.style.visibility="visible"),this.hideSubmitButtons(),this.hideCaptchas())},wFORMS.behaviors.paging.instance.prototype.showSubmitButtons=function(){for(var e=this.target.getElementsByTagName("input"),t=0;t<e.length;t++)"submit"==e[t].type&&(e[t].className=e[t].className.replace(new RegExp("(^|\\s)"+this.behavior.CSS_SUBMIT_HIDDEN+"(\\s|$)","g"),"$2"))},wFORMS.behaviors.paging.instance.prototype.hideSubmitButtons=function(){for(var e=this.target.getElementsByTagName("input"),t=0;t<e.length;t++)"submit"==e[t].type&&(new RegExp("(^|\\s)"+this.behavior.CSS_SUBMIT_HIDDEN+"(\\s|$)").test(e[t].className)||(e[t].className+=" "+this.behavior.CSS_SUBMIT_HIDDEN))},wFORMS.behaviors.paging.instance.prototype.hideCaptchas=function(){var e=document.getElementById("google-captcha"),t=document.getElementById("captcha");null!=e&&(e.style.display="none"),null!=t&&(t.style.display="none")},wFORMS.behaviors.paging.instance.prototype.showCaptchas=function(e){var t=document.getElementById("google-captcha"),n=document.getElementById("captcha");null!=t&&(null!=e&&e.parentNode.insertBefore(t,e),t.style.display="block"),null!=n&&(n.style.display="block")},wFORMS.behaviors.paging.getPageByIndex=function(e){e=document.getElementById(wFORMS.behaviors.paging.ID_PAGE_PREFIX+e);return!!e&&base2.DOM.bind(e)},wFORMS.behaviors.paging.getNextButton=function(e){return document.getElementById(wFORMS.behaviors.paging.ID_BUTTON_NEXT_PREFIX+e)},wFORMS.behaviors.paging.getPreviousButton=function(e){return document.getElementById(wFORMS.behaviors.paging.ID_BUTTON_PREVIOUS_PREFIX+e)},wFORMS.behaviors.paging.isLastPageIndex=function(e,t){e=parseInt(e)+1;var n=wFORMS.behaviors.paging,a=n.getPageByIndex(e);if((_b=wFORMS.behaviors.condition)&&!t)for(;a&&_b.hasOffState(a);)a=n.getPageByIndex(++e);return!a},wFORMS.behaviors.paging.isFirstPageIndex=function(e,t){e=parseInt(e)-1;var n=wFORMS.behaviors.paging,a=n.getPageByIndex(e);if((_b=wFORMS.behaviors.condition)&&!t)for(;a&&_b.hasOffState(a);)a=n.getPageByIndex(--e);return!a},wFORMS.behaviors.paging.instance.prototype.findNextPage=function(e){e=parseInt(e)+1;var t=wFORMS.behaviors.paging,n=t.getPageByIndex(e);if(_b=wFORMS.behaviors.condition)for(;n&&_b.hasOffState(n);)n=t.getPageByIndex(++e);return n},wFORMS.behaviors.paging.instance.prototype.findPreviousPage=function(e){e=parseInt(e)-1;var t=wFORMS.behaviors.paging,n=t.getPageByIndex(e);if(_b=wFORMS.behaviors.condition)for(;n&&_b.hasOffState(n);)n=t.getPageByIndex(--e);return n||!1},wFORMS.behaviors.paging.instance.prototype.jumpTo=function(e){var t,n=this,a=e;n.currentPageIndex!=a&&(n.behavior.hidePage(n.behavior.getPageByIndex(n.currentPageIndex)),n.setupManagedControls(a),n.behavior.showPage(n.behavior.getPageByIndex(a)),n.currentPageIndex=a),vInstance=wFORMS.getBehaviorInstance(n.target,"validation"),vInstance&&vInstance.errorPages&&vInstance.errorPages[a]&&!arguments[1]&&((t=document.getElementById(vInstance.errorPages[a][0])).scrollIntoView&&setTimeout(function(){t.scrollIntoView()},1));a=n.behavior.getPageByIndex(a);this.labelCurrentPageTab(a),this.onPageChange(a)},wFORMS.behaviors.paging.instance.prototype.generateTabs=function(e){var r=this;document.getElementById(this.behavior.CSS_TABSID)&&(n=document.getElementById(this.behavior.CSS_TABSID)).parentNode.removeChild(n);var s=document.createElement("div");s.id=this.behavior.CSS_TABSID,s.className=this.behavior.CSS_TABSID;var t=document.createTextNode(this.behavior.MESSAGES.NAV_LABEL),n=document.createElement("span");n.className=this.behavior.CSS_TABNAVLABEL,n.appendChild(t),s.appendChild(n),e?e.appendChild(s):this.target.parentNode.insertBefore(s,this.target);var o=base2.DOM.Element.querySelectorAll(this.target,"."+this.behavior.CSS_PAGE+", ."+this.behavior.CSS_CURRENT_PAGE);o.forEach(function(e,t){var n;wFORMS.behaviors.condition.hasOffState(e)?((n=document.createElement("span")).setAttribute("class",r.behavior.CSS_TABS+" "+r.behavior.CSS_HIDDENTABS),n.setAttribute("id",r.behavior.CSS_PAGETAB+"_"+(t+1))):((n=document.createElement("a")).setAttribute("class",r.behavior.CSS_TABS),n.setAttribute("id",r.behavior.CSS_PAGETAB+"_"+(t+1)),n.setAttribute("href","#"),base2.DOM.Element.addEventListener(n,"click",function(e){return r.jumpTo(t+1),e.preventDefault(),!1}));var a=base2.DOM.Element.querySelector(e,"h4"),e=null;a&&(e=a.innerText||a.textContent),n.setAttribute("title",e||r.behavior.MESSAGES.TAB_LABEL+(t+1));var i,e=document.createTextNode(t+1);n.appendChild(e),t<o.length-1&&((i=document.createElement("span")).className=r.behavior.CSS_TABSEPARATOR_SPAN,e=document.createTextNode(r.behavior.CSS_TABSEPARATOR),i.appendChild(e)),s.appendChild(n),i&&s.appendChild(i)});e=r.behavior.getPageByIndex(1);return this.labelCurrentPageTab(e),this.onPageChange(e),o},wFORMS.behaviors.paging.instance.prototype.labelCurrentPageTab=function(e){currentIndex=(_b=this).currentPageIndex,base2.DOM.Element.querySelectorAll(this.target.parentNode,'a[id^="'+this.behavior.CSS_PAGETAB+'"]').forEach(function(e){e.removeClass&&e.hasClass&&e.addClass||wFORMS.standardizeElement(e),e.removeClass(_b.behavior.CSS_TABSCURRENT),e.getAttribute("id")==_b.behavior.CSS_PAGETAB+"_"+currentIndex&&e.addClass(_b.behavior.CSS_TABSCURRENT)})},wFORMS.behaviors.paging.instance.prototype.run=function(e,t){this.activatePage(t.getAttribute(wFORMS.behaviors.paging.ATTR_INDEX))},wFORMS.behaviors.paging.helpers={},wFORMS.behaviors.paging.helpers.findPage=function(e){return e&&(e.className.match("wfPage")||e.className.match("wfCurrentPage"))?(wFORMS.standardizeElement(e),e):e&&e.parentNode?e.parentNode.className.match("wfPage")||e.parentNode.className.match("wfCurrentPage")?(wFORMS.standardizeElement(e.parentNode),e.parentNode):wFORMS.behaviors.paging.helpers.findPage(e.parentNode):null},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");wFORMS.behaviors.repeat={SELECTOR_REPEAT:'*[class~="repeat"]',SELECTOR_REMOVEABLE:'*[class~="removeable"]',ID_SUFFIX_DUPLICATE_LINK:"-wfDL",ID_SUFFIX_COUNTER:"-RC",CSS_DUPLICATE_LINK:"duplicateLink",CSS_DUPLICATE_SPAN:"duplicateSpan",CSS_DELETE_LINK:"removeLink",CSS_DELETE_SPAN:"removeSpan",CSS_REMOVEABLE:"removeable",CSS_REPEATABLE:"repeat",ATTR_DUPLICATE:"wfr__dup",ATTR_DUPLICATE_ELEM:"wfr__dup_elem",ATTR_LABEL:"data-repeatlabel",ATTR_HANDLED:"wfr_handled",ATTR_MASTER_SECTION:"wfr__master_sec",ATTR_LINK_SECTION_ID:"wfr_sec_id",MESSAGES:{ADD_CAPTION:"Add another response",ADD_TITLE:"Will duplicate this question or section.",REMOVE_CAPTION:"Remove",REMOVE_TITLE:"Will remove this question or section",REMOVE_WARNING:"Are you sure you want to remove this section? All data in this section will be lost."},UPDATEABLE_ATTR_ARRAY:["id","name","for"],preserveRadioName:!1,CSS_PRESERVE_RADIO_NAME:"preserveRadioName",onRepeat:function(e){},onRemove:function(e){},allowRepeat:function(e,t){return!0},_callbacks:{onRepeatStart:[],onRepeat:[],onRemove:[],onMasterIdChange:[],onRepeatIdCreate:[]},instance:function(e){this.behavior=wFORMS.behaviors.repeat,this.target=e,this._idUpdates={master:{},repeat:{}}}};var _b=wFORMS.behaviors.repeat,_i=wFORMS.behaviors.repeat.instance;if(_b.applyTo=function(e){var t,i=this,r=new Array;e.querySelectorAll||base2.DOM.bind(e),wFORMS.behaviors.repeat.getMasterSection(e)&&(Array(),(t=wFORMS.behaviors.repeat.getMasterSection(e)).querySelectorAll||base2.DOM.bind(t)),e.querySelectorAll(this.SELECTOR_REPEAT).forEach(function(e,t){var n,a;i.isHandled(e)||(e.id||(e.id=wFORMS.helpers.randomId()),n=new i.instance(e),(a=n.getOrCreateRepeatLink(e)).addEventListener("click",function(e){n.run(e,a)},!1),n.setElementHandled(e),r.push(n))}),e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.CSS_REMOVEABLE)&&(t=this.getMasterSection(e),(t=wFORMS.getBehaviorInstance(t,"repeat"))?t.getOrCreateRemoveLink(e):r[0]&&r[0].getOrCreateRemoveLink(e)),e.querySelectorAll(this.SELECTOR_REMOVEABLE).forEach(function(e){var t=wFORMS.behaviors.repeat.getMasterSection(e),t=wFORMS.getBehaviorInstance(t,"repeat");t?t.getOrCreateRemoveLink(e):r[0]&&r[0].getOrCreateRemoveLink(e)});for(var n=0;n<r.length;n++)r[n].onApply();return r},_i.prototype.onApply=function(){var e=this.doesCounterFieldExist(this.target)?this.getSectionsCount():1;1<e&&(this.counterRepeatedFields=e);e=parseInt(this.target.getAttribute("data-repeatlimit"));isNaN(e)||null==e||this.counterRepeatedFields>=e&&(e=this.target.id+this.behavior.ID_SUFFIX_DUPLICATE_LINK,document.getElementById(e).style.display="none")},_i.prototype.counterRepeatedFields=1,_i.prototype.getOrCreateRepeatLink=function(e){var t=e.id+this.behavior.ID_SUFFIX_DUPLICATE_LINK;if(!(n=document.getElementById(t))||""==n){var n=this.createRepeatLink(t),a=document.createElement("div");if(a.className=this.behavior.CSS_DUPLICATE_SPAN,n=a.appendChild(n),"TR"==e.tagName.toUpperCase()){t=e.parentNode.parentNode;t.style.marginBottom="0px";for(var i=t.nextSibling;i&&1!=i.nodeType;)i=i.nextSibling;i?t.parentNode.insertBefore(a,i):t.parentNode.appendChild(a)}else e.parentNode.insertBefore(a,this.getLastRepeat(e).nextSibling);e.classList.contains("wf-acl-hidden")&&a.classList.add("wf-acl-hidden")}return base2.DOM.bind(n)},_i.prototype.getLastRepeat=function(e){var t=e.parentNode;t.querySelectorAll||base2.DOM.bind(t);var n=e.id.match("^.[^[]+")[0],n=t.querySelectorAll(wFORMS.behaviors.repeat.SELECTOR_REMOVEABLE+"[id^="+n+"]");return 0<n.length?n.item(n.length-1):e},_i.prototype.createRepeatLink=function(e){var t=document.createElement("A");t.id=e,t.setAttribute("href","#"),t.className=this.behavior.CSS_DUPLICATE_LINK,t.setAttribute("title",this.behavior.MESSAGES.ADD_TITLE);e=this.target.getAttribute(wFORMS.behaviors.repeat.ATTR_LABEL);return t.appendChild(document.createElement("span").appendChild(document.createTextNode(e||this.behavior.MESSAGES.ADD_CAPTION))),t},_i.prototype.getOrCreateRemoveLink=function(e){var t=this.createRemoveLink(e.id);"TR"==e.tagName?e.getElementsByClassName("repeatRemoveLink")[0].appendChild(t):e.insertBefore(t,e.children[0])},_i.prototype.createRemoveLink=function(e){var t=document.createElement("a");t.id=e+this.behavior.ID_SUFFIX_DUPLICATE_LINK,t.setAttribute("href","#"),t.className=this.behavior.CSS_DELETE_LINK,t.setAttribute("title",this.behavior.MESSAGES.REMOVE_TITLE),t.setAttribute(this.behavior.ATTR_LINK_SECTION_ID,e);e=document.createElement("span");e.appendChild(document.createTextNode(this.behavior.MESSAGES.REMOVE_CAPTION)),t.appendChild(e);var n=this;return t.onclick=function(e){return n.onRemoveLinkClick(e,t),!1},(e=document.createElement("span")).className=this.behavior.CSS_DELETE_SPAN,e.appendChild(t),e},_i.prototype.counterRepeatedFields=1,_i.prototype.duplicateSection=function(e){if(!this.behavior.allowRepeat(e,this))return!1;this.callRepeatStartObservers(e),this.updateMasterSection(e);var t=e.cloneNode(!0),n=this.getNextDuplicateIndex(this.target),a=this.createSuffix(e,n);this.updateDuplicatedSection(t,n,a),t=e.parentNode.insertBefore(t,this.getInsertNode(e)),this.callRepeatCompleteObservers(e,t),wFORMS.applyBehaviors(t),this.counterRepeatedFields++;a=e.getAttribute("data-repeatlimit"),e=e.id+this.behavior.ID_SUFFIX_DUPLICATE_LINK;null!=a&&this.counterRepeatedFields>=a&&(document.getElementById(e).style.display="none"),this.behavior.onRepeat(t),wFORMS.helpers.spotlight(t)},_i.prototype.removeSection=function(e){var t,n;e&&(n=this.behavior.getMasterSection(e),this.logRemovedSection(e),e=e.parentNode.removeChild(e),this.callRemoveCompleteObservers(e),this.counterRepeatedFields--,t=e.getAttribute("data-repeatlimit"),n=n.id+this.behavior.ID_SUFFIX_DUPLICATE_LINK,null!=t&&this.counterRepeatedFields<=t&&(document.getElementById(n).style.display=""),this.behavior.onRemove(e))},_i.prototype.logRemovedSection=function(e){var t,n,a;e&&e.id&&(t=e.id,a=this.behavior.getMasterSection(e),(n=this.getOrCreateCounterField(a))&&(e=[],(a=n.value.split("|"))[1]&&(e=a[1].split(",")),a=a[0],e.push(t),n.value=a+"|"+e.join(",")))},_i.prototype.getInsertNode=function(e){var t=e.nextSibling;for(t&&1==t.nodeType&&!t.hasClass&&(t.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)});t&&(1!=t.nodeType||t.hasClass(this.behavior.CSS_REMOVEABLE));)(t=t.nextSibling)&&1==t.nodeType&&!t.hasClass&&(t.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)});return t},_i.prototype.onRemoveLinkClick=function(e,t){confirm(this.behavior.MESSAGES.REMOVE_WARNING)&&(t=document.getElementById(t.getAttribute(this.behavior.ATTR_LINK_SECTION_ID)),this.removeSection(t),e&&e.preventDefault())},_i.prototype.updateMasterSection=function(e){if(1==e.doItOnce)return!0;e.doItOnce=!0;var t=e.id,n=this.createSuffix(e);e.id=this.clearSuffix(e.id)+n,e.id!=t&&this.callMasterIdChangeObservers(t,e.id),this.updateMasterElements(e,n,t)},_i.prototype.updateMasterElements=function(e,t,n){if(e&&1==e.nodeType){e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.behavior.CSS_REPEATABLE)&&n!=e.id&&(document.getElementById(n+this.behavior.ID_SUFFIX_DUPLICATE_LINK).id=n+t+this.behavior.ID_SUFFIX_DUPLICATE_LINK);for(var a=e.childNodes,i=0;i<a.length;i++){var r=a[i];if(1==r.nodeType){r.hasClass||(r.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)});var s=t;r.hasClass(this.behavior.CSS_REPEATABLE)&&(t+="[0]");n=r.id;if(!r.hasClass(this.behavior.CSS_REMOVEABLE)){for(var o=0;o<this.behavior.UPDATEABLE_ATTR_ARRAY.length;o++){var l,c,u=this.behavior.UPDATEABLE_ATTR_ARRAY[o],h=this.clearSuffix(r.getAttribute(u));h&&("id"==u&&wFORMS.behaviors.hint&&wFORMS.behaviors.hint.isHintId(r.id)?r.id=h.replace(new RegExp("(.*)("+wFORMS.behaviors.hint.HINT_SUFFIX+")$"),"$1"+t+"$2"):"id"==u&&wFORMS.behaviors.validation&&wFORMS.behaviors.validation.isErrorPlaceholderId(r.id)?r.id=h.replace(new RegExp("(.*)("+wFORMS.behaviors.validation.ERROR_PLACEHOLDER_SUFFIX+")$"),"$1"+t+"$2"):"id"==u?(l=h.substr(-2),c=h.substr(-5),"-L"==l||"-D"==l||"-R"==l?r.id=h.substr(0,h.length-2)+t+l:"-wfDL"!==c&&(r.id=h+t)):"name"==u?"[]"==h.substr(-2)?r.name=h.substr(0,h.length-2)+t+"[]":r.name=h+t:r.setAttribute(u,h+t))}this.updateMasterElements(r,t,n)}r.id!=n&&this.callMasterIdChangeObservers(n,r.id),t=s}}}},_i.prototype.updateDuplicatedSection=function(e,t,n){e[this.behavior.ATTR_MASTER_SECTION]=e.id;var a,i=e.id;e.id=this.clearSuffix(e.id)+n,e.className=e.className.replace(this.behavior.CSS_REPEATABLE,this.behavior.CSS_REMOVEABLE),e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),a=!!e.hasClass(this.behavior.CSS_PRESERVE_RADIO_NAME)||this.behavior.preserveRadioName,e.id!=i&&this.callRepeatIdCreateObservers(i,e.id),this.updateSectionChildNodes(e,n,a)},_i.prototype.updateSectionChildNodes=function(e,t,n){e.doItOnce&&(e.doItOnce=null);for(var a=new Array,i=0;e&&e.childNodes&&e.childNodes[i];){var r=e.childNodes[i];if(i++,1==r.nodeType)if(r.hasClass||(r.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),this.behavior.isDuplicate(r))a.push(r);else if(r.hasClass(this.behavior.CSS_DUPLICATE_SPAN))a.push(r);else if(r.hasClass(this.behavior.CSS_DUPLICATE_LINK))a.push(r);else if(!r.id.match("-R$")||"hidden"!=r.type||r.hasAttribute("data-wforms-repeat-generated"))if(r.hasClass("uploadedFile"))a.push(r);else{"INPUT"==r.tagName&&"file"==r.type&&"none"==r.style.display&&(r.style.display="");var s=r.getAttribute("default");if(!s&&("radio"==r.type||"checkbox"==r.type||"SELECT"==r.tagName))if("SELECT"==r.tagName)for(var o=0;o<r.options.length;o++){var l=r.options[o];l.selected=l.getAttribute("data-default-value")&&""!==l.getAttribute("value")}else r.getAttribute("data-default-value")&&(s=r.getAttribute("value"));"INPUT"==r.tagName&&!r.hasAttribute("data-wforms-repeat-generated")&&"button"!=r.type||"TEXTAREA"==r.tagName?"radio"!=r.type&&"checkbox"!=r.type?(r.value=s||"","TEXTAREA"==r.tagName&&(r.innerHTML=null==s?"":s,r.innerText=null==s?"":s)):r.checked=r.value===s:"SELECT"==r.tagName&&r.setAttribute("selected",s?"selected":"");s=r.id;"INPUT"==r.tagName&&r.type,this.updateAttributes(r,t,n),r.hasClass(this.behavior.CSS_REPEATABLE)?("-D"==r.id.substr(-2)?r.id=r.id.substr(0,r.id.length-2)+"[0]-D":r.id=r.id+"[0]",this.updateSectionChildNodes(r,t+"[0]",n)):this.updateSectionChildNodes(r,t,n),r.id!=s&&this.callRepeatIdCreateObservers(s,r.id)}else a.push(r)}for(i=0;i<a.length;i++)(r=a[i]).clearAttributes&&r.clearAttributes(!1),r.parentNode&&r.parentNode.removeChild(r)},_i.prototype.createSuffix=function(e,t){var n,a="["+(t||"0")+"]",i=/\[(\d+)\]$/;for(e=e.parentNode;e&&e.tagName;)e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),(e.hasClass(this.behavior.CSS_REPEATABLE)||e.hasClass(this.behavior.CSS_REMOVEABLE))&&(a="["+((n=(n=i.exec(e.id))&&n[1])||"0")+"]"+a),e=e.parentNode;return a},_i.prototype.clearSuffix=function(e){if(e)return e=e.replace(/(\[\d+])+(\[])?(-[RHELD])?$/,"$2$3")},_i.prototype.getParentMultipleChoiceWithDefaultValue=function(e){for(var t=e;null!==t.parentElement&&-1===(t=t.parentElement).className.indexOf("oneField"););if(-1===t.className.indexOf("oneField"))return null;for(var n=t.querySelectorAll("option, input"),a=!1,i=0;i<n.length;i++)n[i].getAttribute("data-default-value")&&(a=!0);return a?t:null},_i.prototype.updateAttributes=function(e,t,n){var a=wFORMS.behaviors.hint&&wFORMS.behaviors.hint.isHintId(e.id),i=wFORMS.behaviors.validation&&wFORMS.behaviors.validation.isErrorPlaceholderId(e.id),r=wFORMS.behaviors.calculation&&wFORMS.behaviors.calculation.isHandled(e);if(this.setInDuplicateGroup(e),this.behavior.isHandled(e)&&this.removeHandled(e),e.hasAttribute("disabled")&&"disabled"===e.getAttribute("data-wforms-nooverwrite")){var s=this.getParentMultipleChoiceWithDefaultValue(e);if(s){var o=s.id.split("-")[0];if("INPUT"===e.tagName&&e.getAttribute("data-default-value"))(p=document.createElement("input")).setAttribute("type","hidden"),p.setAttribute("id",o+"-R"),p.setAttribute("name",e.getAttribute("name")),p.setAttribute("value",e.getAttribute("value")),p.setAttribute("data-wforms-repeat-generated",!0),e.parentElement.appendChild(p);else if("SELECT"===e.tagName){for(var l=e.getAttribute("multiple"),c=e.options,u=[],h=0;h<c.length;h++){var d=c[h];d.selected&&u.push(d.value)}for(var p,f=0;f<u.length;f++)(p=document.createElement("input")).setAttribute("type","hidden"),p.setAttribute("id",o+"-R"),p.setAttribute("name",e.getAttribute("name")+(l?"[]":"")),p.value=u[f],p.setAttribute("data-wforms-repeat-generated",!0),e.parentElement.appendChild(p)}}else e.removeAttribute("data-wforms-nooverwrite"),e.removeAttribute("disabled")}"disabled"!==e.getAttribute("data-wforms-nooverwrite")||r||!e.hasAttribute("readonly")||e.value||(e.removeAttribute("data-wforms-nooverwrite"),e.removeAttribute("readonly")),wFORMS.behaviors.switch&&wFORMS.behaviors.switch.isHandled(e)&&wFORMS.behaviors.switch.removeHandle(e),r&&wFORMS.behaviors.calculation.removeHandledFlag(e);for(var g=this.behavior.UPDATEABLE_ATTR_ARRAY.length,v=0;v<g;v++){var m,b=this.behavior.UPDATEABLE_ATTR_ARRAY[v],S=this.clearSuffix(e.getAttribute(b));S&&("name"==b&&"INPUT"==e.tagName&&n||(i&&"id"==b?e.id=S.replace(new RegExp("(.*)("+wFORMS.behaviors.validation.ERROR_PLACEHOLDER_SUFFIX+")$"),"$1"+t+"$2"):a&&"id"==b?e.id=S.replace(new RegExp("(.*)("+wFORMS.behaviors.hint.HINT_SUFFIX+")$"),"$1"+t+"$2"):"id"==b?(m=S.substr(-2),e.id="-L"==m||"-D"==m||"-R"==m?S.substr(0,S.length-2)+t+m:S+t):"name"==b?"[]"==S.substr(-2)?e.name=S.substr(0,S.length-2)+t+"[]":e.name=S+t:e.setAttribute(b,S+t)))}},_i.prototype.getNextDuplicateIndex=function(e){var t=this.getOrCreateCounterField(e),n=[];(e=t.value.split("|"))[1]&&(n=e[1].split(","));e=e[0],e=parseInt(e)+1;return t.value=e+(0<n.length?"|"+n.join(","):""),e},_i.prototype.doesCounterFieldExist=function(e){e=e.id+this.behavior.ID_SUFFIX_COUNTER,e=document.getElementById(e);return!(!e||""==e)},_i.prototype.getOrCreateCounterField=function(e){var t=e.id+this.behavior.ID_SUFFIX_COUNTER;if(!(n=document.getElementById(t))||""==n){for(var n=this.createCounterField(t),a=e.parentNode;a&&"FORM"!=a.tagName.toUpperCase();)a=a.parentNode;a.appendChild(n)}return n},_i.prototype.createCounterField=function(e){return cElem=document.createElement("input"),cElem.id=e,cElem.setAttribute("type","hidden"),cElem.setAttribute("name",e),cElem.value="0",cElem},_i.prototype.getSectionsCount=function(){if(this.behavior.isDuplicate(this.target))return!1;var e=this.getOrCreateCounterField(this.target).value.split("|"),t=parseInt(e[0]);return 1<e.length&&(t-=e[1].split(",").length),t+1},_i.prototype.setInDuplicateGroup=function(e){return e.setAttribute(this.behavior.ATTR_DUPLICATE_ELEM,!0)},_i.prototype.setElementHandled=function(e){return e.setAttribute(this.behavior.ATTR_HANDLED,!0)},_i.prototype.removeHandled=function(e){return e.removeAttribute(this.behavior.ATTR_HANDLED)},_b.isDuplicate=function(e){return e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.CSS_REMOVEABLE)},_b.isMaster=function(e){return e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.CSS_REPEATABLE)},_b.isInDuplicateGroup=function(e){return!!e.getAttribute(this.ATTR_DUPLICATE_ELEM)},_b.getRepeatedElement=function(e){for(;e&&1==e.nodeType&&"BODY"!=e.tagName;){if(base2.DOM.HTMLElement.hasClass(e,this.CSS_REMOVEABLE)||base2.DOM.HTMLElement.hasClass(e,this.CSS_REPEATABLE))return e;e=e.parentNode}return null},_b.isHandled=function(e){return e.getAttribute(this.ATTR_HANDLED)},_b.getMasterSection=function(e){if(!this.isDuplicate(e))return!1;if(e[this.ATTR_MASTER_SECTION])return document.getElementById(e[this.ATTR_MASTER_SECTION]);for(e=e.previousSibling;e&&(1!=e.nodeType||!this.isMaster(e));)e=e.previousSibling;return e},_b.observeMasterIdChange=function(e){this.stopObservingMasterIdChange(e),this._callbacks.onMasterIdChange.push(e)},_b.stopObservingMasterIdChange=function(e){for(var t=0;t<this._callbacks.onMasterIdChange.length;t++)if(this._callbacks.onMasterIdChange[t].toString()==e.toString())return void this._callbacks.onMasterIdChange.splice(t,1)},_i.prototype.callMasterIdChangeObservers=function(e,t){this._idUpdates.master[e]=t;for(var n=0;n<this.behavior._callbacks.onMasterIdChange.length;n++)this.behavior._callbacks.onMasterIdChange[n].call(window,e,t)},_b.observeRepeatIdCreate=function(e){this.stopObservingRepeatIdCreate(e),this._callbacks.onRepeatIdCreate.push(e)},_b.stopObservingRepeatIdCreate=function(e){for(var t=0;t<this._callbacks.onRepeatIdCreate.length;t++)if(this._callbacks.onRepeatIdCreate[t].toString()==e.toString())return void this._callbacks.onRepeatIdCreate.splice(t,1)},_i.prototype.callRepeatIdCreateObservers=function(e,t){this._idUpdates.repeat[e]=t;for(var n=0;n<this.behavior._callbacks.onRepeatIdCreate.length;n++)this.behavior._callbacks.onRepeatIdCreate[n].call(window,e,t)},_b.observeRepeatStart=function(e){this.stopObservingRepeatStart(e),this._callbacks.onRepeatStart.push(e)},_b.stopObservingRepeatStart=function(e){for(var t=0;t<this._callbacks.onRepeatStart.length;t++)if(this._callbacks.onRepeatStart[t].toString()==e.toString())return void this._callbacks.onRepeatStart.splice(t,1)},_i.prototype.callRepeatStartObservers=function(e){for(var t=0;t<this.behavior._callbacks.onRepeatStart.length;t++)this.behavior._callbacks.onRepeatStart[t].call(window,e)},_b.observeRepeatComplete=function(e){this.stopObservingRepeatComplete(e),this._callbacks.onRepeat.push(e)},_b.stopObservingRepeatComplete=function(e){for(var t=0;t<this._callbacks.onRepeat.length;t++)if(this._callbacks.onRepeat[t].toString()==e.toString())return void this._callbacks.onRepeat.splice(t,1)},_i.prototype.callRepeatCompleteObservers=function(e,t){for(var n=0;n<this.behavior._callbacks.onRepeat.length;n++)this.behavior._callbacks.onRepeat[n].call(window,e,t,function e(t){if(null==t||"object"!=typeof t)return t;var n,a=t.constructor();for(n in t)t.hasOwnProperty(n)&&(a[n]=e(t[n]));return a}(this._idUpdates));this._idUpdates={master:{},repeat:{}}},_b.observeRemoveComplete=function(e){this.stopObservingRemoveComplete(e),this._callbacks.onRemove.push(e)},_b.stopObservingRemoveComplete=function(e){for(var t=0;t<this._callbacks.onRemove.length;t++)if(this._callbacks.onRemove[t].toString()==e.toString())return void this._callbacks.onRemove.splice(t,1)},_i.prototype.callRemoveCompleteObservers=function(e){for(var t=0;t<this.behavior._callbacks.onRemove.length;t++)this.behavior._callbacks.onRemove[t].call(window,e)},_i.prototype.run=function(e){var t;wFORMS.LOADER.enabled?(t=this,wFORMS.LOADER.show(t.target),setTimeout(function(){t.duplicateSection(t.target),wFORMS.LOADER.hide(t.target,!0)},1)):this.duplicateSection(this.target),e&&e.preventDefault()},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.condition=function(){"use strict";var DELIMITER="`",CONDITIONAL_ATTRIBUTE_NAME="data-condition",TRIGGER_CONDITIONALS="data-conditionals",TRIGGER_DEFAULT_ENABLED=!0,DEFAULT_NON_EXIST_TRIGGER_VALUE=!1;function _renameTriggers(e,r,s){s=s||[];var t=reduce(e,function(e,t,n){return new Trigger(e).isValid()&&(n[t]=e),n},{}),o=reduce(e,function(e,t,n){return new Conditional(e).isValid()&&(n[t]=e),n},{});map(t,function(a,i){map(new Trigger(a).getConditionals(),function(t){var e=o[t.getIdentifier()]||t.getIdentifier(),n=[e];r[e]&&n.push(r[e]),map(n,function(e){(t=new Conditional(e)).isValid()&&(t.unlinkTriggers(),t.replaceTrigger(i,a),s.push(e),t.linkTriggers())})})})}function _renameConditionals(e,n){var t=reduce(e.repeat,function(e,t,n){return new Conditional(e).isValid()&&(n[t]=e),n},{}),a=map(t,function(e,t){return e});isObjectEmpty(e.master)||(a=a.concat(map(t,function(e,t){return t}))),map(a,function(e){var t=new Conditional(e);t.unlinkTriggers(),t.linkTriggers(),n.push(e)})}function _consolidateTriggers(e,i,r,s){s=s||[],map(reduce(e,function(e,t,n){return new Trigger(t).isValid()&&(n[t]=e),n},{}),function(n,a){map(new Trigger(a).getConditionals(),function(e){var t;!e.isValid()||(t=e.getConditionalElement())&&(isDescendantOf(t,i)||(t=isDescendantOf(t,r)?n:{OR:[a,n]},e.unlinkTriggers(),e.replaceTrigger(a,t),e.linkTriggers(),s.push(e.getIdentifier())))})})}function _detachConditionals(t){var e=base2.DOM.Element.querySelectorAll(t,"["+CONDITIONAL_ATTRIBUTE_NAME+"]"),n=[];e.forEach(function(e){n.push(new Conditional(e,t))}),map(n,function(e){e.unlinkTriggers()})}function _detachTriggers(n){var e=base2.DOM.Element.querySelectorAll(n,"["+TRIGGER_CONDITIONALS+"]"),t=[];e.forEach(function(e){t.push(new Trigger(e,n))}),map(t,function(t){map(t.getConditionals(),function(e){e.isValid()&&(isDescendantOf(e.getConditionalElement(),n)||e.detach(t.getIdentifier()))})})}function _preprocessParameter(e){function t(e,t,n){return n[_escapeQuerySelector("#"+t)]=_escapeQuerySelector("#"+e),n}return e.master=reduce(e.master,t,{}),e.repeat=reduce(e.repeat,t,{}),e}function _escapeQuerySelector(e){return e&&""!==e?e.replace(/\[(\d+)\]/g,function(e,t){return"\\["+t+"\\]"}):null}function map(e,t){if(!e)return null;var n=[];if(e instanceof Array)for(var a=0,i=e.length;a<i;a++)n.push(t(e[a],a));else{if("object"!=typeof e)return null;for(var r in e)void 0!==r&&n.push(t(e[r],r))}return n}function filter(e,t){var n=[];return map(e,function(e){t.apply(null,arguments)&&n.push(e)}),n}function extend(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n,a=arguments[t];for(n in a)e[n]=a[n]}return e}function trim(e){return e.replace(/(^\s+)|(\s+$)/g,"")}function reduce(e,n,a){return a=a||{},map(e,function(e,t){a=n.call(window,e,t,a)}),a}function removeDuplicates(e){var t={},n=[];return map(e,function(e){t[e]||(n.push(e),t[e]=1)}),n}function getOrAssignID(e){if(!isHTMLElement(e))throw new Error("not a dom element");var t;return e.getAttribute("id")||wFORMS.helpers.randomId()&&(e.setAttribute("id",t)||t)}function isDescendantOf(e,t){for(;e;){if(e.parentNode===t)return 1;e=e.parentNode}}function isObjectEmpty(e){return 0===filter(e,function(){return!0}).length}var inArray=wFORMS.helpers.contains,isHTMLElement=wFORMS.helpers.isHTMLElement,Conditional=function(){function Conditional(e,t){if("string"!=typeof(this._conditionalDomIdentifier=e)){e=e;if(this._conditionalDomIdentifier="#"+getOrAssignID(e),!isHTMLElement(e)||!e.hasAttribute(CONDITIONAL_ATTRIBUTE_NAME))throw new Error("this element doesn't have a \""+CONDITIONAL_ATTRIBUTE_NAME+'" attribute')}this._conditionalDomIdentifier=_escapeQuerySelector(this._conditionalDomIdentifier),this.referenceDOMTree=t||document}function PolishExpression(e,t){this.operator=(e+"").toUpperCase(),this.operands=t}extend(PolishExpression.prototype,{toStringy:function(){var e=map(this.operands,function(e){return e instanceof PolishExpression?e.toStringy():" "+e+" "});return"NOT"!==this.operator?1<e.length?" ("+e.join(this.operator)+") ":e[0]:this.operands[0]instanceof PolishExpression?" ( NOT"+e[0]+") ":" ( NOT ("+e[0]+") ) "}});var COMPONENT_PATTERN=new RegExp(DELIMITER+"(.+?)"+DELIMITER+"(?=\\)* OR|\\)* AND|$|\\)+$)","g"),COMPOUND_COMPONENT_PATTERN=new RegExp("((AND)|(OR))\\s*"+DELIMITER+"([^"+DELIMITER+"]+)"+DELIMITER,"g"),BRACKETED_SINGLE_TRIGGER_PATTERN=new RegExp("\\(\\s*"+DELIMITER+"([^"+DELIMITER+"]+)"+DELIMITER+"\\s*\\)","g");function _getActiveTriggers(e){return filter(e.getTriggers(),function(e){return null!==e.getTriggerElement()})}function _mergeImplicitRules(){for(var e=this.getConditionRuleString(),t=!1,n=this.getConditionalElement(),a=n.parentNode;a&&1==a.nodeType;){var i=a.getAttribute(CONDITIONAL_ATTRIBUTE_NAME);i&&-1===e.indexOf("AND ("+i+")")&&(e="("+e+") AND ("+i+")",t=!0),a=a.parentNode}t&&(this.unlinkTriggers(),n.setAttribute(CONDITIONAL_ATTRIBUTE_NAME,e),this.linkTriggers())}return extend(Conditional.prototype,{getConditionRuleString:function(){var e=this.getConditionalElement();return e?e.getAttribute(CONDITIONAL_ATTRIBUTE_NAME):null},getTriggers:function(){var e=this.getConditionRuleString();if(!e)return null;var t,n=[];for(COMPONENT_PATTERN.lastIndex=0;t=COMPONENT_PATTERN.exec(e);)n.push(t[1]);return map(n,function(e){try{return new Trigger(e)}catch(e){return null}})},getConditionalElement:function(){try{return base2.DOM.Element.querySelector(this.referenceDOMTree,this._conditionalDomIdentifier)}catch(e){return null}},getIdentifier:function(){return this._conditionalDomIdentifier},equals:function(e){if(this.getIdentifier()===e.getIdentifier())return!0;var t=this.getConditionalElement(),e=e.getConditionalElement();return!(!e||!t)&&e===t},linkTriggers:function(){var t;map(_getActiveTriggers(this),(t=this,function(e){e.addConditional(t)}))},unlinkTriggers:function(){var t;map(_getActiveTriggers(this),(t=this,function(e){e.removeConditional(t)}))},refresh:function(){this.isConditionMet()?this.show():this.hide();var e=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(this.getConditionalElement()),"paging");e&&e.setupManagedControls()},isConditionMet:function(){_mergeImplicitRules.call(this);var conditionRuleString=this.getConditionRuleString();if(!conditionRuleString)throw new Error("The inferred DOM element doesn't have a rule string");COMPONENT_PATTERN.lastIndex=0;var rawBooleanExpression=conditionRuleString.replace(COMPONENT_PATTERN,function(e,t){return new Trigger(t.split(",")[0]).getValue(t)?"true":"false"}),booleanExpression=rawBooleanExpression.replace(/AND/g," && ").replace(/OR/g," || ").replace(/NOT/g," ! ");return eval(booleanExpression)},show:function(){var e=this.getConditionalElement(),t=e.id;if("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||base2.DOM.HTMLElement.hasClass(e,"choices")){for(var n=e.parentNode;n&&1==n.nodeType&&!base2.DOM.HTMLElement.hasClass(n,"oneField");)n=n.parentNode;n&&1==n.nodeType&&base2.DOM.HTMLElement.hasClass(n,"oneField")?e=n:"INPUT"==e.tagName&&(e._wforms_disabled&&e.removeAttribute("disabled"),e.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(e).trigger(),this.flagCalculationForUpdate(e))}else base2.DOM.HTMLElement.hasClass(e,"pageSection")&&(e=e.parentNode);var i=this,r=function(e){switch(e.tagName){case"INPUT":(e._wforms_disabled&&"disabled"!==e.getAttribute("data-wforms-nooverwrite")||"radio"!==e.type&&"checkbox"!==e.type)&&e.removeAttribute("disabled"),e.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(e).trigger(),i.flagCalculationForUpdate(e);break;case"TEXTAREA":e._wforms_disabled&&e.removeAttribute("disabled"),i.flagCalculationForUpdate(e);break;case"SELECT":e._wforms_disabled&&"disabled"!==e.getAttribute("data-wforms-nooverwrite")&&e.removeAttribute("disabled");for(var t=e.getElementsByTagName("OPTION"),n=0;n<t.length;n++)t[n].getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(t[n]).trigger();i.flagCalculationForUpdate(e);break;default:for(var a=0;a<e.childNodes.length;a++)1!=e.childNodes[a].nodeType||wFORMS.behaviors.condition.hasOffState(e.childNodes[a])||r(e.childNodes[a])}};r(e);var a,s,o=document.getElementById("tfa_switchedoff");if(o)for(s in a=o.value?o.value.split(","):[])if(a[s]==t){a.splice(s,1),o.value=a.join(",");break}base2.DOM.HTMLElement.removeClass(e,"offstate");var l=wFORMS.getBehaviorInstance(e,"repeat");l&&l.behavior.isHandled(e)&&base2.DOM.HTMLElement.removeClass(l.getOrCreateRepeatLink(e),"offstate"),wFORMS.behaviors.condition.onShow&&wFORMS.behaviors.condition.onShow(this)},hide:function(){var e=this.getConditionalElement(),t=e.id;if("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||base2.DOM.HTMLElement.hasClass(e,"choices")){for(var n=e.parentNode;n&&1==n.nodeType&&!base2.DOM.HTMLElement.hasClass(n,"oneField");)n=n.parentNode;n&&1==n.nodeType&&base2.DOM.HTMLElement.hasClass(n,"oneField")?e=n:"INPUT"==e.tagName&&(e.disabled=!0,e._wforms_disabled=!0,e.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(e).trigger(),this.flagCalculationForUpdate(e))}else base2.DOM.HTMLElement.hasClass(e,"pageSection")&&(e=e.parentNode);for(var a=e.getElementsByTagName("INPUT"),i=0;i<a.length;i++)a[i].disabled=!0,a[i]._wforms_disabled=!0,a[i].getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(a[i]).trigger(),this.flagCalculationForUpdate(a[i]);for(a=e.getElementsByTagName("TEXTAREA"),i=0;i<a.length;i++)a[i].disabled=!0,a[i]._wforms_disabled=!0,this.flagCalculationForUpdate(a[i]);for(a=e.getElementsByTagName("SELECT"),i=0;i<a.length;i++){a[i].disabled=!0,a[i]._wforms_disabled=!0;for(var r=a[i].getElementsByTagName("OPTION"),s=0;s<r.length;s++)r[s].getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(r[s]).trigger();this.flagCalculationForUpdate(a[i])}var o,l=document.getElementById("tfa_switchedoff");if(l){for(i in o=l.value?l.value.split(","):[])if(o[i]==t){o.splice(i,1);break}o.push(t),l.value=o.join(",")}base2.DOM.HTMLElement.addClass(e,"offstate");l=wFORMS.getBehaviorInstance(e,"repeat");l&&l.behavior.isHandled(e)&&base2.DOM.HTMLElement.addClass(l.getOrCreateRepeatLink(e),"offstate"),wFORMS.behaviors.condition.onHide&&wFORMS.behaviors.condition.onHide(this)},isValid:function(){return this.getConditionalElement()&&this.getConditionRuleString()},replaceTrigger:function(a,i){"string"==typeof i&&(i={AND:i}),i=Conditional.makeConditionRules(i);var e=this.getConditionRuleString();if(!e)throw new Error("The inferred DOM element doesn't have a rule string");COMPONENT_PATTERN.lastIndex=0,e=e.replace(COMPONENT_PATTERN,function(e,t){var n=t.split(",")[0];return n===a?i.includes(" OR ")?t.replace(n,"("+i.slice(3,-3)+")"):e.replace(n,i.slice(2,-2)):e}),this.getConditionalElement().setAttribute(CONDITIONAL_ATTRIBUTE_NAME,e)},detach:function(t){var e=this.getConditionRuleString();if(!e)throw new Error("The inferred DOM element doesn't have a rule string");COMPOUND_COMPONENT_PATTERN.lastIndex=0,e=e.replace(COMPOUND_COMPONENT_PATTERN,function(e){return _escapeQuerySelector(arguments[4])===t?"":e}),BRACKETED_SINGLE_TRIGGER_PATTERN.lastIndex=0,e=e.replace(BRACKETED_SINGLE_TRIGGER_PATTERN,function(e,t){return DELIMITER+t+DELIMITER}),this.getConditionalElement().setAttribute(CONDITIONAL_ATTRIBUTE_NAME,e)},flagCalculationForUpdate:function(e){wFORMS.behaviors.condition.calculationInstance||(wFORMS.behaviors.condition.calculationInstance=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(e),"calculation"));var t=wFORMS.behaviors.condition.calculationInstance;if(t&&t.isVariable(e))for(var n=t.getCalculatedFields(e),a=0;a<n.length;a++)wFORMS.behaviors.condition._dirtyCalculations[n[a].id]=n[a]}}),extend(Conditional,{makeConditionRules:function(e){e=function t(e){if("string"==typeof(a=e=e||{})||isHTMLElement(a)||!(a=filter(a||{},function(e,t){return inArray(["NOT","AND","OR"],(t||"").toUpperCase())}))||0===a.length)return isHTMLElement(r=n=e)&&(r="#"+(n.getAttribute("id")||(a=wFORMS.helpers.randomId())&&(n.setAttribute("id",a)||a))),DELIMITER+r+DELIMITER;var n,a;if((r=e)instanceof Array||r.constructor===Object&&1<map(r,function(e,t){return t}).length)return new PolishExpression("AND",map(filter(map(e,function(e,t){var n={};return n[(t||"").toUpperCase()]=e,n}),function(e){return e=map(e,function(e,t){return t}),inArray(["NOT","AND","OR"],e[0])}),t));var i,r=(i={},map(e,function(e,t){i.name=t,i.value=e}),i),e=r.value;e instanceof Array||(e=[e]);var s=[];return map(e,function(e){(e=t(e))instanceof Array?s=s.concat(e):s.push(e)}),new PolishExpression(r.name,s)}(e);return e&&e.toStringy()||null}})}(),Trigger=(extend(vr.prototype,{attachedConditionals:[],_getConditionalsPattern:function(){return xr(this.getConditionals())},setEventListener:function(){var e=this.getTriggerElement();if(e&&"OPTION"==e.tagName)for(;e&&"SELECT"!=e.tagName;)e=e.parentNode;if(e&&!e.__wforms_event_handled)if("INPUT"==e.tagName&&"radio"==e.getAttribute("type")){var t=e.form[e.getAttribute("name")];t.length||(t=[t]);for(var n=0;n<t.length;n++){var a=t[n];base2.DOM.Element.addEventListener(a,"click",EventHandlers.onChange,!1),a.__wforms_event_handled=!0}}else{var i="blur";"INPUT"===e.tagName&&"checkbox"===e.getAttribute("type")&&(i="click"),"SELECT"===e.tagName&&(i="change"),base2.DOM.Element.addEventListener(e,i,EventHandlers.onChange,!1),e.__wforms_event_handled=!0}},getIdentifier:function(){return this._triggerElementIdentifier},getTriggerElement:function(){try{return this.getIdentifier().includes(",")?base2.DOM.Element.querySelector(this.referenceDOMTree,this.getIdentifier().split(",")[0]):base2.DOM.Element.querySelector(this.referenceDOMTree,this.getIdentifier())}catch(e){return null}},getValue:function(e=null){var t=this.getTriggerElement();if(!t)return DEFAULT_NON_EXIST_TRIGGER_VALUE;if(t.disabled&&"disabled"!=t.getAttribute("data-wforms-nooverwrite"))return!1;if("OPTION"===t.tagName){for(var n=t.parentNode;n&&"SELECT"!=n.tagName;)n=n.parentNode;if(n&&n.disabled&&"disabled"!=n.getAttribute("data-wforms-nooverwrite"))return!1}if("INPUT"===t.tagName){var a=base2.DOM.Element.getAttribute(t,"type");if("checkbox"===a||"radio"===a)return!!t.checked;if("text"===a){var i=t.value;if(!e)return 0!==trim(t.value).length;var[,e,...r]=e.split(","),r=r.join(",");switch(e){case"equals":return i===r;case"notEquals":return i.length?i!==r:!1;case"contains":return i.includes(r);case"notContains":return i.length?!i.includes(r):!1;case"startsWith":return i.length?i.startsWith(r):!1;case"notStartsWith":return i.length?!i.startsWith(r):!1;case"endsWith":return i.length?i.endsWith(r):!1;case"notEndsWith":return i.length?!i.endsWith(r):!1;case"before":return i.length?new Date(i)<new Date(r):!1;case"after":if(i.length){var s=new Date(i);return new Date(r)<s}return!1;case"same":if(i.length){let e=new Date(i),t=new Date(r);return e.getTime()===t.getTime()}return!1;case"eq":return i.length?Number(i)===Number(r):!1;case"neq":return i.length?Number(i)!==Number(r):!1;case"gt":return i.length?Number(i)>Number(r):!1;case"gte":return i.length?Number(i)>=Number(r):!1;case"lt":return i.length?Number(i)<Number(r):!1;case"lte":return i.length?Number(i)<=Number(r):!1;default:return!1}}}else{if("TEXTAREA"===t.tagName)return 0!==trim(t.value).length;if("OPTION"===t.tagName)return t.selected;if("SELECT"===t.tagName){if(0<t.selectedIndex)return!0;for(var o=0,l=t.options.length;o<l;o++){var c=t.options[o];if(c.selected&&0<trim(c.value).length)return!0}return!1}}return!1},getConditionals:function(){return(e=(e=this).getTriggerElement())&&(e=e.getAttribute(TRIGGER_CONDITIONALS))?map(e.split(","),function(e){try{return new Conditional(trim(e))}catch(e){return null}}):[];var e},replaceConditionals:function(e){return yr(this,e)},addConditional:function(t){var e=this.getConditionals();return 0!==filter(e,function(e){return e.equals(t)}).length?null:(e.push(t),yr(this,e))},removeConditional:function(n){var e=this.getConditionals();return yr(this,filter(e,function(e,t){return!e.equals(n)}))},trigger:function(){var e=this.getTriggerElement();wFORMS.behaviors.condition._triggerChain&&e.id in wFORMS.behaviors.condition._triggerChain||(wFORMS.behaviors.condition._triggerChain[e.id]=!0,map(filter(this.getConditionals(),function(e){return e&&e.getConditionalElement()}),function(e){e.refresh()}))},isValid:function(){var e;return(e=this.getTriggerElement())&&e.getAttribute(TRIGGER_CONDITIONALS)}}),vr);function vr(e,t){var n=e;"string"!=typeof e&&(n="#"+getOrAssignID(e)),this._triggerElementIdentifier=_escapeQuerySelector(n),this.referenceDOMTree=t||document}function xr(e){return map(e,function(e){return e.getIdentifier()}).join(",")}function yr(e,t){if(!(t=filter(t,function(e){return e instanceof Conditional})))return null;e=e.getTriggerElement();if(!isHTMLElement(e))throw new Error("Cannot store Conditionals to this Trigger object. The inferred DOM object doesn't exist");t=xr(t);return e.setAttribute(TRIGGER_CONDITIONALS,t),t}var EventHandlers={onChange:function(e){var t=e.target||e;if(t){if(wFORMS.behaviors.condition.resetTriggerExecutionChain(),"SELECT"===t.tagName)for(var n=0;n<t.options.length;n++){var a=t.options[n];a.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(a).trigger()}else if("INPUT"===t.tagName&&"radio"===t.getAttribute("type")){var e=t.getAttribute("name"),i=t.form[e];i.length||(i=[i]);for(n=0;n<i.length;n++){var r=i[n];new Trigger(r).trigger()}}else t.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(t).trigger();if(wFORMS.instances.responsive&&wFORMS.instances.responsive[0])for(n=0;n<wFORMS.instances.responsive.length;n++)wFORMS.instances.responsive[n].handleAllMatrixLayouts(),wFORMS.instances.responsive[n].handleAllGridLayouts();wFORMS.behaviors.condition.updateCalculations()}},onRepeatableDuplicated:function(e,t,n){var a=[];wFORMS.behaviors.condition.resetTriggerExecutionChain();var i=reduce((n=_preprocessParameter(n)).repeat,function(e,t,n){return new Conditional(t).isValid()&&(n[t]=e),n},{});_renameTriggers(n.master,i,a),_renameConditionals(n,a),_consolidateTriggers(n.repeat,e,t,a),map(removeDuplicates(a),function(e){new Conditional(e).refresh()}),wFORMS.behaviors.condition.updateCalculations()},onRepeatableRemoved:function(e){_detachConditionals(e),_detachTriggers(e),wFORMS.behaviors.condition.updateCalculations()}};return{skip:!1,onHide:function(e){},onShow:function(e){},onSetupFinish:function(e){},applyTo:function(e){if(this.target=e,wFORMS.behaviors.condition.skip)return null;this.resetTriggerExecutionChain();var t=base2.DOM.Element.querySelectorAll(e,"["+TRIGGER_CONDITIONALS+"]");return t.forEach(function(e){e=new Trigger(e);e.trigger(),e.setEventListener()}),wFORMS.behaviors.condition.updateCalculations(),0<t.length&&wFORMS.behaviors.repeat&&(wFORMS.behaviors.repeat.observeRepeatComplete(EventHandlers.onRepeatableDuplicated),wFORMS.behaviors.repeat.observeRemoveComplete(EventHandlers.onRepeatableRemoved)),this.onSetupFinish(e),this},getConditional:function(e){return new Conditional(e)},getTrigger:function(e){return new Trigger(e)},Conditional:Conditional,Trigger:Trigger,mockup:function(){},refresh:EventHandlers.onChange,isInitialized:function(){return initialized},hasOffState:function(e){return base2.DOM.HTMLElement.hasClass(e,"offstate")},resetTriggerExecutionChain:function(){wFORMS.behaviors.condition._triggerChain={},wFORMS.behaviors.condition._dirtyCalculations={}},updateCalculations:function(){for(var e in wFORMS.behaviors.condition._dirtyCalculations){e=wFORMS.behaviors.condition._dirtyCalculations[e];wFORMS.behaviors.condition.calculationInstance||(wFORMS.behaviors.condition.calculationInstance=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(e),"calculation")),wFORMS.behaviors.condition.calculationInstance.refresh(null,e)}wFORMS.behaviors.condition._dirtyCalculations={}}}}(),"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.validation={skip:!1,ERROR_PLACEHOLDER_SUFFIX:"-E",LOWER_BOUND_ATTRIBUTE:"min",UPPER_BOUND_ATTRIBUTE:"max",rules:{oneRequired:{selector:".required-one",check:"validateOneRequired"},isRequired:{selector:".required",check:"validateRequired"},isAlpha:{selector:".validate-alpha",check:"validateAlpha"},isAlphanum:{selector:".validate-alphanum",check:"validateAlphanum"},isDateTime:{selector:".validate-datetime",check:"validateDateTime"},isDate:{selector:".validate-date, .validate-datecal",check:"validateDate",range_verifier:"dateRangeTest",range_error_message:"rangeDate"},isTime:{selector:".validate-time",check:"validateTime",range_verifier:"timeRangeTest",range_error_message:"rangeTime"},isEmail:{selector:".validate-email",check:"validateEmail"},isInteger:{selector:".validate-integer",check:"validateInteger",range_verifier:"numberRangeTest",range_error_message:"rangeNumber"},isFloat:{selector:".validate-float",check:"validateFloat",range_verifier:"numberRangeTest",range_error_message:"rangeNumber"},isPhone:{selector:".validate-phone",check:"validatePhone"},isCustom:{selector:".validate-custom",check:"validateCustom"},wordCount:{selector:".count-words",check:"validateWordCount"},isHostname:{selector:".validate-hostname",check:"validateHostname"},restrictAutosuggest:{selector:'.wfAutosuggest[data-dataset-allow-free-responses="0"][id]',check:"validateRestrictAutosuggest"}},styling:{fieldError:"errFld",errorMessage:"errMsg",linkedErrorMessage:"linkedErrMsg",errorLink:"errLink"},messages:{oneRequired:"This section is required.",isRequired:"This field is required.",isAlpha:"The text must use alphabetic characters only (a-z, A-Z). Numbers are not allowed.",isEmail:"This does not appear to be a valid email address.",isInteger:"Please enter an integer.",isFloat:"Please enter a number (ex. 1.9).",isAlphanum:"Please use alpha-numeric characters only [a-z 0-9].",isDateTime:"This does not appear to be a valid date/time.",isDate:"This does not appear to be a valid date.",isTime:"This does not appear to be a valid time.",isPhone:"Please enter a valid phone number.",isCustom:"Please enter a valid value.",wordCount:"This field is over the word limit.",wordsRemPos:"words remaining",wordsRemNeg:"words over the limit",notification:"The form is not complete and has not been submitted yet. There was %% problem(s) with your submission.",rangeNumber:{max:"The value must be smaller than the upper bound %1",min:"The value must be greater than the lower bound %1",both:"The entered value must be between %1 - %2"},rangeDate:{max:"The date must be on or before %1.",min:"The date must be on or after %1.",both:"This date must be between %1 - %2.",cont:"This field determines the date range for %1.",dep:"Could not validated date. This field is dependent on %1.",link:"another field"},rangeTime:{max:"The time must be on or before %1.",min:"The time must be on or after %1.",both:"This time must be between %1 - %2.",cont:"This field determines the time range for %1.",dep:"Could not validated time. This field is dependent on %1.",link:"another field"},restrictAutosuggest:"You must select an item from the list",wait:"Please wait..."},instance:function(e){this.behavior=wFORMS.behaviors.validation,this.target=e;var t=this;e.__wFormsValidationHandled||(e.addEventListener||wFORMS.standardizeElement(e),e.addEventListener("submit",function(e){wFORMS.behaviors.validation.saveButtonIsEnabled()?(e.preventDefault(),wFORMS.behaviors.validation.saveCheckFunc(e,document.getElementById("tfa_resumeLater"))):t.run(e,this)},!1),e.__wFormsValidationHandled=!0)},onPass:function(e,t){},onFail:function(n,e){var t,a=null,i=0;for(r in n.elementsInError)i++,a=a||r;if(t=(t=1==i?wFORMS.behaviors.validation.messages.notification_0:wFORMS.behaviors.validation.messages.notification).replace("%%",i),wFORMS.behaviors.paging&&wFORMS.behaviors.paging.showTabNavigation){n.errorPages=new Array;var r,s=9999;for(r in n.elementsInError){var o=wFORMS.behaviors.paging.helpers.findPage(document.getElementById(r));o&&((o=wFORMS.behaviors.paging.getPageIndex(o))<s&&(s=o),"object"==typeof n.errorPages[o]||(n.errorPages[o]=new Array),n.errorPages[o].push(r))}var l=wFORMS.getBehaviorInstance(n.target,"paging");l.jumpTo(s);var c=base2.DOM.Element.querySelectorAll(n.target.parentNode,'a[id^="'+l.behavior.CSS_PAGETAB+'"]');(c=!c.forEach?base2.JavaScript.Array2(c):c).forEach(function(e){e.removeClass&&e.hasClass&&e.addClass||wFORMS.standardizeElement(e),e.removeClass("errMsg")}),n.errorPages.forEach||(n.errorPages=base2.JavaScript.Array2(n.errorPages)),n.errorPages.forEach(function(e,t){t=base2.DOM.Element.querySelector(n.target.parentNode,"#"+l.behavior.CSS_PAGETAB+"_"+t);t&&(t.addClass||wFORMS.standardizeElement(t),t.addClass("errMsg"))})}c=document.getElementById(a);c.scrollIntoView?c.scrollIntoView():location.hash="#"+a,wFORMS.behaviors.validation.alert(t,c)},alert:function(e,t){alert(e),void 0!==t&&t.focus()},dateRegex:function(){var e="(\\d{1,4}|\\d{1,2})",t="(\\d{1,2}|((January)|(February)|(March)|(April)|(May)|(June)|(July)|(August)|(September)|(October)|(November)|(December)|(Jan)|(Feb)|(Mar)|(Apr)|(May)|(Jun)|(Jul)|(Aug)|(Sep)|(Oct)|(Nov)|(Dec)))",n="\\d{1,2}((th)|(rd)|(nd)|(st))?",a="\\s*[-/\\\\|\\,\\.]?\\s*",t="(("+t+a+n+")|("+n+a+t+")|("+t+"))",a="(("+e+a+t+")|("+t+a+e+")|"+t+")",e="((1[012]|[1-9])\\s*[:-]?\\s*([0-5][0-9])?\\s*(a|am|p|pm))",t="(([0-1]?[0-9]|2[0-4])\\s*[:-]?\\s*[0-5][0-9](\\s*[:-]?\\s*[0-5][0-9])?)";return[new RegExp("^"+a+"\\s+"+e+"$","i"),new RegExp("^"+a+"\\s+"+t+"$","i"),new RegExp("^"+e+"\\s+"+a+"$","i"),new RegExp("^"+t+"\\s+"+a+"$","i"),new RegExp("^"+a+"$","i"),new RegExp("^"+e+"$","i"),new RegExp("^"+t+"$","i")]}()},wFORMS.behaviors.validation.rules.isDate.fail=function(e,t){var n,i=this;function a(e,t,n){var e=base2.DOM.HTMLDocument.querySelector(i.target,wFORMS.helpers.escapeQuerySelector("#"+e)),a=base2.DOM.HTMLDocument.querySelector(i.target,wFORMS.helpers.escapeQuerySelector("#"+t));n&&i.addErrorMessage(e,wFORMS.behaviors.validation.messages.rangeDate.cont,!0);n=base2.DOM.HTMLDocument.querySelector(i.target,wFORMS.helpers.escapeQuerySelector("#"+e.id+wFORMS.behaviors.validation.ERROR_PLACEHOLDER_SUFFIX)),e=document.createElement("span");e.setAttribute("class","errLink"),e.textContent=wFORMS.behaviors.validation.messages.rangeDate.link,n.innerHTML=n.innerHTML.replace(/%1/,e.outerHTML),n.getElementsByClassName(wFORMS.behaviors.validation.styling.errorLink)[0].onclick=function(){wFORMS.behaviors.validation.moveToLinkedDate.call(a)}}t.match(/%%(.+)%%/)&&(n=t.match(/%%(.+)%%/)[1],t=t.replace(/%%(.+)%%/,"%1")),this.fail(e,t),n&&(a(n,e.id,!0),a(e.id,n))},wFORMS.behaviors.validation.applyTo=function(e){if(wFORMS.behaviors.validation.skip)return null;if(!e||!e.tagName)throw new Error("Can't apply behavior to "+e);if("FORM"!=e.tagName)if(e.form)e=e.form;else{var t=e;for(e=e.parentNode;e&&"FORM"!=e.tagName;e=e.parentNode)continue;e&&"FORM"==e.tagName||(e=t.getElementsByTagName("form"))}if(!e.tagName&&0<e.length)for(var n=new Array,a=0;a<e.length;a++){var i=new wFORMS.behaviors.validation.instance(e[a]);n.push(i),i.onApply()}else(n=new wFORMS.behaviors.validation.instance(e)).onApply();return n},wFORMS.behaviors.validation.instance.prototype.onApply=function(){var t,n=this;wFORMS.behaviors.repeat&&!wFORMS.behaviors.repeat.handlingRepeatedErrors&&(wFORMS.behaviors.repeat.handlingRepeatedErrors=!0,t=wFORMS.behaviors.repeat.onRepeat,wFORMS.behaviors.repeat.onRepeat=function(e){e&&n.removeErrorMessage(e),base2.DOM.Element.querySelectorAll(e,"*").forEach(function(e){n.removeErrorMessage(e)}),t&&t.apply(this,arguments)},wFORMS.behaviors.repeat.observeRepeatComplete(this.repeatHandler))},wFORMS.behaviors.validation.instance.prototype.run=function(e,t){if(e&&e.pagingStopPropagation)return!1;function n(e){var t,n,a;wFORMS.behaviors.paging&&!wFORMS.behaviors.paging.showTabNavigation&&!wFORMS.behaviors.paging.isElementVisible(e)||o.isSwitchedOff(e)||(a=wFORMS.helpers.getFieldValue(e),t=(s.check.call?s.check:o[s.check]).call(o,e,a),n=i,!t||void 0===s.range_verifier||!0!==(a=o[s.range_verifier].call(o,e,a,wFORMS.behaviors.validation.messages[s.range_error_message]))&&(t=!1)!==a&&(n=a),t?(o.elementsInError[e.id]||o.removeErrorMessage(e),(s.pass?s:o).pass.call(o,e)):(e.id||(e.id=wFORMS.helpers.randomId()),o.elementsInError[e.id]={id:e.id,rule:i},o.removeErrorMessage(e),(s.fail?s:o).fail.call(o,e,n),r++))}var i,a,r=0;for(i in this.elementsInError={},this.behavior.rules){var s=this.behavior.rules[i],o=this;t.matchesSelector||wFORMS.standardizeElement(t),!(t=!t.matchesSelector?base2.DOM.bind(t):t).matchesSelector&&t.msMatchesSelector&&(t.matchesSelector=t.msMatchesSelector),!t.matchesSelector&&t.mozMatchesSelector&&(t.matchesSelector=t.mozMatchesSelector),!t.matchesSelector&&t.webkitMatchesSelector&&(t.matchesSelector=t.webkitMatchesSelector),t.matchesSelector||(t.matchesSelector=base2.DOM.Element.matchesSelector),t.matchesSelector(s.selector)&&n(t),t.querySelectorAll(s.selector).forEach(n)}return 0<r?(e&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.behavior.onFail&&this.behavior.onFail(this,e),!1):(!e||"submit"!=e.type||-1==(a=base2.DOM.Element.querySelector(this.target,'.actions .primaryAction[type="submit"]')).className.indexOf("wfHideSubmit")&&(a.setAttribute("disabled","disabled"),a.setAttribute("style","color: grey"),a.setAttribute("value",wFORMS.behaviors.validation.messages.wait)),this.behavior.onPass&&this.behavior.onPass(this,e),!0)},wFORMS.behaviors.validation.instance.prototype.fail=function(e,t){var n,a,i=document.getElementById(e.id+"-D");!i&&wFORMS.behaviors.repeat&&e.id&&(n=e.id.replace(/(\[\d+\])+(\-[HED])?$/,"$2"),a=e.id.split(n).join(""),n+="-D",a&&(n+=a),i=document.getElementById(n)),i?(i.hasClass&&i.addClass||wFORMS.standardizeElement(i),i.addClass(this.behavior.styling.fieldError)):(e.hasClass&&e.addClass||wFORMS.standardizeElement(e),e.addClass(this.behavior.styling.fieldError));t=t in this.behavior.messages?this.behavior.messages[t]:t;this.addErrorMessage(e,t)},wFORMS.behaviors.validation.instance.prototype.pass=function(e){},wFORMS.behaviors.validation.instance.prototype.addErrorMessage=function(e,t,n){e.id||(e.id=wFORMS.helpers.randomId());var a=document.createElement("span");a.appendChild(document.createTextNode(t)),e.removeClass&&e.hasClass&&e.addClass||wFORMS.standardizeElement(e),n&&a.setAttribute("class",this.behavior.styling.linkedErrorMessage);t=document.getElementById(e.id+this.behavior.ERROR_PLACEHOLDER_SUFFIX);t?t.appendChild(document.createElement("br")):((t=document.createElement("div")).setAttribute("id",e.id+this.behavior.ERROR_PLACEHOLDER_SUFFIX),t="TR"==e.tagName?(0<e.getElementsByTagName("TH").length?e.getElementsByTagName("TH"):e.getElementsByTagName("TD"))[0].appendChild(t):e.hasClass("wfSection")||e.hasClass("inlineSection")?e.appendChild(t):(n=document.getElementById(e.id+"-D"))?n.appendChild(t):e.parentNode.insertBefore(t,e.nextSibling)),t.appendChild(a),wFORMS.standardizeElement(t),t.addClass(this.behavior.styling.errorMessage),e.setAttribute("aria-invalid","true");for(var a=e.getAttribute("aria-describedby"),i=a?a.split(" "):[],r=0;r<i.length&&i[r]!=e.getAttribute("id")+"-E";r++);r==i.length&&i.push(e.getAttribute("id")+"-E"),e.setAttribute("aria-describedby",i.join(" ")),t.setAttribute("tabindex","-1")},wFORMS.behaviors.validation.instance.prototype.removeErrorMessage=function(e){var t=document.getElementById(e.id+"-D");e.hasClass||wFORMS.standardizeElement(e),e.addClass||wFORMS.standardizeElement(e),e.removeClass||wFORMS.standardizeElement(e),t&&!t.hasClass&&wFORMS.standardizeElement(t),t&&!t.addClass&&wFORMS.standardizeElement(t),t&&!t.removeClass&&wFORMS.standardizeElement(t),e.hasClass(this.behavior.styling.fieldError)&&e.removeClass(this.behavior.styling.fieldError),t&&t.hasClass(this.behavior.styling.fieldError)&&t.removeClass(this.behavior.styling.fieldError),e.setAttribute("aria-invalid","false");for(var n=e.getAttribute("aria-describedby"),a=n?n.split(" "):[],i=0;i<a.length&&a[i]!=e.getAttribute("id")+"-E";i++);i<a.length&&a.splice(i,1),e.setAttribute("aria-describedby",a.join(" "));t=document.getElementById(e.id+this.behavior.ERROR_PLACEHOLDER_SUFFIX);t?t.parentNode.removeChild(t):e.id&&(n=e.id.split("-D").join(""),(t=document.getElementById(n+this.behavior.ERROR_PLACEHOLDER_SUFFIX))&&t.parentNode.removeChild(t))},wFORMS.behaviors.validation.instance.prototype.isSwitchedOff=function(e){switch(e.tagName){case"INPUT":case"TEXTAREA":case"SELECT":return!!e.disabled;default:if(!0===e.disabled)return!0;for(var t=e.getElementsByTagName("INPUT"),n=0;n<t.length;n++)if(!t[n].disabled)return!1;for(t=e.getElementsByTagName("TEXTAREA"),n=0;n<t.length;n++)if(!t[n].disabled)return!1;t=e.getElementsByTagName("SELECT");for(n=0;n<t.length;n++)if(!t[n].disabled)return!1;return!0}},wFORMS.behaviors.validation.isErrorPlaceholderId=function(e){return null!=e.match(new RegExp(wFORMS.behaviors.validation.ERROR_PLACEHOLDER_SUFFIX+"$"))},wFORMS.behaviors.validation.instance.prototype.isEmpty=function(e){return null==e||0==e.length||/^\s+$/.test(e)},wFORMS.behaviors.validation.instance.prototype.validateRestrictAutosuggest=function(e,t){return""===t||t===e.getAttribute("data-selected")},wFORMS.behaviors.validation.instance.prototype.validateRequired=function(e,t){if(e.getAttribute("class")&&-1!=e.getAttribute("class").indexOf("tt-hint"))return!0;switch(e.tagName){case"INPUT":switch((e.getAttribute("type")||"text").toLowerCase()){case"checkbox":case"radio":return e.checked;case"file":var n=document.getElementById("tfa_uploadDelete_"+e.id);return this.isEmpty(t)?n&&!n.checked:!0;default:return!this.isEmpty(t)}break;case"SELECT":case"TEXTAREA":return!this.isEmpty(t);default:return this.validateOneRequired(e)}return!1},wFORMS.behaviors.validation.instance.prototype.validateOneRequired=function(e){if(1!=e.nodeType)return!1;if(this.isSwitchedOff(e))return!1;switch(e.tagName){case"INPUT":switch((e.getAttribute("type")||"text").toLowerCase()){case"checkbox":case"radio":return e.checked;case"file":var t=document.getElementById("tfa_uploadDelete_"+e.id);return this.isEmpty(wFORMS.helpers.getFieldValue(e))?t&&!t.checked:!0;default:return!this.isEmpty(wFORMS.helpers.getFieldValue(e))}break;case"SELECT":case"TEXTAREA":return!this.isEmpty(wFORMS.helpers.getFieldValue(e));default:for(var n=0;n<e.childNodes.length;n++)if(this.validateOneRequired(e.childNodes[n]))return!0}return!1},wFORMS.behaviors.validation.instance.prototype.validateAlpha=function(e,t){return this.isEmpty(t)||/^[a-zA-Z\s]+$/.test(t)},wFORMS.behaviors.validation.instance.prototype.validateAlphanum=function(e,t){return this.isEmpty(t)||/^[\w\s]+$/.test(t)},wFORMS.behaviors.validation.instance.prototype.validateHostname=function(e,t){return this.isEmpty(t)||/^[a-z0-9](-(?!($|\.))|\.(?!$)|[a-z0-9]){0,}$/i.test(t)},wFORMS.behaviors.validation.instance.prototype.validateDateTime=function(e,t){if(this.isEmpty(t))return!0;for(var n=wFORMS.behaviors.validation.dateRegex,a=0;a<n.length-1;a++)if(n[a].test(t))return!0;return!1},wFORMS.behaviors.validation.instance.prototype.validateDate=function(e,t){return!!this.isEmpty(t)||!(null===this.analyzeDateComponents(t))},wFORMS.behaviors.validation.relativeDate=function(e,t,n,a){this.sign=e,this.qty=t||0,this.unit=n||"Days",this.target=a||""},wFORMS.behaviors.validation.relativeDate.prototype.toString=function(){return this.sign+"|"+this.qty+"_"+this.unit+"{"+this.target+"}"},wFORMS.behaviors.validation.parseRelativeDateString=function(e){try{var t=e.match(/^([+-])\|(\d*)\_?(Days?|Months?|Years?)?\{(tfa_.+)?\}/),n=t[1],a=t[2],i=t[3];switch(i){case"Days":i="Day";break;case"Months":i="Month";break;case"Years":i="Year"}var r=t[4];return new wFORMS.behaviors.validation.relativeDate(n,a,i,r)}catch(e){return null}},wFORMS.behaviors.validation.instance.prototype.getRelativeDateControllerIds=function(e){var t,n=[],a=[];for(t in e.getAttribute(wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE)&&n.push(e.getAttribute(wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE)),e.getAttribute(wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE)&&n.push(e.getAttribute(wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE)),n){var i=wFORMS.behaviors.validation.parseRelativeDateString(n[t]);i&&""!=i.target&&-1==a.indexOf(i.target)&&a.push(i.target)}return!!a.length&&a},wFORMS.behaviors.validation.instance.prototype.analyzeDateComponents=function(e){try{r=wFORMS.helpers.calendar.locale}catch(e){}r=r||{MDY_DAY_POSITION:1,MDY_MONTH_POSITION:2,MDY_YEAR_POSITION:3},-1!=e.indexOf("-")&&4==e.split("-")[0].length&&(r={MDY_DAY_POSITION:3,MDY_MONTH_POSITION:2,MDY_YEAR_POSITION:1});var t=e.split(/[\/\.\-\s]/);if(3!=t.length){var n=this.computeWformsRelativeDateString(e);return n||null}for(var a=0;a<3;a++)if(!/^\d+$/.test(t[a]))return null;if(2<t[r.MDY_DAY_POSITION-1].length||2<t[r.MDY_MONTH_POSITION-1].length||4<t[r.MDY_YEAR_POSITION-1].length)return null;var i=t[r.MDY_YEAR_POSITION-1];if((i=2==i.length?50<i?"19"+i:"20"+i:i)<0||3e3<i)return null;e=parseInt(t[r.MDY_MONTH_POSITION-1],10);if(e<0||12<e)return null;n=parseInt(t[r.MDY_DAY_POSITION-1],10);if(n<0||31<n)return null;var r=new Date(i,e-1,n);return r.getMonth()+1!=e||r.getDate()!=n||r.getFullYear()!=i?null:r},wFORMS.behaviors.validation.instance.prototype.computeWformsRelativeDateString=function(val,timeStamp){var wfDateObj=wFORMS.behaviors.validation.parseRelativeDateString(val);if(null==wfDateObj)return null;var base=new Date;if(timeStamp)base.setTime(timeStamp);else if(wfDateObj.target){var escaped=wFORMS.helpers.escapeQuerySelector("#"+wfDateObj.target),compTarget=base2.DOM.Element.querySelector(this.target,escaped),base=this.analyzeDateComponents(compTarget.value);if(!base)return null}else{var now=new Date;base=new Date(now.getFullYear(),now.getMonth(),now.getDate())}var preComp=base.getTime();"Day"==wfDateObj.unit&&(wfDateObj.unit="Date"),"Year"==wfDateObj.unit&&(wfDateObj.unit="FullYear");var toComp="base.set"+wfDateObj.unit+"(base.get"+wfDateObj.unit+"()"+wfDateObj.sign+wfDateObj.qty+")";return eval(toComp),isNaN(base)&&base.setTime(preComp),base},wFORMS.behaviors.validation.instance.prototype.toWformsLocaleDateString=function(e){var t,n,a,i=[];try{t=wFORMS.helpers.calendar.locale}catch(e){t={MDY_DAY_POSITION:1,MDY_MONTH_POSITION:2,MDY_YEAR_POSITION:3,DATE_FIELD_DELIMITER:"/"}}for(a in t)if(a.match(/position/i)){switch(a.match(/_(.*)_/)[1]){case"DAY":n=e.getDate();break;case"MONTH":n=e.getMonth()+1;break;case"YEAR":n=e.getFullYear()}i[t[a]-1]=n}return i.join(t.DATE_FIELD_DELIMITER)},wFORMS.behaviors.validation.instance.prototype.repeatHandler=function(e,t,a){var i=wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE,r=wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE;function n(e){return base2.DOM.Element.querySelectorAll(e,".validate-date, .validate-datecal")}n(e).forEach(function(e){var t=wFORMS.behaviors.validation.parseRelativeDateString(e.getAttribute(i)),n=wFORMS.behaviors.validation.parseRelativeDateString(e.getAttribute(r));t&&a.master[t.target]&&(t.target=a.master[t.target],e.setAttribute(i,t.toString())),n&&a.master[n.target]&&(n.target=a.master[n.target],e.setAttribute(r,n.toString()))});var s,o={};for(s in a.repeat){var l=function(e,t){for(var n in t)if(t[n]==e)return n;return e}(s,a.master);o[l]=a.repeat[s]}n(t).forEach(function(e){var t=wFORMS.behaviors.validation.parseRelativeDateString(e.getAttribute(i)),n=wFORMS.behaviors.validation.parseRelativeDateString(e.getAttribute(r));t&&o[t.target]&&(t.target=o[t.target],e.setAttribute(i,t.toString())),n&&o[n.target]&&(n.target=o[n.target],e.setAttribute(r,n.toString()))})},wFORMS.behaviors.validation.instance.prototype.validateTime=function(e,t){return!!this.isEmpty(t)||null!==this.analyzeTimeComponents(t)},wFORMS.behaviors.validation.instance.prototype.analyzeTimeComponents=function(e){var t=!1,n=!1;if(o=e.match(/a[^\da-z]?m/gi)){if(1<o.length)return null;1==o.length&&(t=!0)}if(o=e.match(/p[^\da-z]?m/gi)){if(1<o.length)return null;1==o.length&&(n=!0)}if(t&&n)return null;var a=null,i=0,r=0,s=0,o=!1;if((a=e.match(/(\d{1,2})[-:](\d{1,2})[-:](\d{1,2})/))&&4==a.length?(i=parseInt(a[1]),r=parseInt(a[2]),s=parseInt(a[3]),o=!0):(a=e.match(/(\d{1,2})[-:](\d{1,2})/))&&3==a.length?(i=parseInt(a[1]),r=parseInt(a[2]),o=!0):(a=e.match(/(\d{1,2})/))&&2==a.length&&(i=parseInt(a[1]),o=!0),!o)return null;if(n&&12<i)return null;if(n&&i<12&&(i+=12),t&&12===i)i=0;else if(t&&12<i)return null;return i<0||23<i||r<0||59<r||s<0||59<s?null:new Date(0,0,0,i,r,s,0)},wFORMS.behaviors.validation.instance.prototype.validateEmail=function(e,t){var n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(this.isEmpty(t))return!0;for(var a=t.split(","),i=0;i<a.length;i++)if(!n.test(a[i]))return!1;return!0},wFORMS.behaviors.validation.instance.prototype.validateInteger=function(e,t){return this.isEmpty(t)||/^[\-+]?\d+$/.test(t)},wFORMS.behaviors.validation.instance.prototype.validateFloat=function(e,t){return this.isEmpty(t)||wFORMS.helpers.isNumericValue(t)},wFORMS.behaviors.validation.instance.prototype.validatePhone=function(e,t){if(this.isEmpty(t))return!0;var n,a=[/^[\d\-\. \+\(\)]+$/,/^[\d\-\. \+\(\)]+ # {0,1}\d+ *$/,/^[\d\-\. \+\(\)]+ ext\.{0,1} \d+ *$/];for(n in a)if(a[n].test(t))return!0;return!1},wFORMS.behaviors.validation.instance.prototype.validateCustom=function(e,t){var n=new RegExp("/(.*)/([gi]*)"),n=e.className.match(n);if(this.isEmpty(t))return!0;if(n&&n[0]){n=new RegExp(n[1],n[2]);if(!t.match(n))return!1}return!0},wFORMS.behaviors.validation.instance.prototype.ALLOWED_ELEMENT_TYPE=['input[type="text"][id^="tfa_"]','textarea[id^="tfa_"]'],wFORMS.behaviors.validation.instance.prototype.validateWordCount=function(e,t){return!(e.count>e.getAttribute("data-maxwords"))},wFORMS.behaviors.validation.instance.prototype.numberRangeTest=function(e,t,n){var a,i=null,r=null;if(this.isEmpty(t))return!0;if(null==(i=(a=e.getAttribute(wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE))&&(this.validateFloat(a)||this.validateInteger(a))?parseFloat(a):i)&&(i=-1/0),null==(r=(e=e.getAttribute(wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE))&&(this.validateFloat(e)||this.validateInteger(e))?parseFloat(e):r)&&(r=1/0),t=parseFloat(t),isNaN(t)||null==t)return!1;e=null;return t<i&&(e=(null==e?"":e)+n.min.replace(/%1/g,i)),null==(e=r<t?(null==e?"":e+" ")+n.max.replace(/%1/g,r):e)||e},wFORMS.behaviors.validation.instance.prototype.dateRangeTest=function(e,t,n){return this.dateTimeRangeTestCommon(e,t,n,"analyzeDateComponents")},wFORMS.behaviors.validation.instance.prototype.timeRangeTest=function(e,t,n){return this.dateTimeRangeTestCommon(e,t,n,"analyzeTimeComponents")},wFORMS.behaviors.validation.moveToLinkedDate=function(){var e,t=null!=this.id.match(/\[/)?this.id.replace("[","-D["):this.id+"-D",n=document.getElementById(t);n&&!wFORMS.behaviors.paging.isElementVisible(n)&&(e=wFORMS.behaviors.paging.helpers.findPage(n),wFORMS.getBehaviorInstance(document.getElementById("tfa_0"),"paging").jumpTo(wFORMS.behaviors.paging.getPageIndex(e))),n&&n.scrollIntoView?n.scrollIntoView():location.hash="#"+t},wFORMS.behaviors.validation.instance.prototype.dateTimeRangeTestCommon=function(e,t,n,a){var i=null,r=null;if(this.isEmpty(t))return!0;if((s=e.getAttribute(wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE))&&(i=this[a](s)),(o=e.getAttribute(wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE))&&(r=this[a](o)),null===(t=this[a](t)))return!1;r&&r<i&&(r=new Date(r.getTime()+864e5),(a=new Date(t)).setHours(12),a.setMinutes(0),a.setSeconds(0),t<a&&(t=new Date(t.getTime()+864e5)));var s,o,l,c=this.getRelativeDateControllerIds(e);if(c){if(!i&&s||!r&&o&&t){var u=wFORMS.helpers.escapeQuerySelector("#"+c[!i&&s?0:c.length-1]),u=base2.DOM.HTMLDocument.querySelector(this.target,u);return this.isSwitchedOff(u)?!0:n.dep.replace(/%1/,"%%"+u.id+"%%")}var h,d=this.elementsInError;for(h in d)if(-1<c.indexOf(d[h].id))return n.dep.replace(/%1/,"%%"+d[h].id+"%%")}if(i&&r&&r<i)return!0;s&&(this.computeWformsRelativeDateString(s)instanceof Date?(p=new Date(this.computeWformsRelativeDateString(s).getTime()),s=this.toWformsLocaleDateString(p)):-1!=s.indexOf("-")&&4==s.split("-")[0].length&&(l=s.split("-"),p=new Date(l[0],l[1]-1,l[2]),s=this.toWformsLocaleDateString(p))),o&&(this.computeWformsRelativeDateString(o)instanceof Date?(u=new Date(this.computeWformsRelativeDateString(o).getTime()),o=this.toWformsLocaleDateString(u)):-1!=o.indexOf("-")&&4==o.split("-")[0].length&&(l=o.split("-"),p=new Date(l[0],l[1]-1,l[2]),o=this.toWformsLocaleDateString(p)));var p=i&&t.getTime()<i.getTime(),t=r&&t.getTime()>r.getTime();return(p||t)&&r&&i?n.both.replace(/%1/g,s).replace(/%2/g,o):p?n.min.replace(/%1/g,s):!t||n.max.replace(/%1/g,o)},wFORMS.behaviors.validation.enableResumeLater=function(){var e,t=document.getElementById("tfa_resumeLater");t&&(wFORMS.behaviors.validation.messages.isPasswordConfirmed||(wFORMS.behaviors.validation.messages.isPasswordConfirmed="Your password and confirmation field did not match."),wFORMS.behaviors.validation.instance.prototype.isPasswordConfirmed=function(e,t){return!document.getElementById("tfa_confirmPassword")||t==document.getElementById("tfa_confirmPassword").value},wFORMS.behaviors.validation.messages.isPasswordStrong||(wFORMS.behaviors.validation.messages.isPasswordStrong="Please choose a more secure password. Passwords must contain 8 or more characters, with at least 1 letter (a to z), 1 number (0 to 9), and 1 symbol (like '%', '$' or '!')."),wFORMS.behaviors.validation.instance.prototype.isPasswordStrong=function(e,t){for(var n=[/^([^\s]{8,})/,/[a-zA-Z]/i,/[0-9]/,/[\"!#$%&'()*+,-.\/:;<=>?@\[\]\\\^_`{|}~]/],a=0;a<n.length;a++)if(!t.match(n[a]))return!1;return!0},wFORMS.behaviors.validation.messages.isPasswordMedium||(wFORMS.behaviors.validation.messages.isPasswordMedium="Please choose a more secure password. Passwords must contain 4 or more characters, with at least 1 letter (a to z) and 1 number (0 to 9)."),wFORMS.behaviors.validation.instance.prototype.isPasswordMedium=function(e,t){for(var n=[/^([^\s]{4,})/,/[a-zA-Z]/i,/[0-9]/],a=0;a<n.length;a++)if(!t.match(n[a]))return!1;return!0},wFORMS.behaviors.validation.messages.isPasswordWeak||(wFORMS.behaviors.validation.messages.isPasswordWeak="Your password cannot be empty."),wFORMS.behaviors.validation.instance.prototype.isPasswordWeak=function(e,t){for(var n=[/^([^\s]{1,})/],a=0;a<n.length;a++)if(!t.match(n[a]))return!1;return!0},(e=document.getElementById("tfa_saveForLaterLink"))&&(e.onclick=function(){for(f=this;f&&"FORM"!=f.tagName;)f=f.parentNode;elem=document.getElementById("tfa_saveForLater"),elem&&!elem.checked&&elem.click(),elem&&elem.scrollIntoView?elem.scrollIntoView():location.hash="#tfa_saveForLater",new wFORMS.behaviors.condition.Trigger("#tfa_saveForLater").trigger()}),(e=document.getElementById("tfa_saveForLater"))&&(e.onclick=function(){var e=document.getElementById("saveAndResumeFieldset");e&&(e.style.display="block")}),t.onclick=function(e){wFORMS.behaviors.validation.saveCheckFunc(e,t)})},base2.DOM.Element.addEventListener(document,"DOMContentLoaded",wFORMS.behaviors.validation.enableResumeLater,!1),wFORMS.behaviors.word_counter={ALLOWED_ELEMENT_TYPES:['input[type="text"][id^="tfa_"]','textarea[id^="tfa_"]'],CLASSNAME:"count-words",ATTRIBUTE:"data-maxwords",applyTo:function(e){for(var t=[],n=[],a=0;a<this.ALLOWED_ELEMENT_TYPES.length;a++)n.push(this.ALLOWED_ELEMENT_TYPES[a]+"."+this.CLASSNAME);for(var i=e.querySelectorAll(n.join(",")),a=0;a<i.length;a++){var r=i.item(a),r=new wFORMS.behaviors.word_counter.instance(r);t.push(r)}return t},instance:function(e){this.target=e,this.counter=null,this.wordCount=0,this.maxWords=parseInt(e.getAttribute(wFORMS.behaviors.word_counter.ATTRIBUTE)),this.addHandlers(e),this.addCounter(e)}},wFORMS.behaviors.word_counter.instance.prototype={addHandlers:function(e){var t=this;e.addEventListener||wFORMS.standardizeElement(e),e.addEventListener("keyup",function(){t.updateCounter(e)},!1),e.addEventListener("paste",function(){setTimeout(function(){t.updateCounter(e)},0)},!1),e.addEventListener("cut",function(){setTimeout(function(){t.updateCounter(e)},0)},!1),e.addEventListener("focus",function(){t.updateCounter(e)},!1),e.addEventListener("focus",function(){t.counter.style.visibility="visible"},!1),e.addEventListener("blur",function(){t.counter.style.visibility="hidden"},!1)},addCounter:function(e){var t=e.parentNode;this.counter=document.createElement("span"),this.counter.className=wFORMS.behaviors.word_counter.CLASSNAME,this.counter.message=wFORMS.behaviors.validation.messages.wordsRemPos,this.counter.style.marginLeft="10px",this.counter.style.visibility="hidden",this.counter.setAttribute("aria-live","assertive"),e.count=0,t.insertBefore(this.counter,e.nextSibling),this.updateCounter(e)},getWordCount:function(){return this.wordCount},updateCounter:function(e){try{this.wordCount=this.target.value.match(/\S+/g).length}catch(e){this.wordCount=0}0<=this.maxWords-this.wordCount?(this.counter.message=wFORMS.behaviors.validation.messages.wordsRemPos,this.counter.className=this.counter.className.replace(/errMsg/,"")):this.counter.className.match(/errMsg/)||(this.counter.message=wFORMS.behaviors.validation.messages.wordsRemNeg,this.counter.className+=" errMsg"),this.counter.innerHTML=Math.abs(this.maxWords-this.wordCount)+"&nbsp;"+this.counter.message,e.count=this.wordCount}},wFORMS.behaviors.validation.saveButtonIsEnabled=function(){var e=document.getElementById("tfa_resumeLater");return null!==e&&!e.hasAttribute("disabled")},wFORMS.behaviors.validation.saveCheckFunc=function(e,t){var n=t.form,a=wFORMS.getBehaviorInstance(n,"validation");if(a){var i=a.behavior.rules;switch(a.behavior.rules=[],a.behavior.rules.isEmail={selector:"#tfa_resumeEmail",check:"validateEmail"},a.behavior.rules.isRequired={selector:"#tfa_resumeEmail",check:"validateRequired"},wFORMS.behaviors.validation.passwordStrength||(wFORMS.behaviors.validation.passwordStrength="low"),wFORMS.behaviors.validation.passwordStrength){case"high":a.behavior.rules.isPasswordStrong={selector:"#tfa_resumePassword",check:"isPasswordStrong"};break;case"medium":a.behavior.rules.isPasswordMedium={selector:"#tfa_resumePassword",check:"isPasswordMedium"};break;default:a.behavior.rules.isPasswordWeak={selector:"#tfa_resumePassword",check:"isPasswordWeak"}}a.behavior.rules.isPasswordConfirmed={selector:"#tfa_resumePassword",check:"isPasswordConfirmed"}}var r=wFORMS.getBehaviorInstance(n,"paging");r&&(r.behavior.warnOnUnload=!1),a&&a.run(e,n)?(t.disabled=!0,a.behavior.rules=i,t.value=" ... ",n.submit()):(t.disabled=!1,a&&(a.behavior.rules=i))},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.calculation={skip:!1,VARIABLE_SELECTOR_PREFIX:"calc-",CHOICE_VALUE_SELECTOR_PREFIX:"calcval-",CALCULATION_SELECTOR:'*[class*="formula="]',CALCULATION_ERROR_MESSAGE:"There was an error computing this field.",instance:function(e){var t=this;this.behavior=wFORMS.behaviors.calculation,this.target=e,this.calculations=[],e.__wFormsCalculationInstanceInitializationHandled||(e.addEventListener||wFORMS.standardizeElement(e),e.addEventListener("submit",function(e){t.refreshAll()},!1),e.__wFormsCalculationInstanceInitializationHandled=!0)}},wFORMS.behaviors.calculation.applyTo=function(n){if(wFORMS.behaviors.calculation.skip)return null;for(;n&&"FORM"!=n.tagName;)n=n.parentNode;var e,r=wFORMS.getBehaviorInstance(n,"calculation");return r?r.calculations=[]:r=new wFORMS.behaviors.calculation.instance(n),wFORMS.behaviors.repeat&&!r._repeatRemoveHandler&&(e=wFORMS.behaviors.repeat.onRemove,r._repeatRemoveHandler=function(){wFORMS.behaviors.calculation.applyTo(n),e&&e.apply(this,arguments)},wFORMS.behaviors.repeat.onRemove=r._repeatRemoveHandler),base2.DOM.Element.querySelectorAll(n,wFORMS.behaviors.calculation.CALCULATION_SELECTOR).forEach(function(e){var t=e.className.substr(e.className.indexOf("formula=")+8).split(" ")[0],a=t.split(/[^a-zA-Z]+/g);r.varFields=[];for(var i=0;i<a.length;i++)""!=a[i]&&base2.DOM.Document.querySelectorAll(n,'*[class*="'+wFORMS.behaviors.calculation.VARIABLE_SELECTOR_PREFIX+a[i]+'"]').forEach(function(e){if(e.addEventListener||base2.DOM.bind(e),-1!=(" "+e.className+" ").indexOf(" "+wFORMS.behaviors.calculation.VARIABLE_SELECTOR_PREFIX+a[i]+" ")){if(!wFORMS.behaviors.calculation.isHandled(e)){var t=e.tagName.toLowerCase();if("input"==t||"textarea"==t){var n=e.type.toLowerCase();"input"!=t||"radio"!=n&&"checkbox"!=n?e.addEventListener("blur",function(e){return r.run(e,this)},!1):e.addEventListener("click",function(e){return r.run(e,this)},!1),wFORMS.behaviors.calculation.setHandledFlag(e)}else{if("select"!=t)return;e.addEventListener("change",function(e){return r.run(e,this)},!1),wFORMS.behaviors.calculation.setHandledFlag(e)}}r.varFields.push({name:a[i],field:e})}});t={field:e,formula:t,variables:r.varFields};r.calculations.push(t),r.compute(t)}),r.onApply(),r},wFORMS.behaviors.calculation.instance.prototype.onApply=function(){},wFORMS.behaviors.calculation.instance.prototype.run=function(e,t){for(var n=0;n<this.calculations.length;n++)for(var a=this.calculations[n],i=0;i<a.variables.length;i++)t==a.variables[i].field&&this.compute(a)},wFORMS.behaviors.calculation.instance.prototype.refresh=function(e,t){for(var n=0;n<this.calculations.length;n++){var a=this.calculations[n];t==a.field&&this.compute(a)}},wFORMS.behaviors.calculation.instance.prototype.refreshAll=function(){for(var e=0;e<this.calculations.length;e++){var t=this.calculations[e];this.compute(t)}},wFORMS.behaviors.calculation.instance.prototype.getCalculatedFields=function(e){for(var t=[],n=0;n<this.calculations.length;n++){this.calculations[n];for(var a=0;a<this.calculations[n].variables.length;a++)(e.nodeName&&this.calculations[n].variables[a].field==e||"string"==typeof e&&this.calculations[n].variables[a].name==e)&&t.push(this.calculations[n].field)}return t},wFORMS.behaviors.calculation.instance.prototype.compute=function(t){var e=this.assignVariables(t)+t.formula,n=this;this.evaluateFormula(e,function(e){n.runFieldValidation(e,t.field),t.field.value=e;e=new CustomEvent("change");t.field.dispatchEvent(e);e=new CustomEvent("blur");t.field.dispatchEvent(e),n.isVariable(t.field)&&n.run(null,t.field)})},wFORMS.behaviors.calculation.instance.prototype.runFieldValidation=function(e,t){var n=wFORMS.getBehaviorInstance(this.target,"validation");n&&(wFORMS.behaviors.validation.messages.calculation||(wFORMS.behaviors.validation.messages.calculation=this.behavior.CALCULATION_ERROR_MESSAGE),n.removeErrorMessage(t),"error"==e&&n.fail(t,"calculation"))},wFORMS.behaviors.calculation.instance.prototype.evaluateFormula=function(e,t){this.evaluateFormulaWithoutSandbox(e,t)},wFORMS.behaviors.calculation.instance.prototype.evaluateFormulaWithoutSandbox=function(formula,callback){var result;try{var calc=function(){return eval(formula)},result=calc();"Infinity"!=result&&"NaN"!=result&&!String(result).match("NaN")||(result="error")}catch(x){result="error"}callback(result)},wFORMS.behaviors.calculation.instance.prototype.assignVariables=function(i){for(var e="",t=new Array,r=!0,n=0;n<i.variables.length;n++){var a,s=i.variables[n],o=r?0:"",l=this;wFORMS.helpers.contains(t,s.name)||(t.push(s.name),base2.DOM.Document.querySelectorAll(this.target,'*[class*="'+l.behavior.VARIABLE_SELECTOR_PREFIX+s.name+'"]').forEach(function(e){var t=-1!=(" "+e.className+" ").indexOf(" "+wFORMS.behaviors.calculation.VARIABLE_SELECTOR_PREFIX+s.name+" ");if(t&&l.inScope(i.field,e)){if(e.disabled){t=e.getBoundingClientRect();if(0===t.height&&0===t.width)return}var n=l.hasValueInClassName(e)?l.getValueFromClassName(e):wFORMS.helpers.getFieldValue(e);if((n="string"!=typeof n&&!n?0:n).constructor==Array)for(var a=0;a<n.length;a++)(r=!wFORMS.helpers.isNumericValue(n[a])&&!wFORMS.helpers.isEmptyValue(n[a])?!1:r)?o+=wFORMS.helpers.getNumericValue(n[a]):o=o?String(o).concat(n[a]):n[a];else(r=!wFORMS.helpers.isNumericValue(n)&&!wFORMS.helpers.isEmptyValue(n)?!1:r)?o+=wFORMS.helpers.getNumericValue(n):o=o?String(o).concat(n):String(n)}}),e=r?"var "+s.name+" = "+o+"; "+e:(a=o.replace(/"/g,'\\"').replace(/\n/g,"\\n"),"var "+s.name+' = "'+a+'"; '+e))}return e},wFORMS.behaviors.calculation.instance.prototype.isVariable=function(e){return e.className&&-1!=e.className.indexOf(this.behavior.VARIABLE_SELECTOR_PREFIX)},wFORMS.behaviors.calculation.instance.prototype.hasValueInClassName=function(e){if("SELECT"!==e.tagName)return!(!e.className||-1==(" "+e.className).indexOf(" "+this.behavior.CHOICE_VALUE_SELECTOR_PREFIX));for(var t=0;t<e.options.length;t++)if(e.options[t].className&&-1!=e.options[t].className.indexOf(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX))return!0;return!1},wFORMS.behaviors.calculation.instance.prototype.getValueFromClassName=function(e){switch(e.tagName){case"INPUT":if(!e.className||-1==e.className.indexOf(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX))return null;var t=e.className.split(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)[1].split(" ")[0];return"checkbox"==e.type||"radio"==e.type?e.checked?t:wFORMS.helpers.isNumericValue(t)?0:"":t;case"SELECT":if(-1==e.selectedIndex)return null;for(var n=[],a=0;a<e.options.length;a++)e.options[a].selected&&e.options[a].className&&-1!=e.options[a].className.indexOf(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)&&(t=e.options[a].className.split(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)[1].split(" ")[0],n.push(t));return 0==n.length?null:n;case"TEXTAREA":return e.className&&-1!=e.className.indexOf(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)?t=e.className.split(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)[1].split(" ")[0]:null;default:return null}return null},wFORMS.behaviors.calculation.isHandled=function(e){return!0===e._wforms_calc_handled},wFORMS.behaviors.calculation.setHandledFlag=function(e){e._wforms_calc_handled=!0},wFORMS.behaviors.calculation.removeHandledFlag=function(t){try{delete t._wforms_calc_handled}catch(e){t._wforms_calc_handled=void 0}},wFORMS.behaviors.calculation.instance.prototype.inScope=function(e,t){if(wFORMS.behaviors.repeat){for(var n=[],a=[],i=wFORMS.behaviors.repeat.getRepeatedElement(e);i;)n.push(i),i=wFORMS.behaviors.repeat.getRepeatedElement(i.parentNode);for(i=wFORMS.behaviors.repeat.getRepeatedElement(t);i;)a.push(i),i=wFORMS.behaviors.repeat.getRepeatedElement(i.parentNode);t=function(e,t){for(var n=0;n<e.length;n++){for(var a=0;a<t.length&&e[n]!==t[a];a++);if(a==t.length)return!1}return!0};return t(n,a)||t(a,n)}return!0},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.autoformat={ATTRIBUTE_SELECTOR:'input[autoformat][id^="tfa_"]',ALLOWED_ELEMENT_TYPE:['input[type="text"]'],NUMERIC_REGEX:new RegExp("[0-9]"),ALPHABETIC_REGEX:new RegExp("[A-Za-z]"),_globalCache:{},instance:function(e){this.actorsInDomain=[]},Caret:function(e){this.mask=e,this.isRtl=this.mask.isRtl;e=this.isRtl?this.mask.format.length:0;this.caretPos={isRange:!1,position:e,start:e,end:e},this.prevCaretPos={isRange:!1,position:e,start:e,end:e}},Mask:function(e){var t=this;if(this.element=e,wFORMS.standardizeElement(this.element),this.parentForm=this.element.form,wFORMS.standardizeElement(this.parentForm),this.formatString=this.element.getAttribute("autoformat"),this.contents=this.formatString.split(""),this.format=this.contents.slice(),this.isRtl=this.getRtl(this.element),this.Vals=[],this.VAL_LENGTH=this.getValLength(),this.valIndex={start:0,end:0},this.handlers=this.getEventHandlers(),this.firstInputChar=function(){for(var e=0;e<t.format.length&&!t.isMaskChar(t.format[e]);e++);return e}(),this.lastInputChar=function(){for(var e=t.format.length-1;0<=e&&!t.isMaskChar(t.format[e]);e--);return e}(),this.caret=new wFORMS.behaviors.autoformat.Caret(this),""!==this.element.value)for(var n=this.element.value.split(""),a=0;a<n.length;a++)this.inputChar(n[a]);window.setTimeout(function(){t.addListeners()},1),this.isRtl&&(this.element.style.direction="ltr",this.element.style.textAlign="right")},applyTo:function(e){try{if(-1<navigator.userAgent.toLowerCase().indexOf("android"))return}catch(e){}var t=base2.DOM.Element.querySelectorAll(e,wFORMS.behaviors.autoformat.ATTRIBUTE_SELECTOR),n=[];t.forEach(function(e){base2.DOM.Element.matchesSelector(e,wFORMS.behaviors.autoformat.ALLOWED_ELEMENT_TYPE[0])&&(e=wFORMS.behaviors.autoformat._getIDForActorElement(e),n.push(e))});var a,i,r,t=new wFORMS.behaviors.autoformat.instance(e);return t.actorsInDomain=n,wFORMS.behaviors.autoformat.applyToVisibleElements(t),wFORMS.behaviors.paging&&wFORMS.getBehaviorInstance(e,"paging")&&(a=wFORMS.getBehaviorInstance(e,"paging"),i=a.onPageChange,r=t,a.onPageChange=function(e){wFORMS.behaviors.autoformat.applyToVisibleElements(r),i.apply(a,arguments)}),t},_getIDForActorElement:function(e){if(""===e.id)for(;;){var t=wFORMS.helpers.randomId();if(null===document.getElementById(t)){e.id=t;break}}return e.id}},wFORMS.behaviors.autoformat.instance.prototype.onApply=function(){},wFORMS.behaviors.autoformat.instance.prototype.run=function(){},wFORMS.behaviors.autoformat.applyToVisibleElements=function(e){function t(e,t){wFORMS.behaviors.autoformat._globalCache[e]||(t=new wFORMS.behaviors.autoformat.Mask(t),wFORMS.behaviors.autoformat._globalCache[e]=t)}for(var n=0;n<e.actorsInDomain.length;n++){var a=e.actorsInDomain[n],i=document.getElementById(a);(!wFORMS.behaviors.paging||wFORMS.behaviors.paging.isElementVisible(i))&&t(a,i)}},wFORMS.behaviors.autoformat.Mask.prototype.getRtl=function(){var e;return this.element&&(window.getComputedStyle?e=window.getComputedStyle(this.element).direction:this.element.currentStyle&&(e=this.element.currentStyle.direction)),"rtl"===e},wFORMS.behaviors.autoformat.Mask.prototype.getValLength=function(){for(var e=0,t=0;t<this.format.length;t++)this.isMaskChar(this.format[t])&&(e+=1);return e},wFORMS.behaviors.autoformat.Mask.prototype.isMaskChar=function(e){return"#"===e||"$"===e},wFORMS.behaviors.autoformat.Mask.prototype.getEventHandlers=function(){var n=null,a=this,t=8,i=9,r=13,s=37,o=38,l=39,c=40,u=46;return{keyDown:function(e){switch(n=e.which||e.keyCode){case r:case s:case o:case l:case c:case i:a.caret.preventOverflow(),n=null;break;case t:e.preventDefault(),a.backspace(),n=null;break;case u:e.preventDefault(),a.forwardDel(),n=null}},keyPress:function(e){var t;null!==n&&(e.metaKey||e.ctrlKey||e.altKey?n=null:((t=e.which||e.keyCode)&&(t=String.fromCharCode(t),a.inputChar(t)),e.preventDefault()))},keyUp:function(e){switch(e.which){case r:case s:case o:case l:case c:case i:a.caret.preventOverflow(),a.caret.savePosition()}n=null},cut:function(){window.setTimeout(function(){a.cut()},1)},paste:function(){window.setTimeout(function(){a.paste()},1)},click:function(){a.caret.preventOverflow()},submit:function(){a.submit()}}},wFORMS.behaviors.autoformat.Mask.prototype.addListeners=function(){var e=this;this.element.addEventListener("focus",function(){e.applyElementValueUncontrolledChanges(),e.updateValue(),e.caret.nudge(0)}),this.element.addEventListener("blur",function(){e.blur()}),this.element.readOnly||(this.element.addEventListener("keydown",this.handlers.keyDown),this.element.addEventListener("keypress",this.handlers.keyPress),this.element.addEventListener("keyup",this.handlers.keyUp),this.element.addEventListener("cut",this.handlers.cut),this.element.addEventListener("paste",this.handlers.paste)),this.element.addEventListener("click",this.handlers.click),this.parentForm.addEventListener("submit",this.handlers.submit),this.element.blur()},wFORMS.behaviors.autoformat.Mask.prototype.removeListeners=function(){this.element.removeEventListener("keydown",this.handlers.keyDown),this.element.removeEventListener("keypress",this.handlers.keyPress),this.element.removeEventListener("keyup",this.handlers.keyUp),this.element.removeEventListener("click",this.handlers.click),this.element.removeEventListener("cut",this.handlers.cut),this.element.removeEventListener("paste",this.handlers.paste),this.parentForm.removeEventListener("submit",this.handlers.submit)},wFORMS.behaviors.autoformat.Mask.prototype.blur=function(){this.element.value=this.stripExtraInput()},wFORMS.behaviors.autoformat.Mask.prototype.applyElementValueUncontrolledChanges=function(){var e=this.Vals.join(""),t=this.element.value;return""==e&&""!=t&&(this.Vals=t.split(""),this.reformat(),!0)},wFORMS.behaviors.autoformat.Mask.prototype.updateValue=function(){var e=this;this.element.value=this.contents.join(""),window.setTimeout(function(){e.caret.update()},1)},wFORMS.behaviors.autoformat.Mask.prototype.inputChar=function(e){var t,n=this.caret.getPosition();if(this.isRtl)for(;!this.isMaskChar(this.format[n.start-1])&&0<n.start;)n=this.caret.nudge();else for(;!this.isMaskChar(this.format[n.start])&&n.start<this.format.length;)n=this.caret.nudge();t=this.isRtl?n.start-1:n.start,this.isCharAllowed(e,this.format[t])&&(this.caret.savePosition(),n.isRange?this.Vals.splice(this.valIndex.start,this.valIndex.end-this.valIndex.start,e):this.Vals.splice(this.valIndex.start,0,e),this.Vals.length=this.VAL_LENGTH,this.reformat(),this.caret.nudge())},wFORMS.behaviors.autoformat.Mask.prototype.backspace=function(){var e=this.caret.getPosition();this.caret.savePosition(),e.isRange?(this.Vals.splice(this.valIndex.start,this.valIndex.end-this.valIndex.start),this.caret.setPosition(this.isRtl?e.end:e.start)):(this.Vals.splice(this.valIndex.start-1,1),(!this.isRtl&&e.position>this.firstInputChar||this.isRtl&&e.position<=this.lastInputChar)&&this.caret.nudge(-1)),this.reformat()},wFORMS.behaviors.autoformat.Mask.prototype.forwardDel=function(){var e=this.caret.getPosition();this.caret.savePosition(),e.isRange?this.backspace():(this.Vals.splice(this.valIndex.start,1),this.caret.nudge(0),this.reformat())},wFORMS.behaviors.autoformat.Mask.prototype.cut=function(){var e,t=this.caret.getPosition();this.Vals.splice(this.valIndex.start,this.valIndex.end-this.valIndex.start),this.isRtl?(e=this.element.value.length-t.position,this.reformat(),this.caret.setPosition(this.format.length-e)):this.reformat()},wFORMS.behaviors.autoformat.Mask.prototype.paste=function(){var e,t,n=this.caret.previousPosition(),a=n.isRange?n.end-n.start:0,i=this.element.value.length-this.contents.length+a;for(n.isRange&&this.Vals.splice(this.valIndex.start,this.valIndex.end-this.valIndex.start),this.caret.setPosition(n.start),t=this.element.value.substr(n.start,i).split(""),this.isRtl&&(a=this.caret.getPosition().position+a,this.caret.setPosition(a)),e=0;e<t.length;e++)this.inputChar(t[e])},wFORMS.behaviors.autoformat.Mask.prototype.submit=function(){this.applyElementValueUncontrolledChanges(),this.element.value=this.stripExtraInput()},wFORMS.behaviors.autoformat.Mask.prototype.isCharAllowed=function(e,t){return"#"===t?Boolean(e.match(wFORMS.behaviors.autoformat.NUMERIC_REGEX)):"$"===t&&Boolean(e.match(wFORMS.behaviors.autoformat.ALPHABETIC_REGEX)||e.match(wFORMS.behaviors.autoformat.NUMERIC_REGEX))},wFORMS.behaviors.autoformat.Mask.prototype.reformat=function(){function e(e){i?this.isMaskChar(this.format[e])&&((n=i.shift())&&this.isCharAllowed(n,this.format[e])?(this.contents[e]=n,a.push(n)):(i=null,this.contents[e]=this.format[e])):this.contents[e]=this.format[e]}var t,n,a=[],i=this.Vals.slice();if(this.isRtl)for(t=this.format.length-1;0<=t;t--)e.call(this,t);else for(t=0;t<this.format.length;t++)e.call(this,t);this.Vals=a.slice(),this.caret.savePosition(),this.updateValue()},wFORMS.behaviors.autoformat.Mask.prototype.stripExtraInput=function(){for(var e=0,t="",n=[],a=0;a<this.Vals.length;a++)this.Vals[a]&&n.push(this.Vals[a]);if(n.length===this.VAL_LENGTH)return t=this.contents.join("");if(this.isRtl)for(a=this.contents.length-1;0<=a&&e!==n.length;a--)t=this.contents[a]+t,this.isMaskChar(this.format[a])&&(e+=1);else for(a=0;a<this.contents.length&&e!==n.length;a++)t+=this.contents[a],this.isMaskChar(this.format[a])&&(e+=1);return t},wFORMS.behaviors.autoformat.Caret.prototype.getSelection=function(){var e,t,n,a=this.mask.element,i=0,r=0;return"number"==typeof a.selectionStart?(i=a.selectionStart,r=a.selectionEnd):(e=document.selection.createRange())&&e.parentElement()===a&&(n=a.value.length,(t=a.createTextRange()).moveToBookmark(e.getBookmark()),(a=a.createTextRange()).collapse(!1),-1<t.compareEndPoints("StartToEnd",a)?i=r=n:(i=-t.moveStart("character",-n),r=-1<t.compareEndPoints("EndToEnd",a)?n:-t.moveEnd("character",-n))),{start:i,end:r}},wFORMS.behaviors.autoformat.Caret.prototype.setSelection=function(e,t){var n=this.mask.element;n.setSelectionRange?n.setSelectionRange(e,t):((n=n.createTextRange()).collapse(!0),e===t?n.move("character",e):(n.moveEnd("character",t),n.moveStart("character",e)),n.select())},wFORMS.behaviors.autoformat.Caret.prototype.update=function(){return this.setSelection(this.caretPos.start,this.caretPos.start),this.savePosition(),this.caretPos},wFORMS.behaviors.autoformat.Caret.prototype.getPosition=function(){var e=this.getSelection(),t=e.start,n=e.end,e={isRange:null,position:null,start:t,end:n};return n-t==0?(e.isRange=!1,e.position=t):e.isRange=!0,e},wFORMS.behaviors.autoformat.Caret.prototype.savePosition=function(){return this.prevCaretPos=this.cloneCaretPos(),this.caretPos=this.getPosition(),this._setValIndex(),this.caretPos},wFORMS.behaviors.autoformat.Caret.prototype.setPosition=function(e){return this.caretPos.isRange=!1,this.caretPos.start=this.caretPos.end=this.caretPos.position=e,this.update()},wFORMS.behaviors.autoformat.Caret.prototype.cloneCaretPos=function(){return{isRange:this.caretPos.isRange,position:this.caretPos.position,start:this.caretPos.start,end:this.caretPos.end}},wFORMS.behaviors.autoformat.Caret.prototype.nudge=function(e){if(e=void 0!==e?e:1,this.isRtl&&(e=-e),this.caretPos.isRange&&(this.isRtl?this.caretPos.position=this.caretPos.start=this.caretPos.end:this.caretPos.position=this.caretPos.end=this.caretPos.start),this.caretPos.position+=e,this.isRtl)for(;0<=this.caretPos.position&&this.caretPos.position<=this.mask.format.length&&!this.mask.isMaskChar(this.mask.format[this.caretPos.position-1]);)0===e?--this.caretPos.position:this.caretPos.position+=0<e?1:-1;else for(;0<=this.caretPos.position&&this.caretPos.position<=this.mask.format.length&&!this.mask.isMaskChar(this.mask.format[this.caretPos.position]);)this.caretPos.position+=0===e||0<e?1:-1;return this.caretPos.start=this.caretPos.end=this.caretPos.position,this.update()},wFORMS.behaviors.autoformat.Caret.prototype.preventOverflow=function(){var e,t;if(this.savePosition(),!this.caretPos.isRange){if(this.isRtl){for(t=this.mask.contents.length-1;0<=t;t--)if(this.mask.isMaskChar(this.mask.contents[t])){e=t;break}this.caretPos.position>this.mask.lastInputChar?this.caretPos.position=this.mask.lastInputChar+1:this.caretPos.position<=e&&(this.caretPos.position=e+1)}else{for(t=0;t<this.mask.contents.length;t++)if(this.mask.isMaskChar(this.mask.contents[t])){e=t;break}this.caretPos.position<this.mask.firstInputChar?this.caretPos.position=this.mask.firstInputChar:this.caretPos.position>e&&(this.caretPos.position=e)}return this.caretPos.start=this.caretPos.end=this.caretPos.position,this.update()}},wFORMS.behaviors.autoformat.Caret.prototype.previousPosition=function(){return this.prevCaretPos},wFORMS.behaviors.autoformat.Caret.prototype._setValIndex=function(){var e,t=0,n=0;if(this.mask.isRtl){for(e=this.mask.format.length;e>this.caretPos.end;e--)this.mask.isMaskChar(this.mask.format[e-1])&&(t+=1);for(n=t,e=this.caretPos.end;e>this.caretPos.start;e--)this.mask.isMaskChar(this.mask.format[e-1])&&(n+=1)}else{for(e=0;e<this.caretPos.start;e++)this.mask.isMaskChar(this.mask.format[e])&&(t+=1);for(n=t,e=this.caretPos.start;e<this.caretPos.end;e++)this.mask.isMaskChar(this.mask.format[e])&&(n+=1)}this.mask.valIndex={start:t,end:n}},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.lengthPrompt={ATTRIBUTE_SELECTOR:"maxLength",ALLOWED_ELEMENT_TYPE:['input[type="text"][id^="tfa_"]','input[type="color"][id^="tfa_"]','input[type="date"][id^="tfa_"]','input[type="datetime"][id^="tfa_"]','input[type="datetime-local"][id^="tfa_"]','input[type="email"][id^="tfa_"]','input[type="month"][id^="tfa_"]','input[type="number"][id^="tfa_"]','input[type="range"][id^="tfa_"]','input[type="search"][id^="tfa_"]','input[type="tel"][id^="tfa_"]','input[type="time"][id^="tfa_"]','input[type="url"][id^="tfa_"]','input[type="week"][id^="tfa_"]','textarea[id^="tfa_"]'],MONITOR_CHECK_TIMES:10,CUSTOM_INDICATOR_STYLE:"lengthIndicator",keyCode:{LEFT:37,RIGHT:39,END:35,HOME:36,DELETE:46,BACKSPACE:8,TAB:9},instance:function(e){this.element=e,this.ui_indicator=null,this.maxLength=-1,this.previousLength=-1,this._pasteMonitorHandler=null,this.inputCache=null},_globalCache:{},applyTo:function(e){"use strict";base2.DOM.Element.querySelectorAll(e,wFORMS.behaviors.lengthPrompt._getActorsSelector()).forEach(function(e){var t,n=e.getAttribute(wFORMS.behaviors.lengthPrompt.ATTRIBUTE_SELECTOR);null!=n&&((t=new wFORMS.behaviors.lengthPrompt.instance(e)).maxLength=parseInt(n),n=wFORMS.behaviors.lengthPrompt._getIDForActorElement(e),wFORMS.standardizeElement(e),t.deployUI(),t.bindEvents(),wFORMS.behaviors.lengthPrompt._globalCache[n]=t)})},eventHandlers:{focus:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];t&&t.showIndicator()},blur:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];t&&t.hideIndicator()},keyup:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];t&&t.checkUpdate()},paste:function(e){var t,n,a=wFORMS.behaviors.lengthPrompt._globalCache[this.id];a&&(t=wFORMS.behaviors.lengthPrompt.getSelection(a.element),a.inputCache=this.value,a._pasteMonitorHandler=window.setInterval((n=0,function(){var e=a.checkCacheTempered(t);!1!==e&&(window.clearInterval(a._pasteMonitorHandler),a.handlePaste(e,t)),++n>=wFORMS.behaviors.lengthPrompt.MONITOR_CHECK_TIMES&&window.clearInterval(a._pasteMonitorHandler)}),10))},textarea_input:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];t&&t.restrictInput(e)}},messages:"%1 characters left.",_getActorsSelector:function(){if(!wFORMS.behaviors.lengthPrompt.ACTORS_SELECTOR){for(var e="",t=0;t<wFORMS.behaviors.lengthPrompt.ALLOWED_ELEMENT_TYPE.length;t++)e+=wFORMS.behaviors.lengthPrompt.ALLOWED_ELEMENT_TYPE[t]+"["+wFORMS.behaviors.lengthPrompt.ATTRIBUTE_SELECTOR+"], ";wFORMS.behaviors.lengthPrompt.ACTORS_SELECTOR=e.slice(0,-2)}return wFORMS.behaviors.lengthPrompt.ACTORS_SELECTOR},_getIDForActorElement:function(e){if(""===e.id)for(;;){var t=wFORMS.helpers.randomId();if(null==document.getElementById(t)){e.id=t;break}}return e.id},getSelection:function(e){var t,n,a,i=-1;return 0<=e.selectionStart?(i=e.selectionStart,t=e.selectionEnd-e.selectionStart):document.selection?(e.tagName&&"TEXTAREA"===e.tagName?(n=document.selection.createRange().duplicate(),(a=e.createTextRange()).collapse(!1),a.moveToBookmark(n.getBookmark()),""===n.text&&((e=a.duplicate()).moveEnd("character",1),n.boundingWidth===e.boundingWidth&&n.boundingHeight===e.boundingHeight&&(a=e))):a=document.selection.createRange().duplicate(),t=a.text.length,i=Math.abs(a.moveStart("character",-1e6))):document.getSelection&&(i=0,t=document.getSelection().length),{caret:i,length:t}},setCaretPosition:function(e,t){e.setSelectionRange?(e.focus(),e.setSelectionRange(t,t)):e.createTextRange&&((e=e.createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select())}},function(e){"use strict";for(var t in e)wFORMS.behaviors.lengthPrompt.instance.prototype[t]=e[t]}({deployUI:function(){var e=this.element.parentNode;base2.DOM.Element.matchesSelector(this.element.parentNode,wFORMS.INPUT_CONTROL_WRAPPER_SELECTOR)||(e=this.mirrorWrapperDiv());var t=document.createElement("div");e.appendChild(t),t.style.display="none",t.className=wFORMS.behaviors.lengthPrompt.CUSTOM_INDICATOR_STYLE,t.setAttribute("aria-live","assertive"),this.ui_indicator=t,this.adjustIndicatorPosition(),this.checkUpdate()},adjustIndicatorPosition:function(){for(var t,e=(t=this.element,function(e){return parseFloat(base2.DOM.AbstractView.getComputedStyle(window,t,"").getPropertyValue(e).replace(/px$/,""))||0}),n=this.element.offsetWidth||e("width"),a=["margin-left","margin-right","border-left-width","border-right-width","padding-left","padding-right"],i=0,r=a.length;i<r;i++)n+=e(a[i])||0;this.ui_indicator.style.left=n+"px"},mirrorWrapperDiv:function(){var e=document.createElement("div");return this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),e},bindEvents:function(){for(var e=0,t=["focus","blur"];e<t.length;e++){var n=t[e];this.element.addEventListener(n,wFORMS.behaviors.lengthPrompt.eventHandlers[n],!0)}"TEXTAREA"==this.element.tagName.toUpperCase()&&(this.element.addEventListener("paste",wFORMS.behaviors.lengthPrompt.eventHandlers.paste,!0),this.element.addEventListener("keydown",wFORMS.behaviors.lengthPrompt.eventHandlers.textarea_input,!0))},bindMonitorEvent:function(){for(var e=0,t=["keyup"];e<t.length;e++){var n=t[e];this.element.addEventListener(n,wFORMS.behaviors.lengthPrompt.eventHandlers[n],!0)}},releaseMonitorEvent:function(){for(var e=0,t=["keyup"];e<t.length;e++){var n=t[e];base2.DOM.Element.removeEventListener(this.element,n,wFORMS.behaviors.lengthPrompt.eventHandlers[n],!0)}},checkCacheTempered:function(e){var t=this.element.value;if(t==this.inputCache)return!1;var n=t.length-this.inputCache.length+e.length,e=wFORMS.behaviors.lengthPrompt.getSelection(this.element).caret-n;return{diff:t.substr(e,n),start:e,length:n}},handlePaste:function(e,t){var n=this.inputCache.length-t.length+e.length-this.maxLength,e=e.diff;0<n&&(e=e.substr(0,e.length-n)),this.element.value=this.inputCache.substr(0,t.caret)+e+this.inputCache.substr(t.caret+t.length,this.inputCache.length),wFORMS.behaviors.lengthPrompt.setCaretPosition(this.element,t.caret+e.length),this.checkUpdate()},restrictInput:function(e){this.element.value.replace(/(\r\n|\n|\r)/g,"--").length!=this.maxLength||this.testSpecialKey(e)||0!=wFORMS.behaviors.lengthPrompt.getSelection(this.element).length||e.preventDefault()},testSpecialKey:function(e){var t=e.which||e.keyCode;return e.ctrlKey&&(65==t||88==t||67==t||86==t)||t==wFORMS.behaviors.lengthPrompt.keyCode.END||t==wFORMS.behaviors.lengthPrompt.keyCode.HOME||t==wFORMS.behaviors.lengthPrompt.keyCode.LEFT||t==wFORMS.behaviors.lengthPrompt.keyCode.RIGHT||t==wFORMS.behaviors.lengthPrompt.keyCode.DELETE||t==wFORMS.behaviors.lengthPrompt.keyCode.BACKSPACE||t==wFORMS.behaviors.lengthPrompt.keyCode.TAB},showIndicator:function(){this.adjustIndicatorPosition(),this.ui_indicator.style.display="block",this.bindMonitorEvent()},hideIndicator:function(){this.ui_indicator.style.display="none",this.releaseMonitorEvent()},updateIndicator:function(){var e=this.element.value.replace(/(\r\n|\n|\r)/g,"--").length,e=this.maxLength-e;this.ui_indicator.innerHTML=wFORMS.behaviors.lengthPrompt.messages.replace(/%1/g,e)},checkUpdate:function(){var e=this.element.value.replace(/(\r\n|\n|\r)/g,"--").length;e!=this.previousLength&&(this.updateIndicator(),this.previousLength=e)}}),"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.dependent_list={skip:!1,instance:function(e){this.behavior=wFORMS.behaviors.dependent_list,this.target=e}},wFORMS.behaviors.dependent_list.applyTo=function(e){if(wFORMS.behaviors.dependent_list.skip)return null;var a=new wFORMS.behaviors.dependent_list.instance(e);e.querySelectorAll||base2.DOM.bind(e);e=e.querySelectorAll("option[data-filter-dependent], select[data-filter-dependent], input[data-filter-dependent]");return e.forEach(function(e){e.addEventListener||base2.DOM.bind(e),e.addEventListener("change",function(e){a.run(e,this)},!1),a.run(null,e)}),0<e.length&&wFORMS.behaviors.repeat&&(wFORMS.behaviors.repeat.observeRepeatComplete(function(e,t,n){a.onRepeatableDuplicated(e,t,n)}),wFORMS.behaviors.repeat.observeRemoveComplete(function(e){a.onRepeatableRemoved(e)})),a.onApply(),a},wFORMS.behaviors.dependent_list.instance.prototype.onApply=function(){},wFORMS.behaviors.dependent_list.instance.prototype.run=function(e,t){var n=this,a=wFORMS.helpers.getForm(this.target),t=t.getAttribute("data-filter-dependent");a.querySelectorAll(t).forEach(function(e){n.applyFiltersTo(e)})},wFORMS.behaviors.dependent_list.instance.prototype.applyFiltersTo=function(t){var n=this,e=wFORMS.helpers.getForm(this.target),a=t.getAttribute("data-filter-control");e.querySelectorAll(a).forEach(function(e){n.filter(e,t)})},wFORMS.behaviors.dependent_list.instance.prototype.filter=function(e,r){var s=this;this._dirtyCalculations={};function t(e,t){var n=(e.checked||e.selected)&&!e.disabled,a=e.getAttribute("data-filter-include"),i=e.getAttribute("data-filter-exclude");(a=!a&&!i?"optgroup[label='"+s.getChoiceLabel(e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"']":a)&&(n?"selected"==t&&s.include(r,a):"deselected"==t&&s.exclude(r,a)),i&&(n?"selected"==t&&s.exclude(r,i):"deselected"==t&&s.include(r,i))}"INPUT"==e.tagName?(t(e,"deselected"),t(e,"selected")):((e=e.querySelectorAll("input[type=checkbox],input[type=radio],option")).forEach(function(e){t(e,"deselected")}),e.forEach(function(e){t(e,"selected")}));var n,a=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(this.target),"calculation");for(n in this._dirtyCalculations)a.run(null,this._dirtyCalculations[n]);this._dirtyCalculations={},r.getAttribute("data-filter-dependent")&&this.run(null,r)},wFORMS.behaviors.dependent_list.instance.prototype.include=function(e,t){e.querySelectorAll(t).forEach(function(e){var t;e.disabled=!1,e.style.display="","OPTGROUP"!=e.tagName&&"OPTION"!=e.tagName||"SPAN"==e.parentNode.tagName&&((t=e.parentNode).parentNode.insertBefore(e,t),t.parentNode.removeChild(t)),fields=e.querySelectorAll("input,select,textarea,option"),fields.forEach(function(e){e.disabled=!1})})},wFORMS.behaviors.dependent_list.instance.prototype.exclude=function(e,t){var t=e.querySelectorAll(t),n=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(this.target),"calculation"),a=this;t.forEach(function(e){if(e.disabled="disabled",e.style.display="none",e.selected&&(e.selected=!1),e.checked&&(e.checked=!1),"OPTGROUP"==e.tagName||"OPTION"==e.tagName){"SPAN"!=e.parentNode.tagName&&e.parentNode.insertBefore(document.createElement("span"),e).appendChild(e);for(var t=e.parentNode;t&&"SELECT"!=t.tagName;)t=t.parentNode;t&&n&&n.isVariable(t)&&(a._dirtyCalculations[t.id]=t)}else n&&n.isVariable(e)&&(a._dirtyCalculations[t.id]=t);fields=e.querySelectorAll("input,select,textarea,option"),fields.forEach(function(e){e.disabled="disabled",e.selected=!1,n&&n.isVariable(e)&&(a._dirtyCalculations[e.id]=e)})})},wFORMS.behaviors.dependent_list.instance.prototype.getChoiceLabel=function(e){return(e="OPTION"!=e.tagName?this.target.querySelector("label[for='"+e.getAttribute("id")+"']"):e).textContent||e.innerText},wFORMS.behaviors.dependent_list.instance.prototype.updateReference=function(e,t,n,a,i){var r=e.getAttribute(t),s=r?r.split(","):[];if(0<s.length){if(i){for(var o=0;o<s.length;o++)if(this.unescapeId(s[o])==n){s[o]=this.escapeId(a);break}}else s.push(this.escapeId(a));e.setAttribute(t,s.join(","))}return e},wFORMS.behaviors.dependent_list.instance.prototype.updateSelectors=function(e,t){for(var e=e?e.split(","):[],n=0;n<e.length;n++){var a=this.unescapeId(e[n]);t[a]&&(e[n]=this.escapeId(t[a]))}return e.join(",")},wFORMS.behaviors.dependent_list.instance.prototype.unescapeId=function(e){return e?e.replace(/^#/,"").replace(/\\\[/g,"[").replace(/\\\]/g,"]"):null},wFORMS.behaviors.dependent_list.instance.prototype.escapeId=function(e){return e?"#"+e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"):null},wFORMS.behaviors.dependent_list.instance.prototype.isInSameScope=function(e,t){return wFORMS.behaviors.repeat.getRepeatedElement(e)===wFORMS.behaviors.repeat.getRepeatedElement(t)},wFORMS.behaviors.dependent_list.instance.prototype.onRepeatableDuplicated=function(e,t,r){function s(e,t){for(var n in t)if(t[n]==e)return n;return e}var o=wFORMS.helpers.getForm(e),l=this;if(0<(e=e.querySelectorAll("option[data-filter-dependent], select[data-filter-dependent], input[data-filter-dependent], option[data-filter-control], select[data-filter-control], input[data-filter-control]")).length){e.forEach(function(e){var t,n=e.id,a=s(n,r.master);n!=a&&((t=l.updateSelectors(e.getAttribute("data-filter-dependent"),r.master))&&o.querySelectorAll(t).forEach(function(e){l.updateReference(e,"data-filter-control",a,n,!0)}),(t=l.updateSelectors(e.getAttribute("data-filter-control"),r.master))&&o.querySelectorAll(t).forEach(function(e){l.updateReference(e,"data-filter-dependent",a,n,!0)}))});var n,e=t.querySelectorAll("option[data-filter-dependent], select[data-filter-dependent], input[data-filter-dependent], option[data-filter-control], select[data-filter-control], input[data-filter-control]"),c={};for(n in r.repeat){var a=s(n,r.master);c[a]=r.repeat[n]}e.forEach(function(n){var a=n.id,i=s(a,r.repeat),i=s(i,r.master),e=l.updateSelectors(n.getAttribute("data-filter-dependent"),c);e&&o.querySelectorAll(e).forEach(function(e){var t=l.isInSameScope(n,e);l.updateReference(e,"data-filter-control",i,a,t)}),(e=l.updateSelectors(n.getAttribute("data-filter-control"),r.repeat))&&o.querySelectorAll(e).forEach(function(e){var t=l.isInSameScope(n,e);l.updateReference(e,"data-filter-dependent",i,a,t)})})}},wFORMS.behaviors.dependent_list.instance.prototype.onRepeatableRemoved=function(e){},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.prefill={instance:function(e){this.behavior=wFORMS.behaviors.prefill,this.target=e},skip:!1},wFORMS.behaviors.prefill.applyTo=function(e){if(!wFORMS.behaviors.prefill.skip){var t,n=new wFORMS.behaviors.prefill.instance(e),a=wFORMS.getBehaviorInstance(e,"switch"),i=wFORMS.getBehaviorInstance(e,"calculation"),r=n.getParameters();for(t in r)try{var s=e.elements[t];if(s)n.populateField(s,r[t],a,i);else for(var o=document.getElementById(t).getElementsByTagName("input"),l=0;l<o.length;l++)"checkbox"==o[l].getAttribute("type")&&n.populateField(o[l],r[t],a,i)}catch(e){}return n.onApply(),n}},wFORMS.behaviors.prefill.instance.prototype.onApply=function(){},wFORMS.behaviors.prefill.instance.prototype.populateField=function(e,t,n,a){if(e)if(e.tagName){if("INPUT"==e.tagName&&("text"==e.type||"hidden"==e.type||"password"==e.type)||e.tagName,e.value=t,"INPUT"==e.tagName&&"checkbox"==e.type)if("1"==t||this.getLabel(e)==t||e.id==t)e.checked=!0;else for(var i=t.split(";"),r=0;r<i.length;r++)"1"!=(o=i[r].replace(/^\s\s*/,"").replace(/\s\s*$/,""))&&this.getLabel(e)!=o&&e.id!=o||(e.checked=!0);if("SELECT"==e.tagName&&!e.multiple)for(var s=0;s<e.options.length;s++)e.options[s].value!=t&&e.options[s].text!=t||(e.options[s].selected=!0);if("SELECT"==e.tagName&&e.multiple)for(i=t.split(";"),s=0;s<e.options.length;s++)if(e.options[s].value==t||e.options[s].text==t)e.options[s].selected=!0;else for(r=0;r<i.length;r++){var o=i[r].replace(/^\s\s*/,"").replace(/\s\s*$/,"");e.options[s].value!=o&&e.options[s].text!=o||(e.options[s].selected=!0)}n&&n.run(null,e),a&&a.run(null,e)}else for(r=0;r<e.length;r++)if(e[r].value==t||this.getLabel(e[r])==t){e[r].checked=!0,n&&n.run(null,e[r]),a&&a.run(null,e[r]);break}},wFORMS.behaviors.prefill.instance.prototype.getLabel=function(e){if(!e||!e.form)return null;if(!e.form.querySelectorAll)return null;var t=e.getAttribute("id");return l=e.form.querySelectorAll("label[for="+t+"]"),l&&1<=l.length?l.item(0).innerHTML:null},wFORMS.behaviors.prefill.instance.prototype.getParameters=function(){var e,t,n=Array();if(0!=(e=1==arguments.length?arguments[0]:document.location.search).length){t=(e.split("?")[1]?e.split("?")[1]:e).split("&");for(var a=0;a<t.length;a++)n[t[a].split("=")[0]]=decodeURIComponent(t[a].split("=")[1].replace(/\+/g," "));return n}},wFORMS.behaviors.responseCaching={DEFAULT_OPTOUT:!0,OVERWRITE_VALUES:!1,instance:function(e){this.behavior=wFORMS.behaviors.responseCaching,this.target=e,this.run()},MESSAGES:{DIALOG_TITLE:"Remember these answers for next time?",DIALOG_INFO:'<p><strong>Fill out forms faster by saving these answers in your browser.</strong> Saved answers will be filled out automatically by your browser. <br><br>Choose Dont Remember" if you are on a public computer.\n\nYou can also clear saved answers at any time by clearing your browser cache.</p>',CONFIRM_CACHE:"Remember",CANCEL_CACHE:"Don't Remember",DO_NOT_ASK_AGAIN:"Dont ask again"},applyTo:function(e){return new wFORMS.behaviors.responseCaching.instance(e)}},wFORMS.behaviors.responseCaching.instance.prototype.run=function(){this.restoreCachedData();var n=this,a=wFORMS.behaviors.validation.onPass,i=wFORMS.getBehaviorInstance(this.target,"paging");wFORMS.behaviors.validation.onPass=function(e,t){if("function"==typeof a&&a(e,t),!i||wFORMS.behaviors.paging.isLastPageIndex(i.currentPageIndex))return n.onSubmit(t)}},wFORMS.behaviors.responseCaching.instance.prototype.restoreCachedData=function(){for(var e=this.getCachedData(),t=this.getAllCacheEnabledFields(),n=0;n<t.length;n++){var a=t[n],i=this.getCacheKey(a);if(e.hasOwnProperty(i)){for(var r,s,o=!1,l=e[i].v,c=0;c<l.length;c++)switch(a.type){case"select-one":if(!a.value||wFORMS.behaviors.responseCaching.OVERWRITE_VALUES)for(var u=a.querySelectorAll("option"),h=0;h<u.length;h++)u.item(h).text!=l[c]||u.item(h).disabled||u.item(h).selected||(a.value=u.item(h).value,o=!0);break;case"select-multiple":if(this.noChoiceSelected(a)||wFORMS.behaviors.responseCaching.OVERWRITE_VALUES)for(u=a.querySelectorAll("option"),h=0;h<u.length;h++)u.item(h).text==l[c]&&(u.item(h).selected||(o=u.item(h).selected=!0));break;case"checkbox":case"radio":this.getLabelsAssociatedWithField(a).join("|")===l[c]&&(this.noChoiceSelected(a)||wFORMS.behaviors.responseCaching.OVERWRITE_VALUES)&&(o=a.checked=!0);break;default:a.value&&!wFORMS.behaviors.responseCaching.OVERWRITE_VALUES||(a.value=l[c],o=!0)}o&&(r=wFORMS.getBehaviorInstance(this.target,"condition"),s=wFORMS.getBehaviorInstance(this.target,"calculation"),i=wFORMS.getBehaviorInstance(this.target,"dependent_list"),s.run(null,a),r.refresh(a),i.run(null,a))}}},wFORMS.behaviors.responseCaching.instance.prototype.onSubmit=function(e){try{var t,n,a=this.getCacheDataToAlwaysSave();this.isCacheDataEmpty(a)||this.saveCacheData(a),a=this.getCacheDataToApprove(),this.isCacheDataEmpty(a)||(t=function(e){this.saveCacheData(e),this.target.submit()}.bind(this),n=function(e){this.saveCacheData(e),this.target.submit()}.bind(this),this.showRememberDialog(a,t,n),e&&e.preventDefault())}catch(e){console.warn("Failed to handle response cache",e)}},wFORMS.behaviors.responseCaching.instance.prototype.getCachedData=function(){return JSON.parse(localStorage.getItem("tfa-cache")||"{}")},wFORMS.behaviors.responseCaching.instance.prototype.saveCacheData=function(e){void 0!==e&&(e=this.mergeCacheData(e),localStorage.setItem("tfa-cache",JSON.stringify(e)))},wFORMS.behaviors.responseCaching.instance.prototype.clearCacheData=function(){localStorage.removeItem("tfa-cache")},wFORMS.behaviors.responseCaching.instance.prototype.getCacheEnabledFields=function(){for(var e=[],t=this.target.querySelectorAll("*[data-tfa-cache-key]"),n=0;n<t.length;n++)this.isFieldConditionallyHidden(t.item(n))||e.push(t.item(n));return e},wFORMS.behaviors.responseCaching.instance.prototype.getAllCacheEnabledFields=function(){for(var e=[],t=this.target.querySelectorAll("*[data-tfa-cache-key]"),n=0;n<t.length;n++)e.push(t.item(n));return e},wFORMS.behaviors.responseCaching.instance.prototype.isFieldConditionallyHidden=function(e){if(e.disabled){e=e.getBoundingClientRect();if(0===e.height&&0===e.width)return!0}return!1},wFORMS.behaviors.responseCaching.instance.prototype.getCacheKey=function(e){return e.getAttribute("data-tfa-cache-key")},wFORMS.behaviors.responseCaching.instance.prototype.getCacheValuesFromField=function(e){var t=[];switch(e.type){case"select-one":case"select-multiple":for(var n=e.querySelectorAll("option:checked"),a=0;a<n.length;a++)n.item(a).value&&t.push(n.item(a).text.trim());break;case"radio":case"checkbox":e.checked&&(t=[(t=this.getLabelsAssociatedWithField(e)).join("|")]);break;default:t.push(e.value.trim())}return t},wFORMS.behaviors.responseCaching.instance.prototype.getLabelsAssociatedWithKey=function(e){e=this.target.querySelector("[data-tfa-cache-key="+e+"]");return this.getLabelsAssociatedWithField(e)},wFORMS.behaviors.responseCaching.instance.prototype.getLabelsAssociatedWithField=function(e){if(e){var t=this;if(e.hasAttribute("aria-labelledby"))return e.getAttribute("aria-labelledby").split(" ").map(function(e){e=t.target.querySelector("#"+e);return e?e.innerText.trim():"No Label"});e=e.id+"-L",e=this.target.querySelector("#"+e);if(e)return[e.innerText.trim()]}return["No Label"]},wFORMS.behaviors.responseCaching.instance.prototype.getQuestionAssociatedWithKey=function(e){e=this.target.querySelector("[data-tfa-cache-key="+e+"]");return this.getQuestionAssociatedWithField(e)},wFORMS.behaviors.responseCaching.instance.prototype.getQuestionAssociatedWithField=function(e){if(e){var t="",t=e.hasAttribute("data-tfa-labelledby")?e.getAttribute("data-tfa-labelledby").split(" ")[0]:e.id+"-L",t=this.target.querySelector("#"+t);if(t)return[t.innerText.trim()]}return["No Label"]},wFORMS.behaviors.responseCaching.instance.prototype.getDataFromCacheEnabledFields=function(){var e=this.getCacheEnabledFields(),n=this,a={};return e.map(function(e){var t=n.getCacheKey(e),e=n.getCacheValuesFromField(e);a.hasOwnProperty(t)?a[t]={v:a[t].v.concat(e),m:"ask"}:a[t]={v:e,m:"ask"}}),a},wFORMS.behaviors.responseCaching.instance.prototype.filterCacheData=function(e,t){var n,a={};for(n in t)e.hasOwnProperty(n)?"ask"===e[n].m&&e[n].v.join()!==t[n].v.join()&&(a[n]=t[n]):""!==t[n].v.join()&&(a[n]=t[n]);return a},wFORMS.behaviors.responseCaching.instance.prototype.getCacheDataToApprove=function(){var e=this.getDataFromCacheEnabledFields(),t=this.getCachedData();return this.filterCacheData(t,e)},wFORMS.behaviors.responseCaching.instance.prototype.getCacheDataToAlwaysSave=function(){var e,t=this.getDataFromCacheEnabledFields(),n=this.getCachedData(),a={};for(e in t)n.hasOwnProperty(e)&&"always"===n[e].m&&n[e].v.join()!==t[e].v.join()&&(a[e]={v:t[e].v,m:"always"});return a},wFORMS.behaviors.responseCaching.instance.prototype.mergeCacheData=function(e){var t=this.getCachedData();for(key in e)e.hasOwnProperty(key)&&(t[key]=e[key]);return t},wFORMS.behaviors.responseCaching.instance.prototype.isCacheDataEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},wFORMS.behaviors.responseCaching.instance.prototype.noChoiceSelected=function(e){switch(e.type){case"select-multiple":return e.__tfa_PrefillAlreadyChecked||(e.__tfa_PrefillAlreadyChecked=!e.value),e.__tfa_PrefillAlreadyChecked;case"radio":return!this.target.querySelector('input[name="'+e.name+'"]:checked');case"checkbox":for(var t=e.parentNode;t&&!t.classList.contains("choices");)t=t.parentNode;if(t)return t.__tfa_PrefillAlreadyChecked||(t.__tfa_PrefillAlreadyChecked=!t.querySelector("input:checked")),t.__tfa_PrefillAlreadyChecked}},wFORMS.behaviors.responseCaching.instance.prototype.showRememberDialog=function(r,s,n){this.dialog&&this.closeRememberDialog();var e=function(){var e="ask";this.dialog.querySelector("#do-not-ask-again").checked&&(e="always");for(var t,n=this.dialog.querySelectorAll("input:checked"),a={},i=0;i<n.length;i++)a[n.item(i).value]=!0;for(t in r)a.hasOwnProperty(t)?r[t].m=e:r[t]={v:[""],m:"ask"==e?"ask":"never"};this.closeRememberDialog(),s(r)}.bind(this),t=function(){var e,t="ask";for(e in this.dialog.querySelector("#do-not-ask-again").checked&&(t="never"),r)r[e]={v:[""],m:t};this.closeRememberDialog(),n(r)}.bind(this);return this.dialog=this.createRememberDialog(r,e,t),document.body.appendChild(this.dialog),this.dialog},wFORMS.behaviors.responseCaching.instance.prototype.closeRememberDialog=function(){this.dialog.parentNode.removeChild(this.dialog),this.dialog=null},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialog=function(e,t,n){var a=this.createRememberDialogBox(),i=a.querySelector(".content");i.appendChild(this.createRememberDialogTitle());i=i.appendChild(this.createRememberDialogForm());return i.appendChild(this.createRememberDialogInfo()),i.appendChild(this.createRememberDialogFieldList(e)),i.appendChild(this.createRememberDialogButtons(t,n)),a},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialogBox=function(){var e=document.createElement("div");e.classList.add("wFormOverlay");var t=document.createElement("div");t.id="save-to-cache-dialog",t.classList.add("wFormContainer");var n=document.createElement("div");return n.classList.add("content","wForm"),t.appendChild(n),e.appendChild(t),e},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialogTitle=function(){var e=document.createElement("H3");return e.innerHTML=this.behavior.MESSAGES.DIALOG_TITLE,e.classList.add("wFormTitle"),e},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialogForm=function(){var e=document.createElement("form");return e.setAttribute("action","javascript:void(0);"),e},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialogInfo=function(){var e=document.createElement("div");e.innerHTML=this.behavior.MESSAGES.DIALOG_INFO,e.classList.add("htmlContent");var t=document.createElement("div");return(t=t.appendChild(e)).classList.add("htmlSection"),t},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialogFieldList=function(e){var t=document.createElement("div");t.classList.add("oneField");var n=document.createElement("div");n.classList.add("inputWrapper"),t.appendChild(n);var a=document.createElement("div");a.classList.add("choices","vertical"),n.appendChild(a);for(var i=this.getCacheEnabledFields(),r=JSON.parse(JSON.stringify(e)),s=0;s<i.length;s++){var o,l=this.getCacheKey(i[s]);r.hasOwnProperty(l)&&(o=this.createRememberDialogFieldListItem(l,r[l]),o=a.appendChild(o),delete r[l])}return t},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialogFieldListItem=function(e,t){var n=document.createElement("div");n.classList.add("oneChoice");var a=document.createElement("input");a.type="checkbox",a.value=e,a.checked=wFORMS.behaviors.responseCaching.DEFAULT_OPTOUT,a.id=e,n.appendChild(a);var i=document.createElement("label");i.classList.add("label","postField"),i.setAttribute("for",a.id),v=[];for(var r=0;r<t.v.length;r++)v.push(t.v[r].split("|").pop());return v=v.join(", "),i.innerHTML=this.getQuestionAssociatedWithKey(e)+" : "+v,n.appendChild(i),n},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialogDoNotAskAgain=function(){var e=document.createElement("div");e.classList.add("oneField","doNotAskAgain");var t=document.createElement("div");t.classList.add("inputWrapper"),e.appendChild(t);var n=document.createElement("div");n.classList.add("choices","vertical"),t.appendChild(n);var a=document.createElement("div");a.classList.add("oneChoice"),n.appendChild(a);t=document.createElement("input");t.type="checkbox",t.checked=!1,t.id="do-not-ask-again",a.appendChild(t);n=document.createElement("label");return n.classList.add("label","postField"),n.setAttribute("for",t.id),n.innerHTML=this.behavior.MESSAGES.DO_NOT_ASK_AGAIN,a.appendChild(n),e},wFORMS.behaviors.responseCaching.instance.prototype.createRememberDialogButtons=function(e,t){var n=document.createElement("div");n.classList.add("actions");var a=document.createElement("button");a.classList.add("primaryAction"),a.id="do-cache",a.innerHTML=this.behavior.MESSAGES.CONFIRM_CACHE,a.addEventListener("click",e),n.appendChild(a);a=document.createElement("button");return a.classList.add("secondaryAction"),a.id="do-not-cache",a.innerHTML=this.behavior.MESSAGES.CANCEL_CACHE,a.addEventListener("click",t),n.appendChild(a),n.appendChild(this.createRememberDialogDoNotAskAgain()),n},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");wFORMS.behaviors.responsive={skip:!1,instance:function(e){this.behavior=wFORMS.behaviors.responsive,this.target=e;this.run()}},wFORMS.behaviors.responsive.applyTo=function(e){return wFORMS.behaviors.responsive.skip?null:new wFORMS.behaviors.responsive.instance(e)},wFORMS.behaviors.responsive.instance.prototype.run=function(){this.handleAllMatrixLayouts(),this.handleAllGridLayouts()},wFORMS.behaviors.responsive.instance.prototype.handleAllMatrixLayouts=function(){for(var e=this.target.clientWidth,t=this.target.querySelectorAll("table.matrixLayout"),n=!1,a=0;a<t.length;a++)n=this.handleMatrixLayout(t.item(a),e)||n;return n},wFORMS.behaviors.responsive.instance.prototype.handleMatrixLayout=function(e,t){var n=!1;if(e.clientWidth&&e.clientWidth>t){-1<(""+e.className).search("stacked")||(e.className=e.className+" stacked");var a=e.querySelectorAll("input");if(!(-1<(""+e.className).search("isStackedAndLabeled"))){for(var i=0;i<a.length;i++){var r=this.createLabel(a.item(i).getAttribute("title"),a.item(i).id,"postField");a.item(i).parentNode.insertBefore(r,a.item(i).nextSibling),n=!0}e.className=e.className+" isStackedAndLabeled"}}return n},wFORMS.behaviors.responsive.instance.prototype.handleAllGridLayouts=function(){for(var e=this.target.clientWidth,t=this.target.querySelectorAll("table.gridLayout"),n=!1,a=0;a<t.length;a++)n=this.handleGridLayout(t.item(a),e)||n;return n},wFORMS.behaviors.responsive.instance.prototype.handleGridLayout=function(e,t){var n=!1,t=e.clientWidth&&e.clientWidth>t;if(t&&(-1<(""+e.className).search("stacked")||(e.className=e.className+" stacked"),!(-1<(""+e.className).search("isStackedAndLabeled")))){for(var a=e.querySelectorAll("input[type=text],input[type=password],input[type=file],textarea,select"),i=0;i<a.length;i++){var r=this.createLabel(a.item(i).getAttribute("title"),a.item(i).id,"preField");a.item(i).parentNode.insertBefore(r,a.item(i)),n=!0}e.className=e.className+" isStackedAndLabeled"}return n},wFORMS.behaviors.responsive.instance.prototype.createLabel=function(e,t,n){var a=document.createElement("label");return a.innerHTML=e,a.setAttribute("for",t),a.className=n,a},wFORMS.behaviors.autosuggest={MESSAGES:{NO_RESULTS:"No matches",SHOWING_OF:"Showing %1 of %2.",CONTINUE_TYPING:"Continue typing to narrow your options."},DISPLAY_KEY:"a",SUGGESTIONS_LIMIT:100,SELECTOR:'input[type="text"].wfAutosuggest',instance:function(e){this.behavior=wFORMS.behaviors.autosuggest,this.target=e,this.setupAutosuggest()},applyTo:function(e){if("undefined"!=typeof FA$){FA$.support.cors=!0;var n=new Array;return e.querySelectorAll(wFORMS.behaviors.autosuggest.SELECTOR).forEach(function(e){e=new wFORMS.behaviors.autosuggest.instance(e);n.push(e),e.onApply()}),wFORMS.behaviors.repeat.observeRepeatStart(function(e){e.querySelectorAll(wFORMS.behaviors.autosuggest.SELECTOR).forEach(function(e){FA$(e).typeahead("destroy")})}),wFORMS.behaviors.repeat.observeRepeatComplete(function(e,t){e.querySelectorAll(wFORMS.behaviors.autosuggest.SELECTOR).forEach(function(e){e=new wFORMS.behaviors.autosuggest.instance(e);n.push(e),e.onApply()})}),n}},onSuggestedListChanged:function(e,t){return this}},wFORMS.behaviors.autosuggest.bloodhoundTokenizer=function(e){if(e=null==e?"":e+"",!(e=FA$.trim(e)))return[];var t="!$()\\[\\]<>?,.",n=new RegExp("^["+t+"]+|["+t+"]+$","g");return FA$.map(e.split(/\s+/),function(e){return e.replace(n,"")})},wFORMS.behaviors.autosuggest.instance.prototype.showOrHideClearIcon=function(e){if(e&&"keyup"===e.type){const t=[37,38,39,40];if(t.includes(e.which))return}e=FA$(this.target).closest(".inputWrapper").find(".tt-clear");""===FA$(this.target).val()?e.hasClass("no-input")||e.addClass("no-input"):e.hasClass("no-input")&&e.removeClass("no-input")},wFORMS.behaviors.autosuggest.instance.prototype.hideClearIcon=function(){var e=FA$(this.target).closest(".inputWrapper").find(".tt-clear");e&&!e.hasClass("no-input")&&e.addClass("no-input")},wFORMS.behaviors.autosuggest.instance.prototype.resetAutosuggest=function(){FA$(this.target).off("typeahead:asynccancel typeahead:asyncreceive typeahead:asyncrequest typeahead:change typeahead:select typeahead:autocompleted blur keyup"),FA$(this.target).closest(".inputWrapper").find(".tt-clear").off("click"),FA$(this.target).closest(".inputWrapper").find(".tt-search").off("click"),this.unbindParameterFields(),this.engine.clear(),FA$(this.target).typeahead("destroy"),this.setupAutosuggest()},wFORMS.behaviors.autosuggest.instance.prototype.getParameterNames=function(){var e=this.target.getAttribute("data-dataset-parameters");return e?e.split(" "):[]},wFORMS.behaviors.autosuggest.instance.prototype.bindParameterFields=function(){for(var e=0;e<this.queryParameters.length;e++){var t=document.querySelector("[name="+this.queryParameters[e]+"]");t&&FA$(t).change(this.resetAutosuggest)}},wFORMS.behaviors.autosuggest.instance.prototype.unbindParameterFields=function(){for(var e=0;e<this.queryParameters.length;e++){var t=document.querySelector("[name="+this.queryParameters[e]+"]");t&&FA$(t).off("change",this.resetAutosuggest)}},wFORMS.behaviors.autosuggest.instance.prototype.clearTypeaheadValue=function(e){if("keydown"===e.type){const t=[8,13,27,32,46];if(!t.includes(e.which))return}FA$(this.target).val(""),FA$(this.target).typeahead("val",""),FA$(this.target).closest(".inputWrapper").find(".tt-clear").addClass("no-input"),this.triggerFieldChangedUpdates(this.target),this.clearFieldMap()},wFORMS.behaviors.autosuggest.instance.prototype.focusTypeaheadField=function(){FA$(this.target).focus()},wFORMS.behaviors.autosuggest.instance.prototype.showSpinner=function(){FA$(this.target).closest(".inputWrapper").find(".tt-spinner").show()},wFORMS.behaviors.autosuggest.instance.prototype.hideSpinner=function(){FA$(this.target).closest(".inputWrapper").find(".tt-spinner").hide()},wFORMS.behaviors.autosuggest.instance.prototype.setIdSuffixIfRepeatedField=function(){var e=this.target.id.match(/(\[\d+\])+$/)||"";this.repeatSuffix=e?e[0].replace(/\[/g,"\\[").replace(/\]/g,"\\]"):""},wFORMS.behaviors.autosuggest.instance.prototype.getFieldMap=function(){var e=this.target.getAttribute("data-dataset-map");if(!e)return[];for(var t=[],n=(e=-1===e.indexOf("=")?"b="+e:e).split(","),a=0;a<n.length;a++)-1!==n[a].indexOf("=")&&t.push(n[a].split("="));return t},wFORMS.behaviors.autosuggest.instance.prototype.setFieldMap=function(e,t){var n,a,i=this.getFieldMap();this.setIdSuffixIfRepeatedField();for(var r=0;r<i.length;r++)a=document.getElementById(i[r][1]+this.repeatSuffix.replace(/\\/g,"")),(n=t[i[r][0]])&&FA$(a).val(n).trigger("change"),this.triggerFieldChangedUpdates(a)},wFORMS.behaviors.autosuggest.instance.prototype.clearFieldMap=function(){var e=this.getFieldMap();if(!FA$(this.target).typeahead("val"))for(var t=0;t<e.length;t++){var n=document.getElementById(e[t][1]+this.repeatSuffix.replace(/\\/g,""));FA$(n).val("").trigger("change"),this.triggerFieldChangedUpdates(n)}},wFORMS.behaviors.autosuggest.instance.prototype.triggerFieldChangedUpdates=function(e){wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(e),"calculation").run(null,e)},wFORMS.behaviors.autosuggest.instance.prototype.handleExactMatch=function(e){for(var t=FA$(this.target).val(),n=0;e&&n<e.length;n++){var a,i,r=!1;r=!this.target.hasAttribute("data-selected-json")||(a=JSON.parse(this.target.getAttribute("data-selected-json")),i=e[n],wFORMS.helpers.objectDeepEqual(a,i)),(t===e[n][wFORMS.behaviors.autosuggest.DISPLAY_KEY]&&r||t&&this.engine.get(t)[0]&&null!=this.engine.get(t)[0].fa_ta_uid&&this.engine.get(t)[0].fa_ta_uid===e[n].fa_ta_uid)&&(r=e[n][wFORMS.behaviors.autosuggest.DISPLAY_KEY],this.target.setAttribute("data-selected",r),this.target.setAttribute("data-selected-json",JSON.stringify(e[n])),FA$(this.target).data("ttTypeahead").input.setQuery(r,!0),this.hideSpinner(),this.setFieldMap(null,e[n]))}},wFORMS.behaviors.autosuggest.instance.prototype.handleSalesforceDependencyChanges=function(){var t=this,n=FA$(this.target);if(n.data("dataset-parameters"))try{n.data("dataset-parameters").split(",").map(function(e){return e!==n.attr("id")&&FA$("#"+e)}).filter(Boolean).forEach(function(e){e.on("typeahead:change typeahead:autocomplete typeahead:select change",function(){t.showSpinner(),t.engine.search("",null,function(e){e[0]&&1===Object.keys(e[0]).length&&n.typeahead("val",e[0].a),t.hideSpinner()})})})}catch(e){console.error("There was a problem handling salesforce picklist dependencies for field "+n.attr("name"),e)}},wFORMS.behaviors.autosuggest.instance.prototype.setupAutosuggest=function(){this.resetAutosuggest=this.resetAutosuggest.bind(this),this.clearTypeaheadValue=this.clearTypeaheadValue.bind(this),this.focusTypeaheadField=this.focusTypeaheadField.bind(this),this.showSpinner=this.showSpinner.bind(this),this.hideSpinner=this.hideSpinner.bind(this),this.setFieldMap=this.setFieldMap.bind(this),this.clearFieldMap=this.clearFieldMap.bind(this),this.handleExactMatch=this.handleExactMatch.bind(this),this.datasetType=this.target.getAttribute("data-dataset-type"),this.setIdSuffixIfRepeatedField(),this.matchingSetSize=null;var e=this.target.getAttribute("data-dataset-url"),t=this.target.getAttribute("data-dataset-id"),n=this.target.getAttribute("data-dataset-action"),a=this.target.getAttribute("data-dataset-json"),i=this.target.getAttribute("data-dataset-timestamp"),r=null!==this.target.getAttribute("data-dataset-allow-free-responses")?this.target.getAttribute("data-dataset-allow-free-responses"):1,s=null,o=[],l=e,c=this;this.queryParameters=this.getParameterNames(),this.bindParameterFields(),"csv"===this.datasetType?l=l+"/"+n+"?uuid="+t+"&format=withTotal&query=%QUERY%":(l=l+"/"+t+"?query=%QUERY%","salesforce-picklist"===this.datasetType&&(this.datasetType="salesforce",l=l+"&"+this.queryParameters.map(function(e){return e+"=%%"+e+"%%"}).join("&"))),t&&e?s={url:l,prepare:function(e,n){e=FA$.trim(e),n.url=n.url.replace("%QUERY%",encodeURIComponent(e));for(var t=[],a=/%%([^%]*)%%/g,i=a.exec(n.url);null!=i;)t.push(i[1]),i=a.exec(n.url);return t.map(function(e){var t=document.querySelector("[name="+e+"]");t&&(n.url=n.url.replace("%%"+e+"%%",encodeURIComponent(t.value)))}),n},transform:function(e){return c.datasetType,c.matchingSetSize=e.total,e.results||[]}}:a&&(o=JSON.parse(a),c.matchingSetSize=o.length);o={identify:function(e){return e.a},queryTokenizer:wFORMS.behaviors.autosuggest.bloodhoundTokenizer,datumTokenizer:function(e){return wFORMS.behaviors.autosuggest.bloodhoundTokenizer(e.a)},indexRemote:!0,remote:s,local:o};s&&(s=this.target.getAttribute("data-dataset-clear-cache"),o.prefetch={url:l,cache:s&&"1"===s?0:1,ttl:216e5,thumbprint:this.queryParameters.map(function(e){e=document.querySelector("[name="+e+"]");if(e)return encodeURIComponent(e.value)}).join("-")+i,prepare:function(n){n.url=n.url.replace("%QUERY%",encodeURIComponent("*"));for(var e=[],t=/%%([^%]*)%%/g,a=t.exec(n.url);null!=a;)e.push(a[1]),a=t.exec(n.url);return e.map(function(e){var t=document.querySelector("[name="+e+"]");t&&(n.url=n.url.replace("%%"+e+"%%",encodeURIComponent(t.value)))}),n},transform:function(e){return c.matchingSetSize=e.total,e=e.results||[],c.onSuggestionUpdate&&c.onSuggestionUpdate(e,"prefetch"),e}}),this.engine=new Bloodhound(o);FA$(this.target).typeahead({minLength:0,hint:!0,highlight:!0},{source:function(e,t,n){if(e=null==e?"":FA$.trim(e+""),null===c.matchingSetSize){var a=0;for(k in c.engine.index.datums)c.engine.index.datums.hasOwnProperty(k)&&a++;c.matchingSetSize=a}""===e?(n([]),t(c.engine.index.all())):c.engine.search(e,function(e){c.onSuggestionUpdate&&c.onSuggestionUpdate(e,"sync"),c.matchingSetSize=e.length,t.apply(this,arguments)},function(){c.onSuggestionUpdate&&c.onSuggestionUpdate(arguments[0],"async"),n.apply(this,arguments)})},displayKey:wFORMS.behaviors.autosuggest.DISPLAY_KEY,limit:wFORMS.behaviors.autosuggest.SUGGESTIONS_LIMIT,templates:{empty:'<div class="tt-empty-message">'+wFORMS.behaviors.autosuggest.MESSAGES.NO_RESULTS+"</div>",footer:function(e){if(e.suggestions.length<c.matchingSetSize)return'<div class="tt-more-message">'+wFORMS.behaviors.autosuggest.MESSAGES.SHOWING_OF.replace("%1",e.suggestions.length).replace("%2",c.matchingSetSize)+" "+wFORMS.behaviors.autosuggest.MESSAGES.CONTINUE_TYPING+"</div>"}}}).on("typeahead:asyncrequest",this.showSpinner).on("typeahead:asynccancel typeahead:asyncreceive typeahead:close",this.hideSpinner),FA$(this.target).data("ttTypeahead")._onTabKeyed=()=>{},0===parseInt(r)&&FA$(this.target).on("typeahead:select typeahead:autocompleted",function(e,t){this.target.setAttribute("data-selected",t[wFORMS.behaviors.autosuggest.DISPLAY_KEY]),this.target.setAttribute("data-selected-json",JSON.stringify(t))}.bind(c)),FA$(this.target).on("typeahead:change",function(){this.clearFieldMap();var e=FA$(this.target).val();e!==this.target.getAttribute("data-selected")&&this.engine.search(e,this.handleExactMatch,this.handleExactMatch)}.bind(c));r=FA$(this.target).val();"address-autocomplete"===this.datasetType&&this.engine.add([{a:r}]),this.engine.search(r,this.handleExactMatch,this.handleExactMatch),this.showOrHideClearIcon(),FA$(this.target).closest(".inputWrapper").find(".tt-search").on("click",this.focusTypeaheadField),FA$(this.target).closest(".inputWrapper").find(".tt-clear").on("click keydown",this.clearTypeaheadValue),FA$(this.target).on("keyup typeahead:change typeahead:select blur",this.showOrHideClearIcon.bind(c)),FA$(this.target).on("typeahead:autocomplete typeahead:select",function(e,t){var n=FA$(this.target).val(),n=this.engine.get(n)&&this.engine.get(n)[0]?this.engine.get(n)[0].fa_ta_uid:null;n?this.engine.search("selected_id:"+n,this.handleExactMatch,this.handleExactMatch):this.setFieldMap(e,t)}.bind(c)),"salesforce"===this.datasetType&&this.handleSalesforceDependencyChanges()},wFORMS.behaviors.autosuggest.instance.prototype.setValue=function(e){FA$(this.target).typeahead("val",e)},wFORMS.behaviors.autosuggest.instance.prototype.onApply=function(){};